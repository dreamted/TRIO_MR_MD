###############################################################################
#                                                                             #
#                                                       19/May/2017  23:29:10 #
# IAR ANSI C/C++ Compiler V5.50.5.21995/W32 EVALUATION for ARM                #
# Copyright (C) 1999-2010 IAR Systems AB.                                     #
#                                                                             #
#    Cpu mode     =  thumb                                                    #
#    Endian       =  little                                                   #
#    Source file  =  D:\Project\TRIO\1. TRIO-M\TRIO_M_appl_src_20141204_V5_5_ #
#                    20151207\code\ALC.C                                      #
#    Command line =  "D:\Project\TRIO\1. TRIO-M\TRIO_M_appl_src_20141204_V5_5 #
#                    _20151207\code\ALC.C" -D _MIMO_Type -D __2rd -D          #
#                    __PLLEnToggle -lcN "D:\Project\TRIO\1.                   #
#                    TRIO-M\TRIO_M_appl_src_20141204_V5_5_20151207\sout\" -o  #
#                    "D:\Project\TRIO\1. TRIO-M\TRIO_M_appl_src_20141204_V5_5 #
#                    _20151207\sout\" --endian=little --cpu=Cortex-M3 -e      #
#                    --require_prototypes --warnings_are_errors --fpu=None    #
#                    --dlib_config "D:\Program Files (x86)\IAR                #
#                    Systems\Embedded Workbench 5.4                           #
#                    Evaluation\arm\INC\DLib_Config_Normal.h" -I              #
#                    "D:\Project\TRIO\1. TRIO-M\TRIO_M_appl_src_20141204_V5_5 #
#                    _20151207\include\" -I "D:\Project\TRIO\1.               #
#                    TRIO-M\TRIO_M_appl_src_20141204_V5_5_20151207\lib_stm32\ #
#                    inc\" -I "D:\Project\TRIO\1.                             #
#                    TRIO-M\TRIO_M_appl_src_20141204_V5_5_20151207\lib_stm32\ #
#                    src\" -I "D:\Project\TRIO\1.                             #
#                    TRIO-M\TRIO_M_appl_src_20141204_V5_5_20151207\uC-CPU\"   #
#                    -I "D:\Project\TRIO\1. TRIO-M\TRIO_M_appl_src_20141204_V #
#                    5_5_20151207\uC-LIB\" -I "D:\Project\TRIO\1.             #
#                    TRIO-M\TRIO_M_appl_src_20141204_V5_5_20151207\uCOS-II\Po #
#                    rts\" -I "D:\Project\TRIO\1.                             #
#                    TRIO-M\TRIO_M_appl_src_20141204_V5_5_20151207\uCOS-II\So #
#                    urce\" -I "D:\Project\TRIO\1.                            #
#                    TRIO-M\TRIO_M_appl_src_20141204_V5_5_20151207\uC-Probe\" #
#                     -I "D:\Program Files (x86)\IAR Systems\Embedded         #
#                    Workbench 5.4 Evaluation\arm\INC\" -Oh                   #
#    List file    =  D:\Project\TRIO\1. TRIO-M\TRIO_M_appl_src_20141204_V5_5_ #
#                    20151207\sout\ALC.lst                                    #
#    Object file  =  D:\Project\TRIO\1. TRIO-M\TRIO_M_appl_src_20141204_V5_5_ #
#                    20151207\sout\ALC.o                                      #
#                                                                             #
#                                                                             #
###############################################################################

D:\Project\TRIO\1. TRIO-M\TRIO_M_appl_src_20141204_V5_5_20151207\code\ALC.C
      1           
      2          /*********************************************
      3          * File Name          : alc.c
      4          * Author             :
      5          * Date First Issued  : 10/20/2010
      6          * Description        : This file provides all the port/input/update firmware functions.
      7          * $Revision: 0.1 $
      8          * $Revision date: 2010.10.__
      9          ********************************************************************************/
     10          
     11          #define ALC_C
     12          
     13          #include "../include/main.h"
     14          
     15          #include <stdlib.h>
     16          
     17            
     18          void ADC_Init(void)
     19          {
     20          	OSTaskCreate(ADC_Task, (void *)0, (OS_STK *)&AdcTaskStk[ADC_START_STK_SIZE - 1],ADC_START_PRIO);
     21          }
     22          
     23          void ADC_Task(void * pdata)
     24          {
     25          	pdata = pdata;
     26          
     27          	while(1)
     28          	{
     29          		while((WRCS_DownLoadGiveupTimerSet(NULL)))
     30          		{
     31          			OSTimeDly(1000L);
     32          		}
     33          
     34          		while(!WRCS_DownLoadGiveupTimerSet(NULL))
     35          		{
     36          			ReadAdcValue();
     37          			OSTimeDly(20L*1L);
     38          		}
     39          
     40          		OSTimeDly(1000L*1L);
     41          	}
     42          }
     43          
     44          INT8S OneOutPwrConv(INT8S *Vaule) 
     45          {
     46          	INT8S dval;
     47          	dval  = Vaule[0]*2;
     48          	if(Vaule[0] < 0)
     49          	{
     50          		dval -= abs(Vaule[1])/5;
     51          	}
     52          	else
     53          	{
     54          		dval += Vaule[1]/5;
     55          	}
     56          
     57          	return dval;
     58          }
     59          
     60          void TwoOutPwrConv(INT8S *dptr, INT8S Vaule)
     61          {
     62          	dptr[0]	= (Vaule   )/2L ;
     63          	dptr[1] = ((Vaule%2L)*5L) ;
     64          }
     65          
     66          void TwoOutPwrConvINT(INT8S *dptr, INT16S Vaule)
     67          {
     68          	if(Vaule <= LowPwrLmt)
     69          	{
     70          		dptr[0]	= 0xFF;
     71          		dptr[1] = 0xFF;
     72          	}
     73          	else
     74          	{
     75          		dptr[0]	= (Vaule   )/2L ;
     76          		dptr[1] = ((Vaule%2L)*5L) ;
     77          	}
     78          }
     79          
     80          
     81          void ULTwoOutPwrConvINT(INT8S *dptr, INT16S Vaule)
     82          {
     83          	if(Vaule <= ULLowPwrLmt)
     84          	{
     85          		dptr[0]	= 0xFF;
     86          		dptr[1] = 0xFF;
     87          	}
     88          	else
     89          	{
     90          		dptr[0]	= (Vaule   )/2L ;
     91          		dptr[1] = ((Vaule%2L)*5L) ;
     92          	}
     93          }
     94          
     95          
     96          
     97          void TwoOutPwrConv_INT(INT8S *dptr, INT16S Vaule)
     98          {
     99          	if(Vaule <= DLLowPwrLmt)
    100          	{
    101          		dptr[0]	= 0xFF;
    102          		dptr[1] = 0xFF;
    103          	}
    104          	else
    105          	{
    106          		dptr[0]	= (Vaule   )/2L ;
    107          		dptr[1] = ((Vaule%2L)*5L) ;
    108          	}
    109          }
    110          
    111          
    112          INT8S Table_Operation(INT8S Pwr,INT8S tGain,INT8S tAttn,INT8S tOffset)
    113          {
    114          	INT8S retval;
    115          	if(Pwr != (-60*2))
    116          	{
    117          		retval = Pwr + (tGain - tAttn) + tOffset;
    118          	}
    119          	else retval = (-60*2);
    120          
    121          	return retval;
    122          }
    123          
    124          
    125          #define __AvgMAXGARBAGE	5
    126          #define __AvgMINGARBAGE	80
    127          
    128          #define __PeakMAXGARBAGE	20
    129          #define __PeakMINGARBAGE	10
    130          
    131          void ReadAdcValue(void)
    132          {
    133          	__Dnr_Sts *Sts = tDnrSts;
    134          
    135          	INT16U i;
    136          	INT16U SUM = 0;
    137          	INT16U min, max;
    138          	INT16U tSUM = 16;
    139          
    140          	for(i = 0 ; i <= (__ADCMAX-2); i++)
    141          	{
    142          		SUM += ADC_CheckFinish(i);
    143          	}
    144          
    145          	if( SUM == tSUM)
    146          	{
    147          		if( iAdcIndex == 0)
    148          		{
    149          			SelectSort_1(ADC_AVR[ADC_Channel_6],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    150          			ADC_DATA[FwdInVolt_CDMALTE] = max;
    151          
    152          			SelectSort_1(ADC_AVR[ADC_Channel_7],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    153          			ADC_DATA[RvsOutVolt_CDMALTE] = max;
    154          
    155          			SelectSort_1(ADC_AVR[ADC_Channel_8],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    156          			ADC_DATA[RvsInVolt_3G] = max;
    157          
    158          			SelectSort_1(ADC_AVR[ADC_Channel_9],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    159          			ADC_DATA[FwdOutAvgVolt_LTE_A2]  = (ADC_DATA[FwdOutAvgVolt_LTE_A2]*1L + max)/2L;
    160          			ADC_DATA[FwdOutPeakVolt_LTE_A2] = (ADC_DATA[FwdOutPeakVolt_LTE_A2]*1L + min)/2L;
    161          
    162          			SelectSort_1(ADC_AVR[ADC_Channel_10],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    163          			ADC_DATA[FwdInVolt_LTE_A] = max;
    164          
    165          			SelectSort_1(ADC_AVR[ADC_Channel_11],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    166          			ADC_DATA[Fwd1InVolt_LTE] = max;
    167          
    168          			SelectSort_1(ADC_AVR[ADC_Channel_12],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    169          			ADC_DATA[Rvs1OutVolt_LTE] = max;
    170          
    171          			SelectSort_1(ADC_AVR[ADC_Channel_13],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    172          			ADC_DATA[Fwd1OutAvgVolt_LTE_A2] = (ADC_DATA[Fwd1OutAvgVolt_LTE_A2]*1L + max)/2L;
    173          			ADC_DATA[Fwd1OutPeakVolt_LTE_A2] = (ADC_DATA[Fwd1OutPeakVolt_LTE_A2]*1L + min)/2L;
    174          
    175          			SelectSort_1(ADC_AVR[ADC_Channel_14],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    176          			ADC_DATA[Rvs1OutVolt_LTE_A2] = max;
    177          
    178          			ADC_DATA[Curr_Temp] = ADC_AVR[ADC_Channel_15][0];
    179          			Sts->CurrentTemp = ReadEnvTempTable(ADC_Channel_15)/10+ Sts->TempOffset;
    180          	
    181          		}
    182          		else if( iAdcIndex == 1)
    183          		{
    184          			SelectSort_1(ADC_AVR[ADC_Channel_6],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    185          			ADC_DATA[FwdOutAvgVolt_CDMALTE] = (ADC_DATA[FwdOutAvgVolt_CDMALTE]*1L + max)/2L;
    186          			ADC_DATA[FwdOutPeakVolt_CDMALTE] = (ADC_DATA[FwdOutPeakVolt_CDMALTE]*1L + min)/2L;
    187          
    188          			SelectSort_1(ADC_AVR[ADC_Channel_7],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    189          			ADC_DATA[FwdInVolt_3G] = max;
    190          
    191          			SelectSort_1(ADC_AVR[ADC_Channel_8],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    192          			ADC_DATA[RvsOutVolt_3G] = max;
    193          
    194          			SelectSort_1(ADC_AVR[ADC_Channel_10],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    195          			ADC_DATA[FwdOutAvgVolt_LTE_A] = max;
    196          
    197          			SelectSort_1(ADC_AVR[ADC_Channel_11],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    198          			ADC_DATA[Fwd1OutAvgVolt_LTE] = (ADC_DATA[Fwd1OutAvgVolt_LTE]*1L + max)/2L;
    199          			ADC_DATA[Fwd1OutPeakVolt_LTE] = (ADC_DATA[Fwd1OutPeakVolt_LTE]*1L + min)/2L;
    200          
    201          			SelectSort_1(ADC_AVR[ADC_Channel_12],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    202          			ADC_DATA[FwdInVolt_LTE_A_1] = max;
    203          
    204          			SelectSort_1(ADC_AVR[ADC_Channel_14],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    205          			ADC_DATA[RvsInVolt_LTE_A_1] = max;
    206          
    207          			SelectSort_1(ADC_AVR[ADC_Channel_15],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    208          			ADC_DATA[PSUDCVolt] = max;
    209           		}
    210          
    211           		else if( iAdcIndex == 2)
    212          		{
    213          			SelectSort_1(ADC_AVR[ADC_Channel_7],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    214          			ADC_DATA[FwdOutAvgVolt_3G] 	= min;
    215          			ADC_DATA[FwdOutPeakVolt_3G]	= max;
    216           
    217          			SelectSort_1(ADC_AVR[ADC_Channel_8],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    218          			ADC_DATA[FwdOutAvgVolt_LTE_A1] = (ADC_DATA[FwdOutAvgVolt_LTE_A1]*1L + max)/2L;
    219          			ADC_DATA[FwdOutPeakVolt_LTE_A1] = (ADC_DATA[FwdOutPeakVolt_LTE_A1]*1L + min)/2L;
    220          
    221          			SelectSort_1(ADC_AVR[ADC_Channel_9],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    222          			ADC_DATA[RvsOutVolt_LTE_A1] = max;
    223          
    224          			SelectSort_1(ADC_AVR[ADC_Channel_10],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    225          			ADC_DATA[RvsInVolt_LTE_A] = max;
    226          
    227           			SelectSort_1(ADC_AVR[ADC_Channel_12],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    228          			ADC_DATA[Fwd1OutAvgVolt_LTE_A1] = (ADC_DATA[Fwd1OutAvgVolt_LTE_A1]*1L + max)/2L;
    229          			ADC_DATA[Fwd1OutPeakVolt_LTE_A1] = (ADC_DATA[Fwd1OutPeakVolt_LTE_A1]*1L + min)/2L;
    230          			
    231          			SelectSort_1(ADC_AVR[ADC_Channel_13],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    232          			ADC_DATA[FwdOutAvgVolt_LTE_A_1] = max;
    233          
    234          			SelectSort_1(ADC_AVR[ADC_Channel_14],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    235          			ADC_DATA[RvsOutVolt_LTE_A_1] = max;
    236          			
    237          			ADC_DATA[DCOutVolt] =  ADC_AVR[ADC_Channel_15][0];;
    238           		}
    239            		else if( iAdcIndex == 3)
    240          		{
    241          			SelectSort_1(ADC_AVR[ADC_Channel_0],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, 10, 50, __ADCAVR);
    242          
    243          			ADC_DATA[FwdOutAvgVolt_2G] = (ADC_DATA[FwdOutAvgVolt_2G]*1L + max)/2L;
    244          			ADC_DATA[FwdOutPeakVolt_2G] = (ADC_DATA[FwdOutPeakVolt_2G]*1L + min)/2L;
    245          
    246          			SelectSort_1(ADC_AVR[ADC_Channel_2],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    247          			ADC_DATA[RvsOutVolt_2G] = max;
    248          			
    249          			SelectSort_1(ADC_AVR[ADC_Channel_3],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    250          			ADC_DATA[FwdOutAvgVolt_LTE] = (ADC_DATA[FwdOutAvgVolt_LTE]*1L + max)/2L;
    251          			ADC_DATA[FwdOutPeakVolt_LTE] = (ADC_DATA[FwdOutPeakVolt_LTE]*1L + min)/2L;
    252           
    253          			SelectSort_1(ADC_AVR[ADC_Channel_5],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    254          			ADC_DATA[RvsOutVolt_LTE] = max;
    255          			
    256          			SelectSort_1(ADC_AVR[ADC_Channel_6],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    257          			ADC_DATA[RvsInVolt_CDMALTE] = max;
    258          
    259          			SelectSort_1(ADC_AVR[ADC_Channel_9],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    260          			ADC_DATA[RvsOutVolt_LTE_A2] = max;
    261          
    262          			SelectSort_1(ADC_AVR[ADC_Channel_10],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    263          			ADC_DATA[RvsOutVolt_LTE_A] = max;
    264          
    265          			SelectSort_1(ADC_AVR[ADC_Channel_11],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    266          			ADC_DATA[Rvs1InVolt_LTE] = max;
    267          			
    268          			SelectSort_1(ADC_AVR[ADC_Channel_13],&min, &max, __AvgMAXGARBAGE, __AvgMINGARBAGE, __PeakMAXGARBAGE, __PeakMINGARBAGE, __ADCAVR);
    269          			ADC_DATA[Rvs1OutVolt_LTE_A1] = max;
    270          
    271           		}
    272          
    273           		Sts->DetVolt.FwdOutAvgVolt_2G.Data			= (ADC_DATA[FwdOutAvgVolt_2G]);
    274          		Sts->DetVolt.FwdOutPeakVolt_2G.Data 		= (ADC_DATA[FwdOutPeakVolt_2G]);
    275          		Sts->DetVolt.RvsOutVolt_2G.Data 			= (ADC_DATA[RvsOutVolt_2G]);
    276          		
    277          		Sts->DetVolt.FwdOutAvgVolt_LTE.Data 		= (ADC_DATA[FwdOutAvgVolt_LTE]);
    278          		Sts->DetVolt.FwdOutPeakVolt_LTE.Data		= (ADC_DATA[FwdOutPeakVolt_LTE]);
    279          		Sts->DetVolt.RvsOutVolt_LTE.Data			= (ADC_DATA[RvsOutVolt_LTE]);
    280          		
    281          		Sts->DetVolt.FwdInVolt_CDMALTE.Data 		= (ADC_DATA[FwdInVolt_CDMALTE]);
    282          		Sts->DetVolt.FwdOutAvgVolt_CDMALTE.Data 	= (ADC_DATA[FwdOutAvgVolt_CDMALTE]);
    283          		Sts->DetVolt.FwdOutPeakVolt_CDMALTE.Data	= (ADC_DATA[FwdOutPeakVolt_CDMALTE]);
    284          		Sts->DetVolt.RvsInVolt_CDMALTE.Data 		= (ADC_DATA[RvsInVolt_CDMALTE]);
    285          		Sts->DetVolt.RvsOutVolt_CDMALTE.Data		= (ADC_DATA[RvsOutVolt_CDMALTE]);
    286          		
    287          		Sts->DetVolt.FwdOutAvgVolt_LTE_A1.Data		= (ADC_DATA[FwdOutAvgVolt_LTE_A1]);
    288          		Sts->DetVolt.FwdOutPeakVolt_LTE_A1.Data 	= (ADC_DATA[FwdOutPeakVolt_LTE_A1]);
    289          		Sts->DetVolt.RvsOutVolt_LTE_A1.Data 		= (ADC_DATA[RvsOutVolt_LTE_A1]);
    290          		
    291          		Sts->DetVolt.FwdOutAvgVolt_LTE_A2.Data		= (ADC_DATA[FwdOutAvgVolt_LTE_A2]);
    292          		Sts->DetVolt.FwdOutPeakVolt_LTE_A2.Data 	= (ADC_DATA[FwdOutPeakVolt_LTE_A2]);
    293          		Sts->DetVolt.RvsOutVolt_LTE_A2.Data 		= (ADC_DATA[RvsOutVolt_LTE_A2]);
    294          		
    295          		Sts->DetVolt.FwdInVolt_LTE_A.Data			= (ADC_DATA[FwdInVolt_LTE_A]);
    296          		Sts->DetVolt.FwdOutAvgVolt_LTE_A.Data		= (ADC_DATA[FwdOutAvgVolt_LTE_A]);
    297          		Sts->DetVolt.RvsInVolt_LTE_A.Data			= (ADC_DATA[RvsInVolt_LTE_A]);
    298          		Sts->DetVolt.RvsOutVolt_LTE_A.Data			= (ADC_DATA[RvsOutVolt_LTE_A]);
    299          		
    300          		Sts->DetVolt.FwdInVolt_3G.Data				= (ADC_DATA[FwdInVolt_3G]);
    301          		Sts->DetVolt.FwdOutAvgVolt_3G.Data			= (ADC_DATA[FwdOutAvgVolt_3G]);
    302          		Sts->DetVolt.FwdOutPeakVolt_3G.Data 		= (ADC_DATA[FwdOutPeakVolt_3G]);
    303          		Sts->DetVolt.RvsInVolt_3G.Data				= (ADC_DATA[RvsInVolt_3G]);
    304          		Sts->DetVolt.RvsOutVolt_3G.Data 			= (ADC_DATA[RvsOutVolt_3G]);
    305          		
    306          		Sts->DetVolt.PSUDCVolt.Data 				= (ADC_DATA[PSUDCVolt]);
    307          		Sts->DetVolt.PSUDCVolt.Data 				= (INT16U)(Sts->DetVolt.PSUDCVolt.Data * Sts->DCOffSet/1000);
    308          
    309          		Sts->Det1Volt.Fwd1InVolt_LTE.Data			= (ADC_DATA[Fwd1InVolt_LTE]);
    310          		Sts->Det1Volt.Fwd1OutAvgVolt_LTE.Data		= (ADC_DATA[Fwd1OutAvgVolt_LTE]);
    311          		Sts->Det1Volt.Fwd1OutPeakVolt_LTE.Data		= (ADC_DATA[Fwd1OutPeakVolt_LTE]);
    312          		Sts->Det1Volt.Rvs1InVolt_LTE.Data			= (ADC_DATA[Rvs1InVolt_LTE]);
    313          		Sts->Det1Volt.Rvs1OutVolt_LTE.Data			= (ADC_DATA[Rvs1OutVolt_LTE]);
    314          		
    315          		Sts->Det1Volt.Fwd1OutAvgVolt_LTE_A1.Data	= (ADC_DATA[Fwd1OutAvgVolt_LTE_A1]);
    316          		Sts->Det1Volt.Fwd1OutPeakVolt_LTE_A1.Data	= (ADC_DATA[Fwd1OutPeakVolt_LTE_A1]);
    317          		Sts->Det1Volt.Rvs1OutVolt_LTE_A1.Data		= (ADC_DATA[Rvs1OutVolt_LTE_A1]);
    318          		
    319          		Sts->Det1Volt.Fwd1OutAvgVolt_LTE_A2.Data	= (ADC_DATA[Fwd1OutAvgVolt_LTE_A2]);
    320          		Sts->Det1Volt.Fwd1OutPeakVolt_LTE_A2.Data	= (ADC_DATA[Fwd1OutPeakVolt_LTE_A2]);
    321          		Sts->Det1Volt.Rvs1OutVolt_LTE_A2.Data		= (ADC_DATA[Rvs1OutVolt_LTE_A2]);
    322          		
    323          		Sts->Det1Volt.FwdInVolt_LTE_A_1.Data		= (ADC_DATA[FwdInVolt_LTE_A_1]);
    324          		Sts->Det1Volt.FwdOutAvgVolt_LTE_A_1.Data	= (ADC_DATA[FwdOutAvgVolt_LTE_A_1]);
    325          		Sts->Det1Volt.RvsInVolt_LTE_A_1.Data		= (ADC_DATA[RvsInVolt_LTE_A_1]);
    326          		Sts->Det1Volt.RvsOutVolt_LTE_A_1.Data		= (ADC_DATA[RvsOutVolt_LTE_A_1]);
    327          
    328          	}
    329          	
    330          	if( SUM >= tSUM)
    331          	{
    332          		if( ++iAdcIndex > 3) iAdcIndex = 0;
    333          		ADC_Select(iAdcIndex);
    334          		if(iAdcIndex == 0)
    335          		{
    336          			ADC_ChannelEnable(ADC_Channel_6);
    337          			ADC_ChannelEnable(ADC_Channel_7);
    338          			ADC_ChannelEnable(ADC_Channel_8);
    339          			ADC_ChannelEnable(ADC_Channel_9);
    340          			ADC_ChannelEnable(ADC_Channel_10);
    341          			ADC_ChannelEnable(ADC_Channel_11);
    342          			ADC_ChannelEnable(ADC_Channel_12);
    343          			ADC_ChannelEnable(ADC_Channel_13);
    344          			ADC_ChannelEnable(ADC_Channel_14);	
    345          			ADC_ChannelEnable(ADC_Channel_15);
    346          		}
    347          		else if(iAdcIndex == 1)
    348          		{
    349          			ADC_ChannelEnable(ADC_Channel_6);
    350          			ADC_ChannelEnable(ADC_Channel_7);
    351          			ADC_ChannelEnable(ADC_Channel_8);
    352          			ADC_ChannelEnable(ADC_Channel_10);
    353          			ADC_ChannelEnable(ADC_Channel_11);
    354          			ADC_ChannelEnable(ADC_Channel_12);
    355          			ADC_ChannelEnable(ADC_Channel_14);	
    356          			ADC_ChannelEnable(ADC_Channel_15);
    357          		}
    358          		else if(iAdcIndex == 2)
    359          		{
    360          			ADC_ChannelEnable(ADC_Channel_7);
    361          			ADC_ChannelEnable(ADC_Channel_8);
    362          			ADC_ChannelEnable(ADC_Channel_9);
    363          			ADC_ChannelEnable(ADC_Channel_10);
    364          			ADC_ChannelEnable(ADC_Channel_12);
    365          			ADC_ChannelEnable(ADC_Channel_13);
    366          			ADC_ChannelEnable(ADC_Channel_14);	
    367          			ADC_ChannelEnable(ADC_Channel_15);
    368          		}
    369          		else if(iAdcIndex == 3)
    370          		{
    371          			ADC_ChannelEnable(ADC_Channel_0);
    372          			ADC_ChannelEnable(ADC_Channel_2);
    373          			ADC_ChannelEnable(ADC_Channel_3);
    374          			ADC_ChannelEnable(ADC_Channel_5);
    375          
    376          			ADC_ChannelEnable(ADC_Channel_6);
    377          			ADC_ChannelEnable(ADC_Channel_9);
    378          			ADC_ChannelEnable(ADC_Channel_10);
    379          			ADC_ChannelEnable(ADC_Channel_11);
    380          			ADC_ChannelEnable(ADC_Channel_13);
    381          		}
    382          	}
    383          }
    384          
    385          
    386          
    387          
    388          void ReadAdcValue_TRIO(void)
    389          {
    390          	__Dnr_Sts *Sts = tDnrSts;
    391          
    392          	INT16S tmpx10 = 0;
    393          
    394          	INT8U isminval = 0;
    395          	INT16S tmppwrin = 0;
    396          	INT16S tmppwrout = 0;
    397          
    398          
    399          	 // CDMA LTE
    400          	{
    401          		Sts->DetPwr.FwdInPwr_CDMALTE 		= ReadPwrTableDnr(Sts->DetVolt.FwdInVolt_CDMALTE.Data ,Index_FwdInPwr_CDMALTE,FALSE,&isminval, Sts->DetOffset.FwdInPwr_CDMALTE); 
    402          		Sts->DetPwr.FwdOutAvgPwr_CDMALTE 	= ReadPwrTableDnr(Sts->DetVolt.FwdOutAvgVolt_CDMALTE.Data ,Index_FwdOutAvgPwr_CDMALTE,FALSE,&isminval, Sts->DetOffset.FwdOutAvgPwr_CDMALTE); 
    403          		Sts->DetPwr.FwdOutPeakPwr_CDMALTE 	= ReadPwrTableDnr(Sts->DetVolt.FwdOutPeakVolt_CDMALTE.Data ,Index_FwdOutAvgPwr_CDMALTE,FALSE,&isminval, Sts->DetOffset.FwdOutPeakPwr_CDMALTE); 
    404          		Sts->DetPwr.RvsInPwr_CDMALTE 		= ReadPwrTableDnr(Sts->DetVolt.RvsInVolt_CDMALTE.Data ,Index_RvsInPwr_CDMALTE,FALSE,&isminval, Sts->DetOffset.RvsInPwr_CDMALTE); 
    405          		Sts->DetPwr.RvsOutPwr_CDMALTE 		= ReadPwrTableDnr(Sts->DetVolt.RvsOutVolt_CDMALTE.Data ,Index_RvsOutPwr_CDMALTE,FALSE,&isminval, Sts->DetOffset.RvsOutPwr_CDMALTE); 
    406          	}
    407          
    408          	// CDMA
    409           	{
    410          
    411          		Sts->DetPwr.FwdOutAvgPwr_2G = ReadPwrTableDnr(Sts->DetVolt.FwdOutAvgVolt_2G.Data ,Index_FwdOutAvgPwr_2G,FALSE,&isminval, Sts->FwdOutPwrOffset_2G);	
    412          		Sts->DetPwr.FwdOutPeakPwr_2G = ReadPwrTableDnr(Sts->DetVolt.FwdOutPeakVolt_2G.Data ,Index_FwdOutAvgPwr_2G,FALSE,&isminval, Sts->DetOffset.FwdOutPeakPwr_2G); 
    413          
    414          		if(Sts->LTE15MUse == __NOTUSE)
    415          		{
    416          			Sts->DetPwr.RvsOutPwr_2G = ReadPwrTableDnr(Sts->DetVolt.RvsOutVolt_2G.Data ,Index_RvsOutPwr_2G,FALSE,&isminval, Sts->Rvs0OutPwrOffset_2G);
    417          		}
    418          		else
    419          		{
    420          			Sts->DetPwr.RvsOutPwr_2G = ReadPwrTableDnr(Sts->DetVolt.RvsOutVolt_2G.Data ,Index_RvsOutPwr_2G,FALSE,&isminval, Sts->DetOffset.RvsOutPwr_2G);
    421          		}
    422          
    423          		// 	 '4. 출력=CDMA Fwd 출력 Avg Det+(15- CDMA FWD ATT 2)
    424          		tmppwrout = Sts->DetPwr.FwdOutAvgPwr_2G;
    425          		TwoOutPwrConv((INT8S *)&dptr[0],tmppwrout);
    426          		Sts->FwdOutPwr_2G[0] = dptr[0];
    427          		Sts->FwdOutPwr_2G[1] = dptr[1];
    428          		
    429          		tmpx10 = Sts->DetPwr.FwdOutPeakPwr_2G;
    430          		TwoOutPwrConv((INT8S *)&dptr[0],tmpx10);
    431          		Sts->FwdOutPwrPeak_2G[0] = dptr[0];
    432          		Sts->FwdOutPwrPeak_2G[1] = dptr[1];
    433          
    434          		// 	 '4. 입력=CDMA Fwd 출력 Avg Det-81+CDMA&LTE#0 공통부 FWD ATT+CDMA FWD ATT 1-(15- CDMA FWD ATT 2)
    435          		//5. 입력=DET4-81+ATT1+ATT4+(15-ATT5)
    436          		if( Sts->DetPwr.FwdOutAvgPwr_2G == 0)
    437          		{
    438          			Sts->FwdInPwr_2G = NoSignal;
    439          		}
    440          		else
    441          		{
    442          			tmppwrin= tmppwrout - Gain_2G + Sts->FwdAttn1_CDMALTE + Sts->FwdAttn1_2G ;
    443          			Sts->FwdInPwr_2G = abs(tmppwrin/2) - Sts->FwdInPwrOffset_2G/2;
    444          		}
    445          
    446          		///5. GAIN= 81-ATT1-ATT2+(15-ATT3)		
    447          		Sts->FwdGain_2G = Gain_2G - Sts->FwdAttn1_CDMALTE - Sts->FwdAttn1_2G ;
    448          		Sts->FwdGain_2G = MinMaxAttnCheck(Sts->FwdGain_2G, Gain_2G,FwdMinGain_2G);
    449          
    450          
    451          		if(tDnrSts->LTE15MUse == __NOTUSE)
    452          		{
    453          			tmppwrout = Sts->DetPwr.RvsOutPwr_2G - CurrRvsAgcAttn_2G;
    454          			TwoOutPwrConvINT((INT8S *)&dptr[0],tmppwrout);
    455          			Sts->RvsOutPwr_2G[0] = dptr[0];
    456          			Sts->RvsOutPwr_2G[1] = dptr[1];
    457          
    458          	
    459          			tmppwrin = Sts->DetPwr.RvsOutPwr_2G - Gain_2G + Sts->RvsAlcAttn_2G;
    460          			ULTwoOutPwrConvINT((INT8S *)&dptr[0],tmppwrin);
    461          			Sts->RvsInPwr_2G[0] = dptr[0];
    462          			Sts->RvsInPwr_2G[1] = dptr[1];
    463          		}
    464          
    465          
    466          		Sts->RvsGainSts_2G = Gain_2G - CurrRvsAgcAttn_2G - Sts->RvsAlcAttn_2G ;
    467          		Sts->RvsGainSts_2G = MinMaxAttnCheck(Sts->RvsGainSts_2G, Gain_2G,RvsMinGain_2G);
    468          		if(Sts->AlmSts.FwdAmpOnOff_2G == Disable) 	Sts->FwdInPwr_2G		= NoSignal;
    469          	}
    470          
    471          	// LTE
    472          	{
    473          		Sts->DetPwr.FwdOutAvgPwr_LTE = ReadPwrTableDnr(Sts->DetVolt.FwdOutAvgVolt_LTE.Data ,Index_FwdOutAvgPwr_LTE,FALSE,&isminval, Sts->FwdOutPwrOffset_LTE);
    474          		Sts->DetPwr.FwdOutPeakPwr_LTE = ReadPwrTableDnr(Sts->DetVolt.FwdOutPeakVolt_LTE.Data ,Index_FwdOutAvgPwr_LTE,FALSE,&isminval, Sts->DetOffset.FwdOutPeakPwr_LTE); 
    475          
    476          		if(Sts->LTE15MUse == __NOTUSE)
    477          		{
    478          			Sts->DetPwr.RvsOutPwr_LTE = ReadPwrTableDnr(Sts->DetVolt.RvsOutVolt_LTE.Data ,Index_RvsOutPwr_LTE,FALSE,&isminval, Sts->RvsOutPwrOffset_LTE);
    479          		}
    480          		else
    481          		{
    482          			Sts->DetPwr.RvsOutPwr_LTE = ReadPwrTableDnr(Sts->DetVolt.RvsOutVolt_LTE.Data ,Index_RvsOutPwr_LTE,FALSE,&isminval, Sts->DetOffset.RvsOutPwr_LTE);
    483          		}
    484          
    485          		{
    486          			if(Sts->LTE15MUse == __NOTUSE)
    487          			{
    488          		//		'4. 출력=LTE Fwd 출력 Avg Det+(15- LTE FWD ATT 2)
    489          				tmppwrout = Sts->DetPwr.FwdOutAvgPwr_LTE;
    490          
    491          				TwoOutPwrConv((INT8S *)&dptr[0],tmppwrout);
    492          				Sts->FwdOutPwr_LTE[0] = dptr[0];
    493          				Sts->FwdOutPwr_LTE[1] = dptr[1];
    494          
    495          				tmpx10 = Sts->DetPwr.FwdOutPeakPwr_LTE;
    496          				TwoOutPwrConv((INT8S *)&dptr[0],tmpx10);
    497          				Sts->FwdOutPwrPeak_LTE[0] = dptr[0];
    498          				Sts->FwdOutPwrPeak_LTE[1] = dptr[1];
    499          			}
    500          			else
    501          			{
    502          		//		'4. 출력=LTE Fwd 출력 Avg Det+(15- LTE FWD ATT 2)
    503          				tmppwrout = Sts->DetPwr.FwdOutAvgPwr_CDMALTE;
    504          				TwoOutPwrConv((INT8S *)&dptr[0],tmppwrout);
    505          				Sts->FwdOutPwr_LTE[0] = dptr[0];
    506          				Sts->FwdOutPwr_LTE[1] = dptr[1];
    507          		
    508          	
    509          				tmpx10 = Sts->DetPwr.FwdOutPeakPwr_CDMALTE;
    510          				TwoOutPwrConv((INT8S *)&dptr[0],tmpx10);
    511          				Sts->FwdOutPwrPeak_LTE[0] = dptr[0];
    512          				Sts->FwdOutPwrPeak_LTE[1] = dptr[1];
    513          			}
    514          
    515          			if( Sts->DetPwr.FwdOutAvgPwr_LTE == 0)
    516          			{
    517          				Sts->FwdInPwr_LTE = NoSignal;
    518          			}
    519          			else
    520          			{
    521          				tmppwrin = tmppwrout - Gain_LTE + Sts->FwdAttn1_CDMALTE + Sts->FwdAttn1_LTE;
    522          				Sts->FwdInPwr_LTE = abs(tmppwrin/2)- Sts->FwdInPwrOffset_LTE/2;
    523          			}
    524          			
    525          	//		GAIN = 출력-입력
    526          			Sts->FwdGain_LTE = Gain_LTE - Sts->FwdAttn1_CDMALTE - Sts->FwdAttn1_LTE;
    527          			Sts->FwdGain_LTE = MinMaxAttnCheck(Sts->FwdGain_LTE, Gain_LTE,FwdMinGain_LTE);
    528          
    529          			if(tDnrSts->LTE15MUse == __NOTUSE)
    530          			{
    531          				tmppwrout = Sts->DetPwr.RvsOutPwr_LTE - CurrRvsAgcAttn_LTE;
    532          				TwoOutPwrConvINT((INT8S *)&dptr[0],tmppwrout);
    533          				Sts->RvsOutPwr_LTE[0] = dptr[0];
    534          				Sts->RvsOutPwr_LTE[1] = dptr[1];
    535          		
    536          		//		5. 입력=LTE RVS 출력 DET-81+CDMA&LTE#0 공통부 RVS ATT + LTE RVS ATT 1	
    537          				tmpx10 = Sts->DetPwr.RvsOutPwr_LTE - Gain_LTE + Sts->RvsAlcAttn_LTE;
    538          				Sts->CurrRvsInPwr_LTE =abs(tmpx10/2);
    539          				tmppwrin = tmpx10;
    540          				ULTwoOutPwrConvINT((INT8S *)&dptr[0],tmppwrin);
    541          				Sts->RvsInPwr_LTE[0] = dptr[0];
    542          				Sts->RvsInPwr_LTE[1] = dptr[1];
    543          			}
    544          
    545          			Sts->RvsGainSts_LTE = Gain_LTE - CurrRvsAgcAttn_LTE - Sts->RvsAlcAttn_LTE;
    546          			Sts->RvsGainSts_LTE = MinMaxAttnCheck(Sts->RvsGainSts_LTE, Gain_LTE,RvsMinGain_LTE);
    547          		}
    548          		if(Sts->AlmSts.FwdAmpOnOff_LTE 	== Disable) 	Sts->FwdInPwr_LTE		= NoSignal;
    549          	}
    550          
    551           	// LTE-A1
    552           	if(AlarmCheck_LTE_A1 == SET)
    553          	{
    554          		Sts->DetPwr.FwdOutAvgPwr_LTE_A1 	= ReadPwrTableDnr(Sts->DetVolt.FwdOutAvgVolt_LTE_A1.Data ,Index_FwdOutAvgPwr_LTE_A1,FALSE,&isminval, Sts->FwdOutPwrOffset_LTE_A1); 
    555          		Sts->DetPwr.FwdOutPeakPwr_LTE_A1	= ReadPwrTableDnr(Sts->DetVolt.FwdOutPeakVolt_LTE_A1.Data ,Index_FwdOutAvgPwr_LTE_A1,FALSE,&isminval, Sts->DetOffset.FwdOutPeakPwr_LTE_A1);   
    556          		Sts->DetPwr.RvsOutPwr_LTE_A1		= ReadPwrTableDnr(Sts->DetVolt.RvsOutVolt_LTE_A1.Data ,Index_RvsOutPwr_LTE_A1,FALSE,&isminval, Sts->RvsOutPwrOffset_LTE_A1);
    557          
    558          
    559          		if(iRepeaterType == _TRIO_M)
    560          		{
    561          			INT8S TempOffset = 0;
    562          
    563          			TempOffset = PwrTableOffset(Sts->DetPwr.FwdOutAvgPwr_LTE_A1,Index_FwdOutAvgPwr_LTE_A1);
    564          			if( Sts->DetPwr.FwdOutAvgPwr_LTE_A1 == 0) TempOffset = 0;////20121120 Adder
    565          			Sts->DetPwr.FwdOutAvgPwr_LTE_A1 = Sts->DetPwr.FwdOutAvgPwr_LTE_A1 + TempOffset;
    566          			Sts->DetPwr.FwdOutPeakPwr_LTE_A1 = Sts->DetPwr.FwdOutPeakPwr_LTE_A1 + TempOffset;
    567          
    568          			
    569          			TempOffset = PwrTableOffset(Sts->DetPwr.RvsOutPwr_LTE_A1,Index_RvsOutPwr_LTE_A1);
    570          			if( Sts->DetPwr.RvsOutPwr_LTE_A1 == LowPwrLmt) TempOffset = 0;////20121120 Adder
    571          			Sts->DetPwr.RvsOutPwr_LTE_A1 = Sts->DetPwr.RvsOutPwr_LTE_A1 + TempOffset;
    572          		}
    573          		
    574          
    575          		{
    576          	//		'4.  출력=LTE-A1#0 Fwd 출력 Avg DET+(20-LTE-A1#0 FWD ATT 2)
    577          			tmppwrout = Sts->DetPwr.FwdOutAvgPwr_LTE_A1;
    578          			TwoOutPwrConv((INT8S *)&dptr[0],tmppwrout);
    579          			Sts->FwdOutPwr_LTE_A1[0] = dptr[0];
    580          			Sts->FwdOutPwr_LTE_A1[1] = dptr[1];
    581          
    582          
    583          			tmpx10 = Sts->DetPwr.FwdOutPeakPwr_LTE_A1;
    584          			TwoOutPwrConv((INT8S *)&dptr[0],tmpx10);
    585          			Sts->FwdOutPwrPeak_LTE_A1[0] = dptr[0];
    586          			Sts->FwdOutPwrPeak_LTE_A1[1] = dptr[1];
    587          
    588          			if( Sts->DetPwr.FwdOutAvgPwr_LTE_A1 == 0)
    589          			{
    590          				Sts->FwdInPwr_LTE_A1 = NoSignal;
    591          			}
    592          			else
    593          			{
    594          				tmppwrin = tmppwrout - Gain_LTE_A + Sts->FwdAttn1_LTE_A + Sts->FwdAttn1_LTE_A1 -(ToggleFwdAttn_LTE_A1 - Sts->FwdAttn2_LTE_A1);
    595          				Sts->FwdInPwr_LTE_A1 = abs(tmppwrin/2)- Sts->FwdInPwrOffset_LTE_A1/2;	
    596          			}
    597          
    598          
    599          	//	5. GAIN= 86-ATT8-ATT9+(20-ATT10)
    600          			Sts->FwdGain_LTE_A1 = Gain_LTE_A - Sts->FwdAttn1_LTE_A - Sts->FwdAttn1_LTE_A1 + (ToggleFwdAttn_LTE_A1 - Sts->FwdAttn2_LTE_A1);
    601          			Sts->FwdGain_LTE_A1 = MinMaxAttnCheck(Sts->FwdGain_LTE_A1, Gain_LTE_A,FwdMinGain_LTE_A);
    602          	
    603          	//		'4. 출력=LTE-A1 RVS 출력-LTE-A1#0 AGC ATT2-LTE-A1#0 AGC ATT3
    604          			tmppwrout = Sts->DetPwr.RvsOutPwr_LTE_A1 - CurrRvsAgcAttn_LTE_A1;
    605          			TwoOutPwrConvINT((INT8S *)&dptr[0],tmppwrout);
    606          			Sts->RvsOutPwr_LTE_A1[0] = dptr[0];
    607          			Sts->RvsOutPwr_LTE_A1[1] = dptr[1];
    608          			
    609          	
    610          	//		5. 입력=LTE-A1 RVS 출력-86+LTE-A1#0&LTE-A2#0 RVS ATT  +LTE-A1#0 ALC ATT1
    611          			tmppwrin = Sts->DetPwr.RvsOutPwr_LTE_A1 - Gain_LTE_A + Sts->RvsAlcAttn_LTE_A1;
    612          			ULTwoOutPwrConvINT((INT8S *)&dptr[0],tmppwrin);
    613          			Sts->RvsInPwr_LTE_A1[0] = dptr[0];
    614          			Sts->RvsInPwr_LTE_A1[1] = dptr[1];
    615          			
    616          	//		6.GAIN= 출력-입력
    617          			//	5. GAIN= 86-ATT8-ATT9+(20-ATT10)
    618          			Sts->RvsGainSts_LTE_A1 = Gain_LTE_A - CurrRvsAgcAttn_LTE_A1 - Sts->RvsAlcAttn_LTE_A1;
    619          			Sts->RvsGainSts_LTE_A1 = MinMaxAttnCheck(Sts->RvsGainSts_LTE_A1, Gain_LTE_A,RvsMinGain_LTE_A);
    620          		}
    621          		if(Sts->AlmSts.FwdAmpOnOff_LTE_A1	== Disable)		Sts->FwdInPwr_LTE_A1	= NoSignal;
    622          	}
    623          
    624           	// LTE-A2
    625          	{
    626          		Sts->DetPwr.FwdOutAvgPwr_LTE_A2		= ReadPwrTableDnr(Sts->DetVolt.FwdOutAvgVolt_LTE_A2.Data ,Index_FwdOutAvgPwr_LTE_A2,FALSE,&isminval, Sts->FwdOutPwrOffset_LTE_A2); 
    627          		Sts->DetPwr.FwdOutPeakPwr_LTE_A2	= ReadPwrTableDnr(Sts->DetVolt.FwdOutPeakVolt_LTE_A2.Data ,Index_FwdOutAvgPwr_LTE_A2,FALSE,&isminval, Sts->DetOffset.FwdOutPeakPwr_LTE_A2);
    628          		Sts->DetPwr.RvsOutPwr_LTE_A2		= ReadPwrTableDnr(Sts->DetVolt.RvsOutVolt_LTE_A2.Data ,Index_RvsOutPwr_LTE_A2,FALSE,&isminval, Sts->RvsOutPwrOffset_LTE_A2);
    629          
    630          		if(iRepeaterType == _TRIO_M)
    631          		{
    632          			INT8S TempOffset = 0;
    633          
    634          			TempOffset = PwrTableOffset(Sts->DetPwr.FwdOutAvgPwr_LTE_A2,Index_FwdOutAvgPwr_LTE_A2);
    635          			if( Sts->DetPwr.FwdOutAvgPwr_LTE_A2 == 0) TempOffset = 0; ////20121120 Adder
    636          			Sts->DetPwr.FwdOutAvgPwr_LTE_A2 = Sts->DetPwr.FwdOutAvgPwr_LTE_A2 + TempOffset;
    637          			Sts->DetPwr.FwdOutPeakPwr_LTE_A2 = Sts->DetPwr.FwdOutPeakPwr_LTE_A2 + TempOffset;
    638          
    639          
    640          			TempOffset = PwrTableOffset(Sts->DetPwr.RvsOutPwr_LTE_A2,Index_RvsOutPwr_LTE_A2);
    641          			if( Sts->DetPwr.RvsOutPwr_LTE_A2 == LowPwrLmt) TempOffset = 0;////20121120 Adder
    642          			Sts->DetPwr.RvsOutPwr_LTE_A2 = Sts->DetPwr.RvsOutPwr_LTE_A2 + TempOffset;
    643          		}
    644          
    645          	
    646          		{
    647          	//		'4.  출력=LTE-A2#0 Fwd 출력 Avg DET+(20-LTE-A2#0 FWD ATT 2)
    648          			tmppwrout = Sts->DetPwr.FwdOutAvgPwr_LTE_A2;
    649          			TwoOutPwrConv((INT8S *)&dptr[0],tmppwrout);
    650          			Sts->FwdOutPwr_LTE_A2[0] = dptr[0];
    651          			Sts->FwdOutPwr_LTE_A2[1] = dptr[1];
    652          
    653          			tmpx10 = Sts->DetPwr.FwdOutPeakPwr_LTE_A2;
    654          			TwoOutPwrConv((INT8S *)&dptr[0],tmpx10);
    655          			Sts->FwdOutPwrPeak_LTE_A2[0] = dptr[0];
    656          			Sts->FwdOutPwrPeak_LTE_A2[1] = dptr[1];
    657          			
    658          	
    659          	//		5. 입력=LTE-A2#0 Fwd 출력 Avg DET-86+LTE-A1#0&LTE-A2#0 공통부 FWD ATT+LTE-A2#0 FWD ATT 1-(20-LTE-A2#0 FWD ATT 2)
    660          			if( Sts->DetPwr.FwdOutAvgPwr_LTE_A2 == 0)
    661          			{
    662          				Sts->FwdInPwr_LTE_A2 = NoSignal;
    663          			}
    664          			else
    665          			{
    666          				tmppwrin = tmppwrout - Gain_LTE_A + Sts->FwdAttn1_LTE_A + Sts->FwdAttn1_LTE_A2 -(ToggleFwdAttn_LTE_A2 - Sts->FwdAttn2_LTE_A2);
    667          				Sts->FwdInPwr_LTE_A2 = abs(tmppwrin/2)- Sts->FwdInPwrOffset_LTE_A2/2;	
    668          			}
    669          
    670          		//	5. GAIN= 86-ATT8-ATT11+(20-ATT12)
    671          			Sts->FwdGain_LTE_A2 = Gain_LTE_A - Sts->FwdAttn1_LTE_A - Sts->FwdAttn1_LTE_A2 + (ToggleFwdAttn_LTE_A2 - Sts->FwdAttn2_LTE_A2);
    672          			Sts->FwdGain_LTE_A2 = MinMaxAttnCheck(Sts->FwdGain_LTE_A2, Gain_LTE_A,FwdMinGain_LTE_A);
    673          	
    674          	//		'4. 출력=LTE-A2 RVS 출력-LTE-A1#0 AGC ATT2-LTE-A2#0 AGC ATT3
    675          			tmppwrout = Sts->DetPwr.RvsOutPwr_LTE_A2 - CurrRvsAgcAttn_LTE_A2;
    676          			TwoOutPwrConvINT((INT8S *)&dptr[0],tmppwrout);
    677          			Sts->RvsOutPwr_LTE_A2[0] = dptr[0];
    678          			Sts->RvsOutPwr_LTE_A2[1] = dptr[1];
    679          
    680          	//		5. 입력=LTE-A1 RVS 출력-86+LTE-A1#0&LTE-A2#0 RVS ATT  +LTE-A1#0 ALC ATT1
    681          			tmppwrin = Sts->DetPwr.RvsOutPwr_LTE_A2 - Gain_LTE_A + Sts->RvsAlcAttn_LTE_A2;
    682          			ULTwoOutPwrConvINT((INT8S *)&dptr[0],tmppwrin);
    683          			Sts->RvsInPwr_LTE_A2[0] = dptr[0];
    684          			Sts->RvsInPwr_LTE_A2[1] = dptr[1];
    685          			
    686          	//		6.GAIN= 출력-입력
    687          //			Sts->RvsGainSts_LTE_A2 = tmppwrout - tmppwrin;
    688          			Sts->RvsGainSts_LTE_A2 = Gain_LTE_A - CurrRvsAgcAttn_LTE_A2 - Sts->RvsAlcAttn_LTE_A2;
    689          			Sts->RvsGainSts_LTE_A2 = MinMaxAttnCheck(Sts->RvsGainSts_LTE_A2, Gain_LTE_A,RvsMinGain_LTE_A);
    690          		}
    691          		
    692          		if(Sts->AlmSts.FwdAmpOnOff_LTE_A2	== Disable) 	Sts->FwdInPwr_LTE_A2	= NoSignal;
    693          	}
    694          
    695           	// LTE-A1 LTE-A2
    696          	{
    697          		Sts->DetPwr.FwdInPwr_LTE_A			= ReadPwrTableDnr(Sts->DetVolt.FwdInVolt_LTE_A.Data ,Index_FwdInPwr_LTE_A,FALSE,&isminval, Sts->DetOffset.FwdInPwr_LTE_A); 
    698          		Sts->DetPwr.FwdOutAvgPwr_LTE_A		= ReadPwrTableDnr(Sts->DetVolt.FwdOutAvgVolt_LTE_A.Data ,Index_FwdOutAvgPwr_LTE_A,FALSE,&isminval, Sts->DetOffset.FwdOutAvgPwr_LTE_A); 
    699          		Sts->DetPwr.RvsInPwr_LTE_A			= ReadPwrTableDnr(Sts->DetVolt.RvsInVolt_LTE_A.Data ,Index_RvsInPwr_LTE_A,FALSE,&isminval, Sts->DetOffset.RvsInPwr_LTE_A); 
    700          		Sts->DetPwr.RvsOutPwr_LTE_A 		= ReadPwrTableDnr(Sts->DetVolt.RvsOutVolt_LTE_A.Data ,Index_RvsOutPwr_LTE_A,FALSE,&isminval, Sts->DetOffset.RvsOutPwr_LTE_A); 
    701          
    702          	}
    703          	
    704           	// WCDMA
    705          	{
    706          		Sts->DetPwr.FwdInPwr_3G			= ReadPwrTableDnr(Sts->DetVolt.FwdInVolt_3G.Data ,Index_FwdInPwr_3G,FALSE,&isminval, Sts->DetOffset.FwdInPwr_3G); 
    707          		Sts->DetPwr.FwdOutAvgPwr_3G 	= ReadPwrTableDnr(Sts->DetVolt.FwdOutAvgVolt_3G.Data ,Index_FwdOutAvgPwr_3G,FALSE,&isminval, Sts->FwdOutPwrOffset_3G);
    708          		Sts->DetPwr.FwdOutPeakPwr_3G	= ReadPwrTableDnr(Sts->DetVolt.FwdOutPeakVolt_3G.Data ,Index_FwdOutAvgPwr_3G,FALSE,&isminval, Sts->DetOffset.FwdOutPeakPwr_3G); 
    709          		Sts->DetPwr.RvsInPwr_3G 		= ReadPwrTableDnr(Sts->DetVolt.RvsInVolt_3G.Data ,Index_RvsInPwr_3G,FALSE,&isminval, Sts->DetOffset.RvsInPwr_3G); 
    710          		Sts->DetPwr.RvsOutPwr_3G		= ReadPwrTableDnr(Sts->DetVolt.RvsOutVolt_3G.Data ,Index_RvsOutPwr_3G,FALSE,&isminval, Sts->Rvs0OutPwrOffset_3G);
    711          
    712          
    713          		{
    714          			tmppwrout = Sts->DetPwr.FwdOutAvgPwr_3G;
    715          			TwoOutPwrConv((INT8S *)&dptr[0],tmppwrout);
    716          			Sts->FwdOutPwr_3G[0] = dptr[0];
    717          			Sts->FwdOutPwr_3G[1] = dptr[1];
    718          			
    719          			tmpx10 = Sts->DetPwr.FwdOutPeakPwr_3G;
    720          			TwoOutPwrConv((INT8S *)&dptr[0],tmpx10);
    721          			Sts->FwdOutPwrPeak_3G[0] = dptr[0];
    722          			Sts->FwdOutPwrPeak_3G[1] = dptr[1];
    723          
    724          	
    725          	//		5. 입력=DET24-83+ATT18+ATT19
    726          			if( Sts->DetPwr.FwdOutAvgPwr_3G == 0)
    727          			{
    728          				Sts->FwdInPwr_3G = NoSignal;
    729          			}
    730          			else
    731          			{
    732          				tmppwrin = tmppwrout - Gain_3G + Sts->FwdAttn1_3G + Sts->FwdAttn2_3G;
    733          				Sts->FwdInPwr_3G = abs(tmppwrin/2)- Sts->FwdInPwrOffset_3G/2;	
    734          			}
    735          			Sts->FwdGain_3G = Gain_3G - Sts->FwdAttn1_3G - Sts->FwdAttn2_3G;;
    736          			Sts->FwdGain_3G = MinMaxAttnCheck(Sts->FwdGain_3G, Gain_3G,FwdMinGain_3G);
    737          
    738          
    739          	//		출력=WCDMA RVS 출력-WCDMA RVS ATT 3-WCDMA RVS ATT 4
    740          			tmppwrout = Sts->DetPwr.RvsOutPwr_3G;
    741          
    742          			TwoOutPwrConvINT((INT8S *)&dptr[0],tmppwrout);
    743          			Sts->RvsOutPwr_3G[0] = dptr[0];
    744          			Sts->RvsOutPwr_3G[1] = dptr[1];
    745          	
    746          	//		입력=WCDMA RVS 출력+WCDMA RVS ATT 1+WCDMA RVS ATT 2
    747          #if 0
    748          			tmppwrin = Sts->DetPwr.RvsOutPwr_3G - Gain_3G + Sts->RvsAttn1_3G + Sts->RvsAttn2_3G;
    749          #endif
    750          	
    751          			tmppwrin = Sts->DetPwr.RvsOutPwr_3G - Gain_3G + Sts->RvsAttn1_3G + Sts->RvsAttn2_3G
    752          			+ Sts->RvsGainBalance_3G*2;
    753          
    754          
    755          			ULTwoOutPwrConvINT((INT8S *)&dptr[0],tmppwrin);
    756          			Sts->RvsInPwr_3G[0] = dptr[0];
    757          			Sts->RvsInPwr_3G[1] = dptr[1];
    758          	
    759          			Sts->RvsGainSts_3G = Gain_3G - CurrRvsAgcAttn_3G - Sts->RvsAlcAttn_3G;
    760          			Sts->RvsGainSts_3G = MinMaxAttnCheck(Sts->RvsGainSts_3G, Gain_3G,RvsMinGain_3G);
    761          		}
    762          		if(Sts->AlmSts.FwdAmpOnOff_3G == Disable) 	Sts->FwdInPwr_3G		= NoSignal;
    763          	}
    764          
    765          	if(iRepeaterType == _TRIO_MM)
    766          	{
    767          		{
    768          			Sts->Det1Pwr.Fwd1InPwr_LTE			= ReadPwrTableDnr(Sts->Det1Volt.Fwd1InVolt_LTE.Data ,Index_Fwd1InPwr_LTE,FALSE,&isminval, Sts->Det1Offset.Fwd1InPwr_LTE); 
    769          			Sts->Det1Pwr.Fwd1OutAvgPwr_LTE		= ReadPwrTableDnr(Sts->Det1Volt.Fwd1OutAvgVolt_LTE.Data ,Index_Fwd1OutAvgPwr_LTE,FALSE,&isminval, Sts->Fwd1OutPwrOffset_LTE);
    770          			Sts->Det1Pwr.Fwd1OutPeakPwr_LTE 	= ReadPwrTableDnr(Sts->Det1Volt.Fwd1OutPeakVolt_LTE.Data ,Index_Fwd1OutAvgPwr_LTE,FALSE,&isminval, Sts->Det1Offset.Fwd1OutPeakPwr_LTE); 
    771          			Sts->Det1Pwr.Rvs1InPwr_LTE			= ReadPwrTableDnr(Sts->Det1Volt.Rvs1InVolt_LTE.Data ,Index_Rvs1InPwr_LTE,FALSE,&isminval, Sts->Det1Offset.Rvs1InPwr_LTE); 
    772          			Sts->Det1Pwr.Rvs1OutPwr_LTE 		= ReadPwrTableDnr(Sts->Det1Volt.Rvs1OutVolt_LTE.Data ,Index_Rvs1OutPwr_LTE,FALSE,&isminval, Sts->Rvs1OutPwrOffset_LTE);
    773          			{
    774          		//		'4. 출력=LTE#1 Fwd 출력 Avg Det
    775          				tmppwrout = Sts->Det1Pwr.Fwd1OutAvgPwr_LTE;
    776          				TwoOutPwrConv((INT8S *)&dptr[0],tmppwrout);
    777          				Sts->Fwd1OutPwr_LTE[0] = dptr[0];
    778          				Sts->Fwd1OutPwr_LTE[1] = dptr[1];
    779          
    780          				tmpx10 = Sts->Det1Pwr.Fwd1OutPeakPwr_LTE;
    781          				TwoOutPwrConv((INT8S *)&dptr[0],tmpx10);
    782          				Sts->Fwd1OutPwrPeak_LTE[0] = dptr[0];
    783          				Sts->Fwd1OutPwrPeak_LTE[1] = dptr[1];
    784          
    785          		
    786          		//		5. 입력=LTE#1 Fwd 출력 Avg Det-81+LTE#1 FWD ATT1+LTE#1 FWD ATT2
    787          //				if( Sts->Det1Pwr.Fwd1InPwr_LTE == 0)
    788          				if( Sts->Det1Pwr.Fwd1OutAvgPwr_LTE == 0)
    789          				
    790          				{
    791          					Sts->Fwd1InPwr_LTE = NoSignal;
    792          				}
    793          				else
    794          				{
    795          					tmppwrin = tmppwrout - Gain_LTE + Sts->Fwd1Attn1_LTE + Sts->Fwd1Attn2_LTE;
    796          					Sts->Fwd1InPwr_LTE= abs(tmppwrin/2)- Sts->Fwd1InPwrOffset_LTE/2;	
    797          				}
    798          		
    799          		//		GAIN= 출력-입력
    800          				Sts->Fwd1Gain_LTE = Gain_LTE - Sts->Fwd1Attn1_LTE - Sts->Fwd1Attn2_LTE;
    801          				Sts->Fwd1Gain_LTE = MinMaxAttnCheck(Sts->Fwd1Gain_LTE, Gain_LTE,FwdMinGain_LTE);
    802          
    803          		
    804          		//		'4. 출력=LTE#1 RVS 출력 DET-LTE#1 RVS ATT3-LTE#1 RVS ATT4
    805          				tmppwrout = Sts->Det1Pwr.Rvs1OutPwr_LTE;
    806          				TwoOutPwrConvINT((INT8S *)&dptr[0],tmppwrout);
    807          				Sts->Rvs1OutPwr_LTE[0] = dptr[0];
    808          				Sts->Rvs1OutPwr_LTE[1] = dptr[1];
    809          		
    810          		//		5. 입력=LTE#1 RVS 출력 DET-81+LTE#1 RVS ATT1+LTE#1 RVS ATT2
    811          				tmppwrin = Sts->Det1Pwr.Rvs1OutPwr_LTE - Gain_LTE +Sts->Rvs1Attn1_LTE+ Sts->Rvs1Attn2_LTE;
    812          				ULTwoOutPwrConvINT((INT8S *)&dptr[0],tmppwrin);
    813          				Sts->Rvs1InPwr_LTE[0] = dptr[0];
    814          				Sts->Rvs1InPwr_LTE[1] = dptr[1];
    815          		
    816          		//		GAIN = 출력-입력
    817          				Sts->Rvs1GainSts_LTE = Gain_LTE - CurrRvsAgcAttn_LTE_1 - Sts->Rvs1AlcAttn_LTE;
    818          
    819          				Sts->Rvs1GainSts_LTE = MinMaxAttnCheck(Sts->Rvs1GainSts_LTE, Gain_LTE,RvsMinGain_LTE);
    820          			}
    821          			if(Sts->AlmSts.FwdAmp1OnOff_LTE	== Disable) 	Sts->Fwd1InPwr_LTE		= NoSignal;
    822          		}
    823          
    824          		 // LTE-A1 #1
    825          		if(AlarmCheck_LTE_A1_1 == SET)
    826          		{
    827          			Sts->Det1Pwr.Fwd1OutAvgPwr_LTE_A1	= ReadPwrTableDnr(Sts->Det1Volt.Fwd1OutAvgVolt_LTE_A1.Data ,Index_Fwd1OutAvgPwr_LTE_A1,FALSE,&isminval, Sts->Fwd1OutPwrOffset_LTE_A1);
    828          			Sts->Det1Pwr.Fwd1OutPeakPwr_LTE_A1	= ReadPwrTableDnr(Sts->Det1Volt.Fwd1OutPeakVolt_LTE_A1.Data ,Index_Fwd1OutAvgPwr_LTE_A1,FALSE,&isminval, Sts->Det1Offset.Fwd1OutPeakPwr_LTE_A1); 
    829          			Sts->Det1Pwr.Rvs1OutPwr_LTE_A1		= ReadPwrTableDnr(Sts->Det1Volt.Rvs1OutVolt_LTE_A1.Data ,Index_Rvs1OutPwr_LTE_A1,FALSE,&isminval, Sts->Rvs1OutPwrOffset_LTE_A1);
    830          			{
    831          		//		'4.  출력=LTE-A1#0 Fwd 출력 Avg DET+(20-LTE-A1#0 FWD ATT 2)
    832          				tmppwrout = Sts->Det1Pwr.Fwd1OutAvgPwr_LTE_A1;
    833          				TwoOutPwrConv((INT8S *)&dptr[0],tmppwrout);
    834          				Sts->Fwd1OutPwr_LTE_A1[0] = dptr[0];
    835          				Sts->Fwd1OutPwr_LTE_A1[1] = dptr[1];
    836          
    837          				tmpx10 = Sts->Det1Pwr.Fwd1OutPeakPwr_LTE_A1;
    838          				TwoOutPwrConv((INT8S *)&dptr[0],tmpx10);
    839          				Sts->Fwd1OutPwrPeak_LTE_A1[0] = dptr[0];
    840          				Sts->Fwd1OutPwrPeak_LTE_A1[1] = dptr[1];
    841          
    842          
    843          		
    844          		//		5. 입력=LTE-A1#0 Fwd 출력 Avg DET-86+LTE-A1#0&LTE-A2#0 공통부 FWD ATT+LTE-A1#0 FWD ATT 1-(20-LTE-A1#0 FWD ATT 2)
    845          
    846          				if( Sts->Det1Pwr.Fwd1OutAvgPwr_LTE_A1 == 0)
    847          				{
    848          					Sts->Fwd1InPwr_LTE_A1 = NoSignal;
    849          				}
    850          				else
    851          				{
    852          					tmppwrin = tmppwrout - Gain_LTE_A + Sts->Fwd1Attn1_LTE_A + Sts->Fwd1Attn1_LTE_A1 -(ToggleFwdAttn_LTE_A1_1 - Sts->Fwd1Attn2_LTE_A1);
    853          					Sts->Fwd1InPwr_LTE_A1 = abs(tmppwrin/2)- Sts->Fwd1InPwrOffset_LTE_A1/2; 
    854          				}
    855          
    856          		
    857          		//		GAIN = 출력-입력
    858          				Sts->Fwd1Gain_LTE_A1 = Gain_LTE_A - Sts->Fwd1Attn1_LTE_A - Sts->Fwd1Attn1_LTE_A1 + (ToggleFwdAttn_LTE_A1_1- Sts->Fwd1Attn2_LTE_A1);
    859          				Sts->Fwd1Gain_LTE_A1 = MinMaxAttnCheck(Sts->Fwd1Gain_LTE_A1, Gain_LTE_A,FwdMinGain_LTE_A);
    860          		
    861          		//		'4. 출력=LTE-A1 RVS 출력-LTE-A1#0 AGC ATT2-LTE-A1#0 AGC ATT3
    862          				tmppwrout = Sts->Det1Pwr.Rvs1OutPwr_LTE_A1 - CurrRvsAgcAttn_LTE_A1_1;
    863          				TwoOutPwrConvINT((INT8S *)&dptr[0],tmppwrout);
    864          				Sts->Rvs1OutPwr_LTE_A1[0] = dptr[0];
    865          				Sts->Rvs1OutPwr_LTE_A1[1] = dptr[1];
    866          		
    867          		//		5. 입력=LTE-A1 RVS 출력-86+LTE-A1#0&LTE-A2#0 RVS ATT  +LTE-A1#0 ALC ATT1
    868          				tmppwrin = Sts->Det1Pwr.Rvs1OutPwr_LTE_A1 - Gain_LTE_A + Sts->RvsAlcAttn_LTE_A1;
    869          				ULTwoOutPwrConvINT((INT8S *)&dptr[0],tmppwrin);
    870          				Sts->Rvs1InPwr_LTE_A1[0] = dptr[0];
    871          				Sts->Rvs1InPwr_LTE_A1[1] = dptr[1];
    872          				
    873          		/// 	6.GAIN=81-LTE RVS ATT 2-LTE RVS ATT 3-CDMA&LTE#0 공통부 RVS ATT - LTE RVS ATT 1
    874          				Sts->Rvs1GainSts_LTE_A1 = Gain_LTE_A - CurrRvsAgcAttn_LTE_A1_1 - Sts->Rvs1AlcAttn_LTE_A1;
    875          
    876          				Sts->Rvs1GainSts_LTE_A1 = MinMaxAttnCheck(Sts->Rvs1GainSts_LTE_A1, Gain_LTE_A,RvsMinGain_LTE_A);
    877          			}
    878          			if(Sts->AlmSts.FwdAmp1OnOff_LTE_A1	== Disable)		Sts->Fwd1InPwr_LTE_A1	= NoSignal;
    879          		}
    880          
    881          		// LTE-A2 #1
    882          		{
    883          			Sts->Det1Pwr.Fwd1OutAvgPwr_LTE_A2	= ReadPwrTableDnr(Sts->Det1Volt.Fwd1OutAvgVolt_LTE_A2.Data ,Index_Fwd1OutAvgPwr_LTE_A2,FALSE,&isminval, Sts->Fwd1OutPwrOffset_LTE_A2);
    884          			Sts->Det1Pwr.Fwd1OutPeakPwr_LTE_A2	= ReadPwrTableDnr(Sts->Det1Volt.Fwd1OutPeakVolt_LTE_A2.Data ,Index_Fwd1OutAvgPwr_LTE_A2,FALSE,&isminval, Sts->Det1Offset.Fwd1OutPeakPwr_LTE_A2); 
    885          			Sts->Det1Pwr.Rvs1OutPwr_LTE_A2		= ReadPwrTableDnr(Sts->Det1Volt.Rvs1OutVolt_LTE_A2.Data ,Index_Rvs1OutPwr_LTE_A2,FALSE,&isminval, Sts->Rvs1OutPwrOffset_LTE_A2);
    886          
    887          			{
    888          		//		'4.  출력=LTE-A2#0 Fwd 출력 Avg DET+(20-LTE-A2#0 FWD ATT 2)
    889          				tmppwrout = Sts->Det1Pwr.Fwd1OutAvgPwr_LTE_A2;
    890          
    891          				TwoOutPwrConv((INT8S *)&dptr[0],tmppwrout);
    892          				Sts->Fwd1OutPwr_LTE_A2[0] = dptr[0];
    893          				Sts->Fwd1OutPwr_LTE_A2[1] = dptr[1];
    894          
    895          				tmpx10 = Sts->Det1Pwr.Fwd1OutPeakPwr_LTE_A2;
    896          				TwoOutPwrConv((INT8S *)&dptr[0],tmpx10);
    897          				Sts->Fwd1OutPwrPeak_LTE_A2[0] = dptr[0];
    898          				Sts->Fwd1OutPwrPeak_LTE_A2[1] = dptr[1];
    899          
    900          		
    901          		//		5. 입력=LTE-A2#0 Fwd 출력 Avg DET-86+LTE-A1#0&LTE-A2#0 공통부 FWD ATT+LTE-A2#0 FWD ATT 1-(20-LTE-A2#0 FWD ATT 2)
    902          				if( Sts->Det1Pwr.Fwd1OutAvgPwr_LTE_A2 == 0)
    903          				{
    904          					Sts->Fwd1InPwr_LTE_A2 = NoSignal;
    905          				}
    906          				else
    907          				{
    908          
    909          					tmppwrin = tmppwrout - Gain_LTE_A + Sts->Fwd1Attn1_LTE_A + Sts->Fwd1Attn1_LTE_A2 -(ToggleFwdAttn_LTE_A2_1 - Sts->Fwd1Attn2_LTE_A1);
    910          					Sts->Fwd1InPwr_LTE_A2 = abs(tmppwrin/2)- Sts->Fwd1InPwrOffset_LTE_A2/2;  
    911          				}
    912          
    913          		
    914          		//		GAIN = 출력-입력
    915          				Sts->Fwd1Gain_LTE_A2 = Gain_LTE_A - Sts->Fwd1Attn1_LTE_A - Sts->Fwd1Attn1_LTE_A2 + (ToggleFwdAttn_LTE_A2_1- Sts->Fwd1Attn2_LTE_A2);
    916          		
    917          				Sts->Fwd1Gain_LTE_A2 = MinMaxAttnCheck(Sts->Fwd1Gain_LTE_A2, Gain_LTE_A,FwdMinGain_LTE_A);
    918          		
    919          		//		'4. 출력=LTE-A2 RVS 출력-LTE-A1#0 AGC ATT2-LTE-A2#0 AGC ATT3
    920          				tmppwrout = Sts->Det1Pwr.Rvs1OutPwr_LTE_A2 - CurrRvsAgcAttn_LTE_A2_1;
    921          				TwoOutPwrConvINT((INT8S *)&dptr[0],tmppwrout);
    922          				Sts->Rvs1OutPwr_LTE_A2[0] = dptr[0];
    923          				Sts->Rvs1OutPwr_LTE_A2[1] = dptr[1];
    924          		
    925          		//		5. 입력=LTE-A1 RVS 출력-86+LTE-A1#0&LTE-A2#0 RVS ATT  +LTE-A1#0 ALC ATT1
    926          				tmppwrin = Sts->Det1Pwr.Rvs1OutPwr_LTE_A2 - Gain_LTE_A + Sts->RvsAlcAttn_LTE_A2;
    927          				ULTwoOutPwrConvINT((INT8S *)&dptr[0],tmppwrin);
    928          				Sts->Rvs1InPwr_LTE_A2[0] = dptr[0];
    929          				Sts->Rvs1InPwr_LTE_A2[1] = dptr[1];
    930          				
    931          		//		6.GAIN= 출력-입력
    932          				Sts->Rvs1GainSts_LTE_A2 = Gain_LTE_A - CurrRvsAgcAttn_LTE_A2_1- Sts->Rvs1AlcAttn_LTE_A2;
    933          
    934          				Sts->Rvs1GainSts_LTE_A2 = MinMaxAttnCheck(Sts->Rvs1GainSts_LTE_A2, Gain_LTE_A,RvsMinGain_LTE_A);
    935          			}
    936          			if(Sts->AlmSts.FwdAmp1OnOff_LTE_A2 == Disable) 	Sts->Fwd1InPwr_LTE_A2	= NoSignal;
    937          		}
    938          		// LTE-A1 LTE-A2 #2
    939          		{
    940          			Sts->Det1Pwr.FwdInPwr_LTE_A_1		= ReadPwrTableDnr(Sts->Det1Volt.FwdInVolt_LTE_A_1.Data ,Index_FwdInPwr_LTE_A_1,FALSE,&isminval, Sts->Det1Offset.FwdInPwr_LTE_A_1); 
    941          			Sts->Det1Pwr.FwdOutAvgPwr_LTE_A_1	= ReadPwrTableDnr(Sts->Det1Volt.FwdOutAvgVolt_LTE_A_1.Data ,Index_FwdOutAvgPwr_LTE_A_1,FALSE,&isminval, Sts->Det1Offset.FwdOutAvgPwr_LTE_A_1); 
    942          			Sts->Det1Pwr.RvsInPwr_LTE_A_1		= ReadPwrTableDnr(Sts->Det1Volt.RvsInVolt_LTE_A_1.Data ,Index_RvsInPwr_LTE_A_1,FALSE,&isminval, Sts->Det1Offset.RvsInPwr_LTE_A_1); 
    943          			Sts->Det1Pwr.RvsOutPwr_LTE_A_1		= ReadPwrTableDnr(Sts->Det1Volt.RvsOutVolt_LTE_A_1.Data ,Index_RvsOutPwr_LTE_A_1,FALSE,&isminval, Sts->Det1Offset.RvsOutPwr_LTE_A_1); 
    944          		}
    945          	}
    946          	
    947           	if(!Sts->TPTL_OnOff)
    948          	{
    949          		INT8S tindex = 0;
    950          		// Hysterisys !!
    951          			 if(Sts->CurrentTemp >= tempIndexHys)		tempIndexHys = Sts->CurrentTemp;
    952          		else if(Sts->CurrentTemp < (tempIndexHys - 1))	tempIndexHys = Sts->CurrentTemp;
    953          
    954          		tindex = TemptoIndex(tempIndexHys);
    955          		Sts->FwdTemp_2G 	= vSYS_TABLE->AttnTempTbl[Local_FwdTempAttn_2G].Data[tindex];
    956          		Sts->RvsTemp_2G 	= vSYS_TABLE->AttnTempTbl[Local_RvsTempAttn_2G].Data[tindex];
    957          
    958          		Sts->FwdTemp_3G 	= vSYS_TABLE->AttnTempTbl[Local_FwdTempAttn_3G].Data[tindex];
    959          		Sts->RvsTemp_3G 	= vSYS_TABLE->AttnTempTbl[Local_RvsTempAttn_3G].Data[tindex];
    960          
    961          		Sts->FwdTemp_LTE	= vSYS_TABLE->AttnTempTbl[Local_FwdTempAttn_LTE].Data[tindex];
    962          		Sts->RvsTemp_LTE	= vSYS_TABLE->AttnTempTbl[Local_RvsTempAttn_LTE].Data[tindex];
    963          		
    964          		Sts->FwdTemp_LTE_A1 = vSYS_TABLE->AttnTempTbl[Local_FwdTempAttn_LTE_A1].Data[tindex];
    965          		Sts->RvsTemp_LTE_A1 = vSYS_TABLE->AttnTempTbl[Local_RvsTempAttn_LTE_A1].Data[tindex];
    966          		Sts->FwdTemp_LTE_A2 = vSYS_TABLE->AttnTempTbl[Local_FwdTempAttn_LTE_A2].Data[tindex];
    967          		Sts->RvsTemp_LTE_A2 = vSYS_TABLE->AttnTempTbl[Local_RvsTempAttn_LTE_A2].Data[tindex];
    968          		
    969          		Sts->Fwd1Temp_LTE	= vSYS_TABLE->AttnTempTbl[Local_Fwd1TempAttn_LTE].Data[tindex];
    970          		Sts->Rvs1Temp_LTE	= vSYS_TABLE->AttnTempTbl[Local_Rvs1TempAttn_LTE].Data[tindex];
    971          		Sts->Fwd1Temp_LTE_A1 = vSYS_TABLE->AttnTempTbl[Local_Fwd1TempAttn_LTE_A1].Data[tindex];
    972          		Sts->Rvs1Temp_LTE_A1 = vSYS_TABLE->AttnTempTbl[Local_Rvs1TempAttn_LTE_A1].Data[tindex];
    973          		Sts->Fwd1Temp_LTE_A2 = vSYS_TABLE->AttnTempTbl[Local_Fwd1TempAttn_LTE_A2].Data[tindex];
    974          		Sts->Rvs1Temp_LTE_A2 = vSYS_TABLE->AttnTempTbl[Local_Rvs1TempAttn_LTE_A2].Data[tindex];
    975          	}
    976          	else
    977          	{
    978          		Sts->FwdTemp_2G 		= 0;
    979          		Sts->RvsTemp_2G  		= 0;
    980          		Sts->FwdTemp_3G  		= 0;
    981          		Sts->RvsTemp_3G 		= 0;
    982          		Sts->FwdTemp_LTE 		= 0;
    983          		Sts->RvsTemp_LTE 		= 0;
    984          		Sts->FwdTemp_LTE_A1		= 0;
    985          		Sts->RvsTemp_LTE_A1 	= 0;
    986          		Sts->FwdTemp_LTE_A2		= 0;
    987          		Sts->RvsTemp_LTE_A2 	= 0;
    988          		Sts->Fwd1Temp_LTE 		= 0;
    989          		Sts->Rvs1Temp_LTE 		= 0;
    990          		Sts->Fwd1Temp_LTE_A1	= 0;
    991          		Sts->Rvs1Temp_LTE_A1 	= 0;
    992          		Sts->Fwd1Temp_LTE_A2	= 0;
    993          		Sts->Rvs1Temp_LTE_A2 	= 0;
    994          	}
    995          }
    996          
    997          
    998          
    999          INT8S PwrTableOffset(INT8S Temp,INT8U tIndex)
   1000          {
   1001          	INT8S DectVal = 0;
   1002          
   1003          	__Dnr_Sts *Sts = tDnrSts;
   1004          ////////////////////////////////////////////////
   1005           	if(!Sts->TPTL_OnOff)
   1006          	{
   1007          		INT8S tindex = 0;
   1008          		// Hysterisys !!
   1009          			 if(Sts->CurrentTemp >= tempIndexHys)		tempIndexHys = Sts->CurrentTemp;
   1010          		else if(Sts->CurrentTemp < (tempIndexHys - 1))	tempIndexHys = Sts->CurrentTemp;
   1011          
   1012          		tindex = TemptoIndex(tempIndexHys);
   1013          
   1014          		if(tIndex == Index_FwdOutAvgPwr_LTE_A1)
   1015          		{
   1016          			DectVal = FwdOutPwrTemp_LTE_A1[tindex];
   1017          		}
   1018          		else if(tIndex == Index_RvsOutPwr_LTE_A1)
   1019          		{
   1020          			DectVal = RvsOutPwrTemp_LTE_A1[tindex];
   1021          
   1022          		}
   1023          		else if(tIndex == Index_FwdOutAvgPwr_LTE_A2)
   1024          		{
   1025          			DectVal = FwdOutPwrTemp_LTE_A2[tindex];
   1026          
   1027          		}
   1028          		else if(tIndex == Index_RvsOutPwr_LTE_A2)
   1029          		{
   1030          			DectVal = RvsOutPwrTemp_LTE_A2[tindex];
   1031          		}
   1032          	}
   1033          	else
   1034          	{
   1035          		DectVal 		= 0;
   1036          	}
   1037          	
   1038          	return (DectVal);
   1039          }
   1040          
   1041          
   1042          
   1043          INT16S ReadPwrTableDnr(INT32U AdcValue, INT8U TblID, INT8U roundingoff, INT8U *isminval, INT16S Offset)
   1044          {
   1045          	INT8S tIndex = 0;
   1046          	INT8S tLocation = 0;
   1047          	INT8S tPwrLocation = 0;
   1048          
   1049          	tIndex = TableIndex(TblID);
   1050          	tLocation = TableLocation(TblID);
   1051          	tPwrLocation = PwrTableLocation(TblID);
   1052          
   1053          	if(tLocation == _DnrPwr0_Location)
   1054          	{
   1055          		return (Dnr0_ReadPwrTable(AdcValue, tIndex, roundingoff, isminval,Offset,tPwrLocation));
   1056          	}
   1057          	else if(tLocation == _DnrPwr1_Location)
   1058          	{
   1059          		return (Dnr1_ReadPwrTable(AdcValue, tIndex, roundingoff, isminval,Offset,tPwrLocation));
   1060          	}
   1061          	else if(tLocation == _SvrPwr0_Location)
   1062          	{
   1063          		return (Svr0_ReadPwrTable(AdcValue, tIndex, roundingoff, isminval,Offset,tPwrLocation));
   1064          	}
   1065          	else
   1066          	{
   1067          		return (Svr1_ReadPwrTable(AdcValue, tIndex, roundingoff, isminval,Offset,tPwrLocation));
   1068          	}
   1069          }
   1070          
   1071          
   1072          INT16S Dnr0_ReadPwrTable(INT32U AdcValue, INT8U tIndex, INT8U roundingoff, INT8U *isminval, INT16S Offset, INT16S tPwrLocation)
   1073          {
   1074          	*isminval = FALSE;
   1075          
   1076          	INT8U __1dBStep = TRUE;
   1077          	INT16S CurrPwr;
   1078          
   1079          	{
   1080          		INT32S i = 0;
   1081          		INT32S j = 0;
   1082          
   1083          		__Dnr0OutputTblStr *table =(__Dnr0OutputTblStr *)&vEE_TABLE1->Dnr0OutputTbl[tIndex];
   1084          
   1085          		INT16U *dptr = table->Data;
   1086          		INT32S limit = table->limit;
   1087          		INT32S nsize = table->nsize;
   1088          		INT32S rvalx10 = (limit/2)*10L;
   1089          
   1090          
   1091          		for(i = 0; i < nsize && i < Dnr0OutputTBL_Size; i++)
   1092          		{
   1093          			if(AdcValue >= dptr[i]) break;
   1094          		}
   1095          
   1096          		if(i == nsize || i == Dnr0OutputTBL_Size)
   1097          		{
   1098          			if(nsize != 0) i--;
   1099          			*isminval = TRUE;
   1100          		}
   1101          
   1102          		if(__1dBStep)
   1103          		{
   1104          			rvalx10 = rvalx10 - (i*10L);
   1105          		}
   1106          		else
   1107          		{
   1108          			rvalx10 = rvalx10 - (i*5L);
   1109          		}
   1110          
   1111          		if(i != 0 && *isminval == FALSE && __1dBStep == TRUE )
   1112          		{
   1113          			INT32U stepx10 = ((dptr[i-1] - dptr[i])*10L)/10L;
   1114          			INT32U tmp;
   1115          			
   1116          			for(j = 0; j < 10; j++)
   1117          			{
   1118          				tmp = (dptr[i]*10 + j*stepx10);
   1119          				if(tmp >= (AdcValue*10L)) break;			
   1120          			}		
   1121          			if(roundingoff == TRUE)// 반올림..
   1122          			{
   1123          				     if(j >= 8)  j = 10;
   1124          				else if(j >= 3)  j = 5;
   1125          				else			 j = 0;
   1126          			}		
   1127          		}
   1128          		
   1129          		CurrPwr = (rvalx10 + j)*2L;
   1130          
   1131          		if( tPwrLocation == _FwdOutPwr_Location)		
   1132          		{
   1133          			if(!*isminval)
   1134          			{
   1135          				CurrPwr = CurrPwr/10L +  Offset;
   1136          			}
   1137          			else
   1138          			{
   1139          				CurrPwr =  LowOutPwrLmt;  // LowPwrLmt;
   1140          			}
   1141          		}
   1142          		else if( tPwrLocation == _FwdInPwr_Location)
   1143          		{
   1144          			if(!*isminval)
   1145          			{
   1146          				CurrPwr = CurrPwr/10L +  Offset;
   1147          				CurrPwr = abs(CurrPwr/2);
   1148          			}
   1149          			else
   1150          			{
   1151          				CurrPwr =  NoSignal;
   1152          			}
   1153          		}
   1154          		else if( tPwrLocation == _RvsOutPwr_Location)		
   1155          		{
   1156          			if(!*isminval)
   1157          			{
   1158          				CurrPwr = CurrPwr/10L +  Offset;
   1159          			}
   1160          			else
   1161          			{
   1162          				CurrPwr =  LowPwrLmt;
   1163          			}
   1164          		}
   1165          		else if( tPwrLocation == _RvsInPwr_Location)		
   1166          		{
   1167          			if(!*isminval)
   1168          			{
   1169          				CurrPwr = CurrPwr/10L +  Offset;
   1170          				CurrPwr = abs(CurrPwr/2);
   1171          			}
   1172          			else
   1173          			{
   1174          				CurrPwr =  NoSignal;
   1175          			}
   1176          		}
   1177          
   1178          		return CurrPwr;
   1179          	}
   1180          }
   1181          
   1182          INT16S Dnr1_ReadPwrTable(INT32U AdcValue, INT8U tIndex, INT8U roundingoff, INT8U *isminval, INT16S Offset, INT16S tPwrLocation)
   1183          {
   1184          	*isminval = FALSE;
   1185          
   1186          	INT8U __1dBStep = TRUE;
   1187          	INT16S CurrPwr;
   1188          
   1189          	{
   1190          		INT32S i = 0;
   1191          		INT32S j = 0;
   1192          
   1193          		__Dnr1OutputTblStr *table =(__Dnr1OutputTblStr *)&vEE_TABLE1->Dnr1OutputTbl[tIndex];
   1194          
   1195          		INT16U *dptr = table->Data;
   1196          		INT32S limit = table->limit;
   1197          		INT32S nsize = table->nsize;
   1198          		INT32S rvalx10 = (limit/2)*10L;
   1199          
   1200          		for(i = 0; i < nsize && i < Dnr1OutputTBL_Size; i++)
   1201          		{
   1202          			if(AdcValue >= dptr[i]) break;
   1203          		}
   1204          
   1205          		if(i == nsize || i == Dnr1OutputTBL_Size)
   1206          		{
   1207          			if(nsize != 0) i--;
   1208          			*isminval = TRUE;
   1209          		}
   1210          
   1211          		if(__1dBStep)
   1212          		{
   1213          			rvalx10 = rvalx10 - (i*10L);
   1214          		}
   1215          		else
   1216          		{
   1217          			rvalx10 = rvalx10 - (i*5L);
   1218          		}
   1219          
   1220          		if(i != 0 && *isminval == FALSE && __1dBStep == TRUE )
   1221          		{
   1222          			INT32U stepx10 = ((dptr[i-1] - dptr[i])*10L)/10L;
   1223          			INT32U tmp;
   1224          			
   1225          			for(j = 0; j < 10; j++)
   1226          			{
   1227          				tmp = (dptr[i]*10 + j*stepx10);
   1228          				if(tmp >= (AdcValue*10L)) break;			
   1229          			}		
   1230          			if(roundingoff == TRUE)// 반올림..
   1231          			{
   1232          					 if(j >= 8)  j = 10;
   1233          				else if(j >= 3)  j = 5;
   1234          				else			 j = 0;
   1235          			}		
   1236          		}
   1237          		
   1238          		CurrPwr = (rvalx10 + j)*2L;
   1239          
   1240          		if( tPwrLocation == _FwdOutPwr_Location)		
   1241          		{
   1242          			if(!*isminval)
   1243          			{
   1244          				CurrPwr = CurrPwr/10L +  Offset;
   1245          			}
   1246          			else
   1247          			{
   1248          				CurrPwr =  LowOutPwrLmt;  // LowPwrLmt;
   1249          			}
   1250          		}
   1251          		else if( tPwrLocation == _FwdInPwr_Location)
   1252          		{
   1253          			if(!*isminval)
   1254          			{
   1255          				CurrPwr = CurrPwr/10L +  Offset;
   1256          				CurrPwr = abs(CurrPwr/2);
   1257          			}
   1258          			else
   1259          			{
   1260          				CurrPwr =  NoSignal;
   1261          			}
   1262          		}
   1263          		else if( tPwrLocation == _RvsOutPwr_Location)		
   1264          		{
   1265          			if(!*isminval)
   1266          			{
   1267          				CurrPwr = CurrPwr/10L +  Offset;
   1268          			}
   1269          			else
   1270          			{
   1271          				CurrPwr =  LowPwrLmt;
   1272          			}
   1273          		}
   1274          		else if( tPwrLocation == _RvsInPwr_Location)		
   1275          		{
   1276          			if(!*isminval)
   1277          			{
   1278          				CurrPwr = CurrPwr/10L +  Offset;
   1279          				CurrPwr = abs(CurrPwr/2);
   1280          			}
   1281          			else
   1282          			{
   1283          				CurrPwr =  NoSignal;
   1284          			}
   1285          		}
   1286          
   1287          		return CurrPwr;
   1288          	}
   1289          }
   1290          
   1291          INT16S Svr0_ReadPwrTable(INT32U AdcValue, INT8U tIndex, INT8U roundingoff, INT8U *isminval, INT16S Offset, INT16S tPwrLocation)
   1292          {
   1293          
   1294          	*isminval = FALSE;
   1295          
   1296          	INT8U __1dBStep = TRUE;
   1297          	INT16S CurrPwr;
   1298          
   1299          	{
   1300          	    INT32S i = 0;
   1301                  INT32S j = 0;
   1302          		
   1303          		__Svr0OutputTblStr *table =(__Svr0OutputTblStr *)&vEE_TABLE->Svr0OutputTbl[tIndex];
   1304          
   1305          		INT16U *dptr = table->Data;
   1306          		INT32S limit = table->limit;
   1307          		INT32S nsize = table->nsize;
   1308          		INT32S rvalx10 = (limit/2)*10L;
   1309          
   1310          
   1311          
   1312          		for(i = 0; i < nsize && i < Svr0OutputTBL_Size; i++)
   1313          		{
   1314          			if(AdcValue >= dptr[i]) break;
   1315          		}
   1316          
   1317          		if(i == nsize || i == Svr0OutputTBL_Size)
   1318          		{
   1319          			if(nsize != 0) i--;
   1320          			*isminval = TRUE;
   1321          		}
   1322          
   1323          		if(__1dBStep)
   1324          		{
   1325          			rvalx10 = rvalx10 - (i*10L);
   1326          		}
   1327          		else
   1328          		{
   1329          			rvalx10 = rvalx10 - (i*5L);
   1330          		}
   1331          
   1332          		if(i != 0 && *isminval == FALSE && __1dBStep == TRUE )
   1333          		{
   1334          			INT32U stepx10 = ((dptr[i-1] - dptr[i])*10L)/10L;
   1335          			INT32U tmp;
   1336          			
   1337          			for(j = 0; j < 10; j++)
   1338          			{
   1339          				tmp = (dptr[i]*10 + j*stepx10);
   1340          				if(tmp >= (AdcValue*10L)) break;			
   1341          			}		
   1342          			if(roundingoff == TRUE)// 반올림..
   1343          			{
   1344          				     if(j >= 8)  j = 10;
   1345          				else if(j >= 3)  j = 5;
   1346          				else			 j = 0;
   1347          			}		
   1348          		}
   1349          		
   1350          		CurrPwr = (rvalx10 + j)*2L;
   1351          
   1352          		if( tPwrLocation == _FwdOutPwr_Location)		
   1353          		{
   1354          			if(!*isminval)
   1355          			{
   1356          				CurrPwr = CurrPwr/10L +  Offset;
   1357          			}
   1358          			else
   1359          			{
   1360          				CurrPwr =  LowOutPwrLmt;  // LowPwrLmt;
   1361          			}
   1362          		}
   1363          		else if( tPwrLocation == _FwdInPwr_Location)
   1364          		{
   1365          			if(!*isminval)
   1366          			{
   1367          				CurrPwr = CurrPwr/10L +  Offset;
   1368          				CurrPwr = abs(CurrPwr/2);
   1369          			}
   1370          			else
   1371          			{
   1372          				CurrPwr =  NoSignal;
   1373          			}
   1374          		}
   1375          		else if( tPwrLocation == _RvsOutPwr_Location)		
   1376          		{
   1377          			if(!*isminval)
   1378          			{
   1379          				CurrPwr = CurrPwr/10L +  Offset;
   1380          			}
   1381          			else
   1382          			{
   1383          				CurrPwr =  LowPwrLmt;
   1384          			}
   1385          		}
   1386          		else if( tPwrLocation == _RvsInPwr_Location)		
   1387          		{
   1388          			if(!*isminval)
   1389          			{
   1390          				CurrPwr = CurrPwr/10L +  Offset;
   1391          				CurrPwr = abs(CurrPwr/2);
   1392          			}
   1393          			else
   1394          			{
   1395          				CurrPwr =  NoSignal;
   1396          			}
   1397          		}
   1398          
   1399          
   1400          		return CurrPwr;
   1401          	}
   1402          }
   1403          
   1404          INT16S Svr1_ReadPwrTable(INT32U AdcValue, INT8U tIndex, INT8U roundingoff, INT8U *isminval, INT16S Offset, INT16S tPwrLocation)
   1405          {
   1406          	*isminval = FALSE;
   1407          
   1408          //	INT8U __1dBStep = FALSE;
   1409          	INT8U __1dBStep = TRUE;
   1410          	INT16S CurrPwr;
   1411          
   1412          	{
   1413          		INT32S i = 0;
   1414          		INT32S j = 0;
   1415          		
   1416          		__Svr1OutputTblStr *table =(__Svr1OutputTblStr *)&vEE_TABLE->Svr1OutputTbl[tIndex];
   1417          
   1418          		INT16U *dptr = table->Data;
   1419          		INT32S limit = table->limit;
   1420          		INT32S nsize = table->nsize;
   1421          		INT32S rvalx10 = (limit/2)*10L;
   1422          
   1423          
   1424          		for(i = 0; i < nsize && i < Svr1OutputTBL_Size; i++)
   1425          		{
   1426          			if(AdcValue >= dptr[i]) break;
   1427          		}
   1428          
   1429          		if(i == nsize || i == Svr1OutputTBL_Size)
   1430          		{
   1431          			if(nsize != 0) i--;
   1432          			*isminval = TRUE;
   1433          		}
   1434          
   1435          		if(__1dBStep)
   1436          		{
   1437          			rvalx10 = rvalx10 - (i*10L);
   1438          		}
   1439          		else
   1440          		{
   1441          			rvalx10 = rvalx10 - (i*5L);
   1442          		}
   1443          
   1444          		if(i != 0 && *isminval == FALSE && __1dBStep == TRUE )
   1445          		{
   1446          			INT32U stepx10 = ((dptr[i-1] - dptr[i])*10L)/10L;
   1447          			INT32U tmp;
   1448          			
   1449          			for(j = 0; j < 10; j++)
   1450          			{
   1451          				tmp = (dptr[i]*10 + j*stepx10);
   1452          				if(tmp >= (AdcValue*10L)) break;			
   1453          			}		
   1454          			if(roundingoff == TRUE)// 반올림..
   1455          			{
   1456          					 if(j >= 8)  j = 10;
   1457          				else if(j >= 3)  j = 5;
   1458          				else			 j = 0;
   1459          			}		
   1460          		}
   1461          		
   1462          		CurrPwr = (rvalx10 + j)*2L;
   1463          
   1464          		if( tPwrLocation == _FwdOutPwr_Location)		
   1465          		{
   1466          			if(!*isminval)
   1467          			{
   1468          				CurrPwr = CurrPwr/10L +  Offset;
   1469          			}
   1470          			else
   1471          			{
   1472          				CurrPwr =  LowOutPwrLmt;  // LowPwrLmt;
   1473          			}
   1474          		}
   1475          		else if( tPwrLocation == _FwdInPwr_Location)
   1476          		{
   1477          			if(!*isminval)
   1478          			{
   1479          				CurrPwr = CurrPwr/10L +  Offset;
   1480          				CurrPwr = abs(CurrPwr/2);
   1481          			}
   1482          			else
   1483          			{
   1484          				CurrPwr =  NoSignal;
   1485          			}
   1486          		}
   1487          		else if( tPwrLocation == _RvsOutPwr_Location)		
   1488          		{
   1489          			if(!*isminval)
   1490          			{
   1491          				CurrPwr = CurrPwr/10L +  Offset;
   1492          			}
   1493          			else
   1494          			{
   1495          				CurrPwr =  LowPwrLmt;
   1496          			}
   1497          		}
   1498          		else if( tPwrLocation == _RvsInPwr_Location)		
   1499          		{
   1500          			if(!*isminval)
   1501          			{
   1502          				CurrPwr = CurrPwr/10L +  Offset;
   1503          				CurrPwr = abs(CurrPwr/2);
   1504          			}
   1505          			else
   1506          			{
   1507          				CurrPwr =  NoSignal;
   1508          			}
   1509          		}
   1510          
   1511          		return CurrPwr;
   1512          	}
   1513          }
   1514          
   1515          
   1516          INT16S GainAttnCalculation(INT16S cGain, INT16S cGainMax,INT8S cAttMin)
   1517          {
   1518          	INT16S AttTemp = 0;
   1519          
   1520          	AttTemp = cGainMax - cGain;
   1521          	AttTemp = MinMaxAttnCheck(AttTemp, GainATTENMAX,ATTENMIN);
   1522          
   1523          	return AttTemp;
   1524          }
   1525          
   1526          INT8U TemptoIndex(INT8S temp)
   1527          {
   1528          	INT32U i = 0;
   1529          	INT8S toffset = (TempMaxlimit - 5);
   1530          
   1531          	for(i = 0; toffset < TempMaxlimit; i++, toffset -= 5)
   1532          	{
   1533          		if(temp >= toffset) return i;
   1534          	}
   1535          	
   1536          	return (i--);
   1537          }
   1538          
   1539          INT8S AGCCheck(INT32S tmpx10,INT32S tlimitLow,INT8S tmpOnOff, INT8S *tmpALCAttn, INT8U AttMax, INT8U AttMin,INT8S AmpOnOff, INT8U Mode)
   1540          {
   1541          	INT32S gap;
   1542          	INT16S tmpTotAttn;
   1543          
   1544          	tmpTotAttn = *tmpALCAttn;
   1545          
   1546          
   1547          	if(AmpOnOff == Disable) return tmpTotAttn;
   1548          	if(tmpOnOff != Enable) return FALSE;
   1549          	
   1550          	gap = tmpx10 - tlimitLow;
   1551          
   1552          	if(abs(gap) <= 1) return FALSE;  //+/- 0.5dB
   1553          
   1554          	if(Mode ==_AGCMode)
   1555          	{
   1556          		if(gap > 0)
   1557          		{
   1558          //			if(gap >=  12L)		gap = 20L;
   1559          			  if(gap >=  2L)	gap = gap;
   1560          			else				gap = 1L;
   1561          		}
   1562          		else
   1563          		{
   1564          //				  if(gap <= -10L)	gap = -10L;
   1565          //			else if (gap <= -4L) 	gap = -4L;
   1566          //			if (gap <= -4L) 	gap = -4L;
   1567          //			else if(gap <= -2L)		gap = -2L;
   1568          			if(gap <= -2L)			gap = -2L;
   1569          			else					gap = -1L;
   1570          		}
   1571          		
   1572          		tmpTotAttn	+= gap;
   1573          	}
   1574          	
   1575          	if(Mode ==_ALCMode)
   1576          	{
   1577          		if(gap > 0)
   1578          		{
   1579          //			if(gap >=  6L)			gap = 10L;
   1580          			if(gap >=  8L)			gap = 20L;
   1581          			else if(gap >=  2L)		gap = gap;
   1582          			else					gap = 1L;
   1583          		}
   1584          		else
   1585          		{
   1586          				  if(gap <= -10L)	gap = -10L;
   1587          			else if (gap <= -4L) 	gap = -4L;
   1588          			else if(gap <= -2L)		gap = -2L;
   1589          			else					gap = -1L;
   1590          		}
   1591          		
   1592          		tmpTotAttn	+= gap;
   1593          	}
   1594          
   1595          	if(Mode ==_InputALCMode)
   1596          	{
   1597          		tmpTotAttn  = gap;
   1598          	}
   1599          	
   1600          	if(tmpTotAttn  > AttMax ) 	tmpTotAttn  = AttMax;
   1601          	if(tmpTotAttn  < AttMin ) 	tmpTotAttn  = AttMin;
   1602          
   1603          	*tmpALCAttn = tmpTotAttn;
   1604          
   1605            	return tmpTotAttn;    
   1606          }
   1607          
   1608          void AGCCheckFunction(void)
   1609          {
   1610          	if(tDnrSts->LTE15MUse == __NOTUSE)
   1611          	{
   1612          		FwdAGCCheck_CDMALTE();
   1613          	}
   1614          	else
   1615          	{
   1616          		FwdAGCCheck_CDMALTE_15M();
   1617          	}
   1618          	FwdAGCCheck_WCDMA();
   1619          	FwdAGCCheck_LTE_A_0();
   1620          
   1621          	if(iRepeaterType == _TRIO_MM)
   1622          	{
   1623          		FwdAGCCheck_LTE_1();
   1624          		FwdAGCCheck_LTE_A_1();
   1625          	}
   1626          }
   1627          
   1628          
   1629          void FwdAGCCheck_CDMALTE_15M(void)
   1630          {
   1631          	INT8U CurrPwr_2G;
   1632          	INT8U CurrPwr_LTE;
   1633          	INT16U Sum_2G;
   1634          	INT16U Sum_LTE;
   1635          	INT16U Sum;
   1636          	INT16U i;
   1637          	INT16S tmppwrin = 0;
   1638          	INT16S tmppwrout = 0;
   1639          	INT16S tmppwr = 0;
   1640          	INT16S tmpx10 = 0;
   1641          	INT8S tRvsAGCMAX_LTE; 
   1642          	INT8S tAgcAttn_LTE; 
   1643          
   1644          
   1645          	__Dnr_Sts  *Sts = tDnrSts; 
   1646          
   1647          	if( Sts->DetPwr.RvsOutPwr_2G > 10)
   1648          	{
   1649          		CurrPwr_2G = 27*2 - Sts->DetPwr.RvsOutPwr_2G;
   1650          		Sum_2G = dBmTomW[CurrPwr_2G];
   1651          	}
   1652          	else Sum_2G = 0;
   1653          	
   1654          	if( Sts->DetPwr.RvsOutPwr_LTE > 10)
   1655          	{
   1656          		CurrPwr_LTE = 27*2 - Sts->DetPwr.RvsOutPwr_LTE;
   1657           		Sum_LTE = dBmTomW[CurrPwr_LTE];
   1658          	}
   1659          	else Sum_LTE = 0;	
   1660          
   1661          
   1662          	Sum = Sum_2G + Sum_LTE;
   1663          	
   1664          	for(i = 0; i < sizeof(dBmTomW); i++)
   1665          	{
   1666          		if(Sum >= dBmTomW[i]) break;
   1667          	}
   1668          
   1669          	tmppwr = 27*2 - i;
   1670          	
   1671          	if(Sts->DetPwr.RvsOutPwr_LTE <= -60)
   1672          	{
   1673          		tmppwr = LowPwrLmt;
   1674          	}
   1675          
   1676          	tmppwr = tmppwr + Sts->RvsOutPwrOffset_LTE;
   1677          
   1678          	Sts->DetPwr.FwdOutPeakPwr_LTE_A  = tmppwr;
   1679          
   1680          	{
   1681          		tmppwrout = tmppwr - CurrRvsAgcAttn_LTE;
   1682          		TwoOutPwrConvINT((INT8S *)&dptr[0],tmppwrout);
   1683          		Sts->RvsOutPwr_LTE[0] = dptr[0];
   1684          		Sts->RvsOutPwr_LTE[1] = dptr[1];
   1685          
   1686          		tmpx10 = tmppwr - Gain_LTE + Sts->RvsAlcAttn_LTE;
   1687          		Sts->CurrRvsInPwr_LTE =abs(tmpx10/2);
   1688          		tmppwrin = tmpx10;
   1689          			
   1690          		ULTwoOutPwrConvINT((INT8S *)&dptr[0],tmppwrin);
   1691          		Sts->RvsInPwr_LTE[0] = dptr[0];
   1692          		Sts->RvsInPwr_LTE[1] = dptr[1];
   1693          	}
   1694          
   1695          	
   1696          	{
   1697          		iAGCOnOff= Sts->AGCOnOff_CDMALTE;
   1698          		iAGClimit = OneOutPwrConv(Sts->FwdOutUpperLmt_LTE);
   1699          
   1700          		if( Sts->AGCMode_LTE == _AGCAvgMode)
   1701          		{
   1702          			iAGCPwr = OneOutPwrConv(Sts->FwdOutPwr_LTE);
   1703          		}
   1704          		else
   1705          		{
   1706          			iAGCPwr = OneOutPwrConv(Sts->FwdOutPwrPeak_LTE);
   1707          		}				
   1708          
   1709          		AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->FwdAgcAttn_LTE, AGCMAX_LTE, ATTENMIN,Sts->FwdAmpOnOff_LTE,_AGCMode);
   1710          	}
   1711          
   1712          	{
   1713          		iAGCOnOff= Sts->RvsAlcOnOff_LTE;
   1714          		iAGClimit = Sts->RvsALCLvl_LTE*2;
   1715          		iAGCPwr = tmppwr;
   1716          		AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->RvsAlcAttn_LTE, tRvsALCMAX_LTE, ATTENMIN,Sts->FwdAmpOnOff_LTE, _ALCMode);
   1717          	}
   1718          
   1719          	{
   1720          		iAGCOnOff  = Enable;
   1721          		iAGCAttnMAX = 25*2;
   1722          		iAGClimit = OtherFwdOverInLmt_CDMALTE ; 		// -35*2dBm
   1723          		iAGCPwr = -Sts->DetPwr.FwdInPwr_CDMALTE*2;
   1724          	
   1725          		AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->FwdInAlcAttn_CDMALTE, iAGCAttnMAX, ATTENMIN, Sts->FwdAmpOnOff_LTE, _InputALCMode);	
   1726          	}
   1727          
   1728          	tRvsAGCMAX_LTE = AGCMAX_LTE + Sts->RvsGainBalance_LTE*2;
   1729          
   1730          	if( Sts->FwdAgcAttn_LTE > Sts->FwdInAlcAttn_CDMALTE)
   1731          	{
   1732          		tAgcAttn_LTE = Sts->FwdAgcAttn_LTE - Sts->FwdInAlcAttn_CDMALTE; 
   1733          	}
   1734          	else tAgcAttn_LTE = Sts->FwdAgcAttn_LTE;
   1735          
   1736          
   1737          	if(tAgcAttn_LTE >= AGC25_ATTENMAX_LTE)
   1738          	{
   1739          		Sts->FwdAttn1_CDMALTE = tAgcAttn_LTE - AGC25_ATTENMAX_LTE;
   1740          		Sts->FwdAttn1_LTE = AGC25_ATTENMAX_LTE;
   1741          	}
   1742          	else
   1743          	{
   1744          		Sts->FwdAttn1_CDMALTE = 0;
   1745          		Sts->FwdAttn1_LTE= tAgcAttn_LTE;
   1746          	}
   1747          
   1748          	Sts->FwdAttn1_CDMALTE = Sts->FwdAttn1_CDMALTE + Sts->FwdInAlcAttn_CDMALTE;
   1749          
   1750          	CurrAgcAttn_LTE = Sts->FwdAttn1_LTE + Sts->FwdInAlcAttn_CDMALTE;
   1751          
   1752          	if(Sts->AGCOnOff_CDMALTE == Enable)
   1753          	{
   1754          		Sts->RvsGainAttn_LTE = CurrAgcAttn_LTE - Sts->RvsAlcAttn_LTE + Sts->RvsGainBalance_LTE*2;
   1755          		Sts->RvsGainAttn_LTE = MinMaxAttnCheck(Sts->RvsGainAttn_LTE,tRvsAGCMAX_LTE,ATTENMIN);
   1756          		CurrRvsAgcAttn_LTE = Sts->RvsGainAttn_LTE;
   1757          	}
   1758          	else
   1759          	{
   1760          		CurrRvsAgcAttn_LTE = Sts->RvsGainAttn_LTE - Sts->RvsAlcAttn_LTE + Sts->RvsGainBalance_LTE*2;
   1761          		CurrRvsAgcAttn_LTE = MinMaxAttnCheck(CurrRvsAgcAttn_LTE,tRvsAGCMAX_LTE,ATTENMIN);
   1762          	}
   1763          
   1764          	if(Sts->AlmSts.FwdAmpOnOff_LTE == Disable)
   1765          	{
   1766          		CurrRvsAgcAttn_LTE = tRvsAGCMAX_LTE;
   1767          	}
   1768          	
   1769          
   1770          	tAGC_ATTENMAX_LTE = RVSAGC20_ATTENMAX_2G + Sts->RvsGainBalance_LTE*2;
   1771          	if(CurrRvsAgcAttn_LTE < tAGC_ATTENMAX_LTE) 
   1772          	{
   1773          		Sts->RvsAttn2_LTE = CurrRvsAgcAttn_LTE;
   1774          		Sts->RvsAttn3_LTE = 0;
   1775          	}
   1776          	else
   1777          	{
   1778          		Sts->RvsAttn2_LTE = tAGC_ATTENMAX_LTE;
   1779          		Sts->RvsAttn3_LTE = CurrRvsAgcAttn_LTE - tAGC_ATTENMAX_LTE;
   1780          	}	
   1781          
   1782          	if(Sts->RvsAlcAttn_LTE < RVSALC25_ATTENMAX_LTE)
   1783          	{
   1784          		Sts->RvsAttn1_CDMALTE = Sts->RvsAlcAttn_LTE;
   1785          		Sts->RvsAttn1_LTE  = 0;
   1786          	}
   1787          	else
   1788          	{
   1789          		Sts->RvsAttn1_CDMALTE = RVSALC25_ATTENMAX_LTE;
   1790          		Sts->RvsAttn1_LTE  = Sts->RvsAlcAttn_LTE - RVSALC25_ATTENMAX_LTE;
   1791          	}
   1792          	
   1793          	Sts->FwdAttn1_2G  = Sts->FwdAttn1_LTE;
   1794          	Sts->FwdAttn2_2G  = Sts->FwdAttn2_LTE;
   1795          
   1796          	Sts->RvsAttn1_2G = Sts->RvsAttn1_LTE;
   1797          	Sts->RvsAttn2_2G = Sts->RvsAttn2_LTE;
   1798          	Sts->RvsAttn3_2G = Sts->RvsAttn3_LTE;
   1799          }
   1800          
   1801          
   1802          void FwdAGCCheck_CDMALTE(void)
   1803          {
   1804          	INT8S CurrAttn = 0;
   1805          	INT8U tAmpOnOff = 0;
   1806          
   1807          	INT8S tAgcAttn_2G; 
   1808          	INT8S tAgcAttn_LTE; 
   1809          	
   1810          	INT8S tRvsAGCMAX_2G; 
   1811          	INT8S tRvsAGCMAX_LTE; 
   1812          
   1813          	__Dnr_Sts  *Sts = tDnrSts; 
   1814          
   1815          	{
   1816          		{
   1817          			iAGCOnOff= Sts->AGCOnOff_CDMALTE;
   1818          			iAGClimit = OneOutPwrConv(Sts->FwdOutUpperLmt_2G);
   1819          			if( Sts->AGCMode_2G == _AGCAvgMode)
   1820          			{
   1821          				iAGCPwr = OneOutPwrConv(Sts->FwdOutPwr_2G);
   1822          			}
   1823          			else
   1824          			{
   1825          				iAGCPwr = OneOutPwrConv(Sts->FwdOutPwrPeak_2G);
   1826          			}	
   1827          
   1828          			AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->FwdAgcAttn_2G, AGCMAX_2G, ATTENMIN,Sts->FwdAmpOnOff_2G,_AGCMode);
   1829          		}
   1830          
   1831          		{
   1832          			iAGCOnOff= Sts->RvsAlcOnOff_2G;
   1833          			iAGClimit = Sts->RvsALCLvl_2G*2;
   1834          			iAGCPwr = Sts->DetPwr.RvsOutPwr_2G;
   1835          
   1836          			AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->RvsAlcAttn_2G, tRvsALCMAX_2G, ATTENMIN,Enable, _ALCMode);
   1837          		}
   1838          
   1839          		{
   1840          			iAGCOnOff= Sts->AGCOnOff_CDMALTE;
   1841          			iAGClimit = OneOutPwrConv(Sts->FwdOutUpperLmt_LTE);
   1842          
   1843          			if( Sts->AGCMode_LTE == _AGCAvgMode)
   1844          			{
   1845          				iAGCPwr = OneOutPwrConv(Sts->FwdOutPwr_LTE);
   1846          			}
   1847          			else
   1848          			{
   1849          				iAGCPwr = OneOutPwrConv(Sts->FwdOutPwrPeak_LTE);
   1850          			}	
   1851          			
   1852          			AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->FwdAgcAttn_LTE, AGCMAX_LTE, ATTENMIN,Sts->FwdAmpOnOff_LTE,_AGCMode);
   1853          		}
   1854          
   1855          		{
   1856          			iAGCOnOff= Sts->RvsAlcOnOff_LTE;
   1857          			iAGClimit = Sts->RvsALCLvl_LTE*2;
   1858          			iAGCPwr = Sts->DetPwr.RvsOutPwr_LTE;
   1859          			AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->RvsAlcAttn_LTE, tRvsALCMAX_LTE, ATTENMIN,Sts->FwdAmpOnOff_LTE, _ALCMode);
   1860          		}
   1861          			
   1862          
   1863          		{
   1864          			iAGCOnOff  = Enable;
   1865          			iAGCAttnMAX = 25*2;
   1866          			iAGClimit = OtherFwdOverInLmt_CDMALTE ; 		// -35*2dBm
   1867          			iAGCPwr = -Sts->DetPwr.FwdInPwr_CDMALTE*2;
   1868          			if((Sts->FwdAmpOnOff_2G)||(Sts->FwdAmpOnOff_LTE))	tAmpOnOff = Disable;
   1869          			else												tAmpOnOff = Enable;
   1870          
   1871          			AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->FwdInAlcAttn_CDMALTE, iAGCAttnMAX, ATTENMIN, tAmpOnOff, _InputALCMode);	
   1872          		}
   1873          	}
   1874          
   1875          	if( Sts->FwdAgcAttn_2G > Sts->FwdInAlcAttn_CDMALTE)
   1876          	{
   1877          		tAgcAttn_2G = Sts->FwdAgcAttn_2G - Sts->FwdInAlcAttn_CDMALTE; 
   1878          	}
   1879          	else tAgcAttn_2G = Sts->FwdAgcAttn_2G;
   1880          
   1881          	if( Sts->FwdAgcAttn_LTE > Sts->FwdInAlcAttn_CDMALTE)
   1882          	{
   1883          		tAgcAttn_LTE = Sts->FwdAgcAttn_LTE - Sts->FwdInAlcAttn_CDMALTE;
   1884          	}
   1885          	else tAgcAttn_LTE = Sts->FwdAgcAttn_LTE;
   1886          
   1887          
   1888          	if((Sts->AlmSts.FwdAmpOnOff_2G == Disable)&&(Sts->AlmSts.FwdAmpOnOff_LTE == Enable))
   1889          	{
   1890          		tAgcAttn_2G = DIGATTENMAX_2G;
   1891          	}
   1892          
   1893          	if((Sts->AlmSts.FwdAmpOnOff_LTE == Disable)&&(Sts->AlmSts.FwdAmpOnOff_2G == Enable))
   1894          	{
   1895          		tAgcAttn_LTE = DIGATTENMAX_2G;
   1896          	}
   1897          
   1898          	if(tAgcAttn_2G >= AGC25_ATTENMAX_2G)
   1899          	{
   1900          		Sts->cFwdAttn_CDMA = tAgcAttn_2G - AGC25_ATTENMAX_2G;
   1901          	}
   1902          	else
   1903          	{
   1904          		Sts->cFwdAttn_CDMA = 0;
   1905          	}
   1906          
   1907          	if(tAgcAttn_LTE >= AGC25_ATTENMAX_2G)
   1908          	{
   1909          		Sts->cFwdAttn_LTE = tAgcAttn_LTE - AGC25_ATTENMAX_2G;
   1910          	}
   1911          	else
   1912          	{
   1913          		Sts->cFwdAttn_LTE = 0;
   1914          	}
   1915          
   1916          	if( Sts->cFwdAttn_LTE >  Sts->cFwdAttn_CDMA)	
   1917          	{
   1918          		Sts->FwdAttn1_CDMALTE = Sts->cFwdAttn_LTE;
   1919          	}
   1920          	else											
   1921          	{
   1922          		Sts->FwdAttn1_CDMALTE = Sts->cFwdAttn_CDMA;
   1923          	}
   1924          
   1925          	Sts->FwdAttn1_CDMALTE = Sts->FwdAttn1_CDMALTE + Sts->FwdInAlcAttn_CDMALTE;
   1926          	Sts->FwdAttn1_CDMALTE = MinMaxAttnCheck(Sts->FwdAttn1_CDMALTE ,AGC25_ATTENMAX_2G,ATTENMIN);
   1927          
   1928          
   1929          	if(tAgcAttn_2G <= AGC25_ATTENMAX_2G)
   1930          	{
   1931          		CurrAttn = Sts->cFwdAttn_LTE - Sts->cFwdAttn_CDMA;
   1932          
   1933          		if( Sts->cFwdAttn_LTE >=  Sts->cFwdAttn_CDMA)
   1934          		{
   1935          			if(tAgcAttn_2G > CurrAttn)
   1936          			{
   1937          				Sts->AttOffset.FwdAttn1_2G  = tAgcAttn_2G - CurrAttn;
   1938          				Sts->FwdAttn2_2G = ToggleFwdAttn_2G;
   1939          			}
   1940          			else
   1941          			{
   1942          				Sts->AttOffset.FwdAttn1_2G = 0;
   1943          
   1944          				if((Sts->AlmSts.FwdAmpOnOff_2G == Disable)||( Sts->DetPwr.FwdOutAvgPwr_2G <= 0))
   1945          				{
   1946          					Sts->FwdAttn2_2G = ToggleFwdAttn_2G;
   1947          				}
   1948          				else
   1949          				{
   1950          					Sts->FwdAttn2_2G  = ToggleFwdAttn_2G - ( CurrAttn - tAgcAttn_2G) ;
   1951          				}
   1952          			}
   1953          			Sts->FwdAttn2_2G = MinMaxAttnCheck(Sts->FwdAttn2_2G ,ATTENMAX,ATTENMIN);
   1954          		}
   1955          	}
   1956          	else
   1957          	{
   1958          		CurrAttn = Sts->cFwdAttn_LTE - Sts->cFwdAttn_CDMA;
   1959          
   1960          		if( Sts->cFwdAttn_LTE <=  Sts->cFwdAttn_CDMA)	
   1961          		{
   1962          			Sts->AttOffset.FwdAttn1_2G  = AGC25_ATTENMAX_2G;
   1963          		}
   1964          		else
   1965          		{
   1966          			Sts->AttOffset.FwdAttn1_2G  = AGC25_ATTENMAX_2G - CurrAttn;
   1967          		}
   1968          		
   1969          		Sts->FwdAttn2_2G	= ToggleFwdAttn_2G;
   1970          	}
   1971          	
   1972          	Sts->FwdAttn1_2G  = Sts->AttOffset.FwdAttn1_2G;
   1973          	
   1974          ////////////////////////
   1975          	if(tAgcAttn_LTE <= AGC25_ATTENMAX_2G)
   1976          	{
   1977          		CurrAttn = Sts->cFwdAttn_CDMA - Sts->cFwdAttn_LTE;
   1978          
   1979          		if( Sts->cFwdAttn_LTE <=  Sts->cFwdAttn_CDMA)
   1980          		{
   1981          			if(tAgcAttn_LTE > CurrAttn)
   1982          			{
   1983          				Sts->AttOffset.FwdAttn1_LTE = tAgcAttn_LTE- CurrAttn;
   1984          				Sts->FwdAttn2_LTE = ToggleFwdAttn_LTE;
   1985          			}
   1986          			else
   1987          			{
   1988          				Sts->AttOffset.FwdAttn1_LTE = 0;
   1989          
   1990          				if((Sts->AlmSts.FwdAmpOnOff_LTE == Disable)||( Sts->DetPwr.FwdOutAvgPwr_LTE <= 0))
   1991          				{
   1992          					Sts->FwdAttn2_LTE = ToggleFwdAttn_LTE;
   1993          				}
   1994          				else
   1995          				{
   1996          					Sts->FwdAttn2_LTE = ToggleFwdAttn_LTE - ( CurrAttn - tAgcAttn_LTE) ;
   1997          				}
   1998          			}
   1999          			
   2000          			Sts->FwdAttn2_LTE = MinMaxAttnCheck(Sts->FwdAttn2_LTE ,ATTENMAX,ATTENMIN);
   2001          		}
   2002          	}
   2003          	else
   2004          	{
   2005          		CurrAttn = Sts->cFwdAttn_CDMA - Sts->cFwdAttn_LTE;
   2006          
   2007          		if( Sts->cFwdAttn_LTE >=  Sts->cFwdAttn_CDMA)	
   2008          		{
   2009          			Sts->AttOffset.FwdAttn1_LTE = AGC25_ATTENMAX_LTE;
   2010          		}
   2011          		else
   2012          		{
   2013          			Sts->AttOffset.FwdAttn1_LTE = AGC25_ATTENMAX_LTE- CurrAttn;
   2014          		}
   2015          		Sts->FwdAttn2_LTE = ToggleFwdAttn_LTE;
   2016          	}
   2017          	
   2018          	Sts->FwdAttn1_LTE = Sts->AttOffset.FwdAttn1_LTE;
   2019          
   2020          	
   2021          	tRvsAGCMAX_2G  = AGCMAX_2G  + Sts->RvsGainBalance_2G *2;
   2022          	tRvsAGCMAX_LTE = AGCMAX_LTE + Sts->RvsGainBalance_LTE *2;
   2023          
   2024          	CurrAgcAttn_2G = Sts->FwdAttn1_CDMALTE + Sts->FwdAttn1_2G;
   2025          
   2026          	if(Sts->AGCOnOff_CDMALTE == Enable)
   2027          	{
   2028          		Sts->RvsGainAttn_2G = CurrAgcAttn_2G - Sts->RvsAlcAttn_2G + Sts->RvsGainBalance_2G*2;
   2029          		Sts->RvsGainAttn_2G = MinMaxAttnCheck(Sts->RvsGainAttn_2G,tRvsAGCMAX_2G,ATTENMIN);
   2030          		CurrRvsAgcAttn_2G = Sts->RvsGainAttn_2G;
   2031          	}
   2032          	else
   2033          	{
   2034          		CurrRvsAgcAttn_2G = Sts->RvsGainAttn_2G - Sts->RvsAlcAttn_2G + Sts->RvsGainBalance_2G *2;
   2035          		CurrRvsAgcAttn_2G = MinMaxAttnCheck(CurrRvsAgcAttn_2G,tRvsAGCMAX_2G,ATTENMIN);
   2036          	}
   2037          
   2038          	if(Sts->AlmSts.FwdAmpOnOff_2G == Disable)
   2039          	{
   2040          		CurrRvsAgcAttn_2G = tRvsAGCMAX_2G;
   2041          	}
   2042          
   2043          	CurrAgcAttn_LTE = Sts->FwdAttn1_CDMALTE + Sts->FwdAttn1_LTE;
   2044          	
   2045          	if(Sts->AGCOnOff_CDMALTE == Enable)
   2046          	{
   2047          		Sts->RvsGainAttn_LTE = CurrAgcAttn_LTE - Sts->RvsAlcAttn_LTE + Sts->RvsGainBalance_LTE*2;
   2048          		Sts->RvsGainAttn_LTE = MinMaxAttnCheck(Sts->RvsGainAttn_LTE,tRvsAGCMAX_LTE,ATTENMIN);
   2049          		CurrRvsAgcAttn_LTE = Sts->RvsGainAttn_LTE;
   2050          	}
   2051          	else
   2052          	{
   2053          		CurrRvsAgcAttn_LTE = Sts->RvsGainAttn_LTE - Sts->RvsAlcAttn_LTE + Sts->RvsGainBalance_LTE*2;
   2054          		CurrRvsAgcAttn_LTE = MinMaxAttnCheck(CurrRvsAgcAttn_LTE,tRvsAGCMAX_LTE,ATTENMIN);
   2055          	}
   2056          
   2057          	if(Sts->AlmSts.FwdAmpOnOff_LTE == Disable)
   2058          	{
   2059          		CurrRvsAgcAttn_LTE = tRvsAGCMAX_LTE;
   2060          	}
   2061          	
   2062          	///////////////////////////////////////////////2013.03.19
   2063          	if(chkSleepMode[PATH_2G] == SET)
   2064          	{
   2065          //		Sts->Rvs0GainSet_2G =  FwdMinGain_2G;
   2066          
   2067          		Sts->RvsGainAttn_2G = GainATTENMAX;
   2068          		CurrRvsAgcAttn_2G = Sts->RvsGainAttn_2G;
   2069          
   2070          		Sts->RvsAttn2_2G = ATTENMAX;
   2071          		Sts->RvsAttn3_2G = ATTENMAX;
   2072          	}
   2073          	else
   2074          	{
   2075          		tAGC_ATTENMAX_2G = RVSAGC20_ATTENMAX_2G + Sts->RvsGainBalance_2G*2;
   2076          		if(CurrRvsAgcAttn_2G < tAGC_ATTENMAX_2G)
   2077          		{
   2078          			Sts->RvsAttn2_2G = CurrRvsAgcAttn_2G;
   2079          			Sts->RvsAttn3_2G = 0;
   2080          		}
   2081          		else
   2082          		{
   2083          			Sts->RvsAttn2_2G = tAGC_ATTENMAX_2G;
   2084          			Sts->RvsAttn3_2G = CurrRvsAgcAttn_2G - tAGC_ATTENMAX_2G;
   2085          		}
   2086          	}
   2087          
   2088          
   2089          	if(chkSleepMode[PATH_LTE] == SET)
   2090          	{
   2091          		Sts->RvsGainAttn_LTE = GainATTENMAX;
   2092          		CurrRvsAgcAttn_LTE = Sts->RvsGainAttn_LTE;
   2093          		Sts->RvsAttn2_LTE = ATTENMAX;
   2094          		Sts->RvsAttn3_LTE = ATTENMAX;
   2095          	}
   2096          	else
   2097          	{
   2098          		tAGC_ATTENMAX_LTE = RVSAGC20_ATTENMAX_2G + Sts->RvsGainBalance_LTE*2;
   2099          		if(CurrRvsAgcAttn_LTE < tAGC_ATTENMAX_LTE) 
   2100          		{
   2101          			Sts->RvsAttn2_LTE = CurrRvsAgcAttn_LTE;
   2102          			Sts->RvsAttn3_LTE = 0;
   2103          		}
   2104          		else
   2105          		{
   2106          			Sts->RvsAttn2_LTE = tAGC_ATTENMAX_LTE;
   2107          			Sts->RvsAttn3_LTE = CurrRvsAgcAttn_LTE - tAGC_ATTENMAX_LTE;
   2108          		}	
   2109          	}
   2110          //////////////////////////////////////////////////////////////////////////////////////////
   2111          	tALC_ATTENMAX_2G = RVSALC20_ATTENMAX_2G;
   2112          
   2113          	if(Sts->RvsAlcAttn_2G > tALC_ATTENMAX_2G)
   2114          	{
   2115          		Sts->cRvsAttn_CDMA = Sts->RvsAlcAttn_2G - tALC_ATTENMAX_2G;
   2116          	}
   2117          	else Sts->cRvsAttn_CDMA = 0;
   2118          		
   2119          	if(Sts->RvsAlcAttn_LTE > RVSALC25_ATTENMAX_LTE)
   2120          	{
   2121          		Sts->cRvsAttn_LTE = Sts->RvsAlcAttn_LTE - RVSALC25_ATTENMAX_LTE;
   2122          	}
   2123          	else Sts->cRvsAttn_LTE = 0;
   2124          	
   2125          	if( Sts->cRvsAttn_LTE >  Sts->cRvsAttn_CDMA)	Sts->RvsAttn1_CDMALTE = Sts->cRvsAttn_LTE;
   2126          	else											Sts->RvsAttn1_CDMALTE = Sts->cRvsAttn_CDMA;
   2127          	if (Sts->RvsAttn1_CDMALTE >= DIGATTENMAX_2G) 	Sts->RvsAttn1_CDMALTE = DIGATTENMAX_2G;
   2128          
   2129          	if(Sts->RvsAlcAttn_2G <= RVSALC20_ATTENMAX_2G)
   2130          	{
   2131          		Sts->RvsAttn1_2G  = Sts->RvsAlcAttn_2G;
   2132          		Sts->AttOffset.RvsAttn1_2G	= tmpRvsAttn1_2G;
   2133          	}
   2134          	else
   2135          	{
   2136          		Sts->RvsAttn1_2G  = RVSALC20_ATTENMAX_2G;
   2137          	}
   2138          
   2139          	if(Sts->RvsAlcAttn_LTE <= RVSALC25_ATTENMAX_LTE)
   2140          	{
   2141          		Sts->RvsAttn1_LTE  = Sts->RvsAlcAttn_LTE;
   2142          
   2143          		Sts->AttOffset.RvsAttn1_2G	= tmpRvsAttn1_2G;
   2144          	}
   2145          	else
   2146          	{
   2147          		Sts->RvsAttn1_LTE  = RVSALC25_ATTENMAX_LTE;
   2148          
   2149          		if( Sts->cRvsAttn_LTE >= Sts->cRvsAttn_CDMA)
   2150          		{
   2151          			Sts->AttOffset.RvsAttn1_2G	= tmpRvsAttn1_2G - (Sts->cRvsAttn_LTE - Sts->cRvsAttn_CDMA);
   2152          			if(Sts->AttOffset.RvsAttn1_2G <= 0)	Sts->AttOffset.RvsAttn1_2G = 0;
   2153          		}
   2154          		else
   2155          		{
   2156          			Sts->AttOffset.RvsAttn1_2G	= tmpRvsAttn1_2G;
   2157          		}
   2158          	}
   2159          }
   2160          
   2161          
   2162          void FwdAGCCheck_WCDMA(void)
   2163          {
   2164          	INT8S tmpAgcAttn_3G; 
   2165          	INT8S tAgcAttn_3G; 
   2166          	INT8S tRvsAGCMAX_3G; 
   2167          
   2168          	__Dnr_Sts  *Sts = tDnrSts; 
   2169          
   2170          		////자사 
   2171          	{
   2172          		iAGCOnOff = Sts->AGCOnOff_3G;
   2173          		iAGClimit = OneOutPwrConv(Sts->FwdOutUpperLmt_3G);
   2174          
   2175          		if( Sts->AGCMode_3G == _AGCAvgMode)
   2176          		{
   2177          			iAGCPwr = OneOutPwrConv(Sts->FwdOutPwr_3G);
   2178          		}
   2179          		else
   2180          		{
   2181          			iAGCPwr = OneOutPwrConv(Sts->FwdOutPwrPeak_3G);
   2182          		}	
   2183          		
   2184          		AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->FwdAgcAttn_3G, AGCMAX_3G, ATTENMIN,Sts->FwdAmpOnOff_3G,_AGCMode);
   2185          	}
   2186          		
   2187          	{
   2188          		iAGCOnOff= Sts->RvsAlcOnOff_3G;
   2189          		iAGCPwr = Sts->DetPwr.RvsOutPwr_3G;
   2190          
   2191          		if((Sts->AlmSts.FwdAmpOnOff_3G == Disable)||( Sts->DetPwr.FwdOutAvgPwr_3G <= 0)||(Sts->AGCOnOff_3G == Disable))
   2192          		{
   2193          			iAGClimit = (tmpRvsALCLvl_3G)*2 ;
   2194          		}
   2195          		else
   2196          		{
   2197          			iAGClimit = (tmpRvsALCLvl_3G*2 - Sts->RvsGainAttn_3G);
   2198          		}
   2199          		Sts->AttOffset.RvsAttn5_3G = iAGClimit/2;
   2200          
   2201          		AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->RvsAlcAttn_3G, tRvsALCMAX_3G, ATTENMIN,Sts->FwdAmpOnOff_3G, _ALCMode);
   2202          	}
   2203          
   2204          
   2205          	{
   2206          		iAGCOnOff  = Enable;
   2207          		iAGCAttnMAX = 25*2;
   2208          		iAGClimit = OtherFwdOverInLmt_3G ; 		// -36*2dBm
   2209          		iAGCPwr = -Sts->DetPwr.FwdInPwr_3G*2;
   2210          	
   2211          		AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->FwdInAlcAttn_3G, iAGCAttnMAX, ATTENMIN, Sts->FwdAmpOnOff_3G, _InputALCMode);	
   2212          	}
   2213          
   2214          	tRvsAGCMAX_3G = AGCMAX_3G + Sts->RvsGainBalance_3G*2;
   2215          
   2216          	if( Sts->FwdAgcAttn_3G > Sts->FwdInAlcAttn_3G)
   2217          	{
   2218          		tAgcAttn_3G = Sts->FwdAgcAttn_3G - Sts->FwdInAlcAttn_3G; 
   2219          	}
   2220          	else tAgcAttn_3G = Sts->FwdAgcAttn_3G;
   2221          
   2222          
   2223          	if(tAgcAttn_3G >= AGC20_ATTENMAX_3G)
   2224          	{
   2225          		Sts->FwdAttn1_3G = tAgcAttn_3G - AGC20_ATTENMAX_3G;
   2226          		Sts->FwdAttn2_3G = AGC20_ATTENMAX_3G;
   2227          	}
   2228          	else
   2229          	{
   2230          		Sts->FwdAttn1_3G = 0;
   2231          		Sts->FwdAttn2_3G = tAgcAttn_3G;
   2232          	}
   2233          
   2234          	Sts->FwdAttn1_3G = Sts->FwdAttn1_3G + Sts->FwdInAlcAttn_3G;
   2235          
   2236          	CurrAgcAttn_3G = Sts->FwdAttn1_3G + Sts->FwdAttn2_3G;
   2237          
   2238          	if(Sts->AGCOnOff_3G == Enable)
   2239          	{
   2240          		Sts->RvsGainAttn_3G = CurrAgcAttn_3G - Sts->RvsAlcAttn_3G + Sts->RvsGainBalance_3G*2;
   2241          		Sts->RvsGainAttn_3G = MinMaxAttnCheck(Sts->RvsGainAttn_3G,tRvsAGCMAX_3G,ATTENMIN);
   2242          		tmpAgcAttn_3G = Sts->RvsGainAttn_3G;
   2243          	}
   2244          	else
   2245          	{
   2246          		tmpAgcAttn_3G = Sts->RvsGainAttn_3G - Sts->RvsAlcAttn_3G + Sts->RvsGainBalance_3G*2;
   2247          		tmpAgcAttn_3G = MinMaxAttnCheck(tmpAgcAttn_3G,tRvsAGCMAX_3G,ATTENMIN);
   2248          	}
   2249          
   2250          	if(Sts->AlmSts.FwdAmpOnOff_3G== Disable)
   2251          	{
   2252          		tmpAgcAttn_3G = AGCMAX_3G;
   2253          	}
   2254          
   2255          	{
   2256          		tAGC10_ATTENMAX_3G  = AGC10_ATTENMAX_3G + Sts->RvsGainBalance_3G*2;
   2257          		if(tmpAgcAttn_3G <= tAGC10_ATTENMAX_3G)	
   2258          		{
   2259          			Sts->RvsAttn3_3G = tmpAgcAttn_3G;
   2260          			Sts->RvsAttn4_3G = 0;
   2261          		}
   2262          		else
   2263          		{
   2264          			Sts->RvsAttn3_3G = tAGC10_ATTENMAX_3G;
   2265          			Sts->RvsAttn4_3G = tmpAgcAttn_3G - tAGC10_ATTENMAX_3G;
   2266          		}
   2267          		Sts->RvsAttn4_3G = MinMaxAttnCheck(Sts->RvsAttn4_3G,AGCATTENMAX_3G,ATTENMIN);
   2268          
   2269          		CurrRvsAgcAttn_3G = Sts->RvsAttn3_3G +Sts->RvsAttn4_3G;
   2270          
   2271          		if(Sts->RvsAlcAttn_3G <= RVSALC25_ATTENMAX_3G) 
   2272          		{
   2273          			Sts->RvsAttn1_3G = Sts->RvsAlcAttn_3G;
   2274          			Sts->RvsAttn2_3G = 0;
   2275          		}
   2276          		else
   2277          		{
   2278          			Sts->RvsAttn1_3G = RVSALC25_ATTENMAX_3G;
   2279          			Sts->RvsAttn2_3G = Sts->RvsAlcAttn_3G - RVSALC25_ATTENMAX_3G;
   2280          		}
   2281          	}
   2282          }
   2283          
   2284          void FwdAGCCheck_LTE_A_0(void)
   2285          {
   2286          	INT8S tmpAttn_LTE_A1 = 0;
   2287          	INT8S tmpAttn_LTE_A2 = 0;
   2288          	INT8S CurrAttn = 0;
   2289          	INT8U tAmpOnOff = 0;
   2290          
   2291          	INT8S tAgcAttn_LTE_A1; 
   2292          	INT8S tAgcAttn_LTE_A2; 
   2293          	INT8S tRvsAGCMAX_LTE_A1; 
   2294          	INT8S tRvsAGCMAX_LTE_A2; 
   2295          
   2296          	__Dnr_Sts  *Sts = tDnrSts; 
   2297          
   2298          //자사 
   2299          	{
   2300          		iAGCOnOff = Sts->AGCOnOff_LTE_A_0;
   2301          		iAGClimit = OneOutPwrConv(Sts->FwdOutUpperLmt_LTE_A1);
   2302          		if( Sts->AGCMode_LTE_A1 == _AGCAvgMode)
   2303          		{
   2304          			iAGCPwr = OneOutPwrConv(Sts->FwdOutPwr_LTE_A1);
   2305          		}
   2306          		else
   2307          		{
   2308          			iAGCPwr = OneOutPwrConv(Sts->FwdOutPwrPeak_LTE_A1);
   2309          		}	
   2310          
   2311          		AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->FwdAgcAttn_LTE_A1, AGCMAX_LTE_A1, ATTENMIN,Sts->FwdAmpOnOff_LTE_A1,_AGCMode);
   2312          	}
   2313          
   2314          	{
   2315          		iAGCOnOff= Sts->RvsAlcOnOff_LTE_A1;
   2316          		iAGClimit = Sts->RvsALCLvl_LTE_A1*2;
   2317          		iAGCPwr = Sts->DetPwr.RvsOutPwr_LTE_A1;
   2318          		AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->RvsAlcAttn_LTE_A1, tRvsALCMAX_LTE_A1, ATTENMIN,Sts->FwdAmpOnOff_LTE_A1, _ALCMode);
   2319          	}
   2320          
   2321          	{
   2322          		iAGCOnOff = Sts->AGCOnOff_LTE_A_0;
   2323          		iAGClimit = OneOutPwrConv(Sts->FwdOutUpperLmt_LTE_A2);
   2324          		if( Sts->AGCMode_LTE_A2 == _AGCAvgMode)
   2325          		{
   2326          			iAGCPwr = OneOutPwrConv(Sts->FwdOutPwr_LTE_A2);
   2327          		}
   2328          		else
   2329          		{
   2330          			iAGCPwr = OneOutPwrConv(Sts->FwdOutPwrPeak_LTE_A2);
   2331          		}	
   2332          		AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->FwdAgcAttn_LTE_A2, AGCMAX_LTE_A1, ATTENMIN,Sts->FwdAmpOnOff_LTE_A2,_AGCMode);
   2333          
   2334          	}
   2335          	{
   2336          		iAGCOnOff= Sts->RvsAlcOnOff_LTE_A2;
   2337          		iAGClimit = Sts->RvsALCLvl_LTE_A2*2;
   2338          		iAGCPwr = Sts->DetPwr.RvsOutPwr_LTE_A2;
   2339          		AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->RvsAlcAttn_LTE_A2, tRvsALCMAX_LTE_A1, ATTENMIN,Sts->FwdAmpOnOff_LTE_A2, _ALCMode);
   2340          	}
   2341          
   2342          
   2343          	{
   2344          		iAGCOnOff  = Enable;
   2345          		iAGCAttnMAX = 25*2;
   2346          		iAGClimit = OtherFwdOverInLmt_LTE_A ; 		// -37*2dBm
   2347          		iAGCPwr = -Sts->DetPwr.FwdInPwr_LTE_A*2;
   2348          		if((Sts->FwdAmpOnOff_LTE_A2)||(Sts->FwdAmpOnOff_LTE_A2))	tAmpOnOff = Disable;
   2349          		else 														tAmpOnOff = Enable;
   2350          
   2351          
   2352          		AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->FwdInAlcAttn_LTE_A_0, iAGCAttnMAX, ATTENMIN, tAmpOnOff, _InputALCMode);	
   2353          	}
   2354          	
   2355          ///////////////////////////////////////////////////////////////////////////////////////////////
   2356          	if( Sts->FwdAgcAttn_LTE_A1 > Sts->FwdInAlcAttn_LTE_A_0 )
   2357          	{
   2358          		tAgcAttn_LTE_A1 = Sts->FwdAgcAttn_LTE_A1 - Sts->FwdInAlcAttn_LTE_A_0; 
   2359          	}
   2360          	else tAgcAttn_LTE_A1 = Sts->FwdAgcAttn_LTE_A1;
   2361          
   2362          	if( Sts->FwdAgcAttn_LTE_A2 > Sts->FwdInAlcAttn_LTE_A_0)
   2363          	{
   2364          		tAgcAttn_LTE_A2 = Sts->FwdAgcAttn_LTE_A2 - Sts->FwdInAlcAttn_LTE_A_0;
   2365          	}
   2366          	else tAgcAttn_LTE_A2 = Sts->FwdAgcAttn_LTE_A2;
   2367          
   2368          
   2369          	if((Sts->AlmSts.FwdAmpOnOff_LTE_A1 == Disable)&&(Sts->AlmSts.FwdAmpOnOff_LTE_A2 == Enable))
   2370          	{
   2371          		tAgcAttn_LTE_A1 = DIGATTENMAX_2G;
   2372          	}
   2373          	
   2374          	if((Sts->AlmSts.FwdAmpOnOff_LTE_A2 == Disable)&&(Sts->AlmSts.FwdAmpOnOff_LTE_A1 == Enable))
   2375          	{
   2376          		tAgcAttn_LTE_A2 = DIGATTENMAX_2G;
   2377          	}
   2378          
   2379          
   2380          
   2381          	if(tAgcAttn_LTE_A1 >= AGC25_ATTENMAX_LTE_A1)
   2382          	{
   2383          		Sts->cFwdAttn_LTE_A1 = tAgcAttn_LTE_A1 - AGC25_ATTENMAX_LTE_A1;
   2384          	}
   2385          	else
   2386          	{
   2387          		Sts->cFwdAttn_LTE_A1 = 0;
   2388          	}
   2389          
   2390          	if(tAgcAttn_LTE_A2 >= AGC25_ATTENMAX_LTE_A1)
   2391          	{
   2392          		Sts->cFwdAttn_LTE_A2 = tAgcAttn_LTE_A2 - AGC25_ATTENMAX_LTE_A1;
   2393          	}
   2394          	else
   2395          	{
   2396          		Sts->cFwdAttn_LTE_A2 = 0;
   2397          	}
   2398          
   2399          	if( Sts->cFwdAttn_LTE_A2 >  Sts->cFwdAttn_LTE_A1)	
   2400          	{
   2401          		Sts->FwdAttn1_LTE_A = Sts->cFwdAttn_LTE_A2 + Sts->FwdInAlcAttn_LTE_A_0;
   2402          	}
   2403          	else											
   2404          	{
   2405          		Sts->FwdAttn1_LTE_A = Sts->cFwdAttn_LTE_A1 + Sts->FwdInAlcAttn_LTE_A_0;
   2406          	}
   2407          
   2408          	tmpAttn_LTE_A1 = tAgcAttn_LTE_A1 - Sts->FwdAttn1_LTE_A;
   2409          	tmpAttn_LTE_A2 = tAgcAttn_LTE_A2 - Sts->FwdAttn1_LTE_A;
   2410          
   2411          
   2412          	if(tAgcAttn_LTE_A1 <= AGC25_ATTENMAX_LTE_A1)
   2413          	{
   2414          		CurrAttn = Sts->cFwdAttn_LTE_A2 - Sts->cFwdAttn_LTE_A1;
   2415          
   2416          		if( Sts->cFwdAttn_LTE_A2 >=  Sts->cFwdAttn_LTE_A1)
   2417          		{
   2418          			if(tAgcAttn_LTE_A1 > CurrAttn)
   2419          			{
   2420          				Sts->AttOffset.FwdAttn1_LTE_A1 = tAgcAttn_LTE_A1 - CurrAttn;
   2421          				Sts->FwdAttn2_LTE_A1  = ToggleFwdAttn_LTE_A1;
   2422          			}
   2423          			else
   2424          			{
   2425          				Sts->AttOffset.FwdAttn1_LTE_A1 = 0;
   2426          
   2427          				if((Sts->AlmSts.FwdAmpOnOff_LTE_A1 == Disable)||( Sts->DetPwr.FwdOutAvgPwr_LTE_A1 <= 0))
   2428          				{
   2429          					Sts->FwdAttn2_LTE_A1  = ToggleFwdAttn_LTE_A1;
   2430          				}
   2431          				else
   2432          				{
   2433          					Sts->FwdAttn2_LTE_A1  = ToggleFwdAttn_LTE_A1 - ( CurrAttn - tAgcAttn_LTE_A1) ;
   2434          				}
   2435          			}
   2436          			
   2437          			Sts->FwdAttn2_LTE_A1 = MinMaxAttnCheck(Sts->FwdAttn2_LTE_A1 ,ATTENMAX,ATTENMIN);
   2438          		}
   2439          	}
   2440          	else
   2441          	{
   2442           		CurrAttn = Sts->cFwdAttn_LTE_A2 - Sts->cFwdAttn_LTE_A1;
   2443          
   2444          		if( Sts->cFwdAttn_LTE_A2 <=  Sts->cFwdAttn_LTE_A1)	
   2445          		{
   2446          			Sts->AttOffset.FwdAttn1_LTE_A1  = AGC25_ATTENMAX_LTE_A1;
   2447          		}
   2448          		else
   2449          		{
   2450          			Sts->AttOffset.FwdAttn1_LTE_A1  = AGC25_ATTENMAX_LTE_A1 - CurrAttn;
   2451          		}
   2452          		
   2453          		Sts->FwdAttn2_LTE_A1	= ToggleFwdAttn_LTE_A1;
   2454          	}
   2455          
   2456          	Sts->FwdAttn1_LTE_A1  = Sts->AttOffset.FwdAttn1_LTE_A1;
   2457          
   2458          
   2459          	if(tAgcAttn_LTE_A2 <= AGC25_ATTENMAX_LTE_A1)
   2460          	{
   2461          		CurrAttn = Sts->cFwdAttn_LTE_A1 - Sts->cFwdAttn_LTE_A2;
   2462          
   2463          		if( Sts->cFwdAttn_LTE_A2 <=  Sts->cFwdAttn_LTE_A1)
   2464          		{
   2465          			if(tAgcAttn_LTE_A2 > CurrAttn)
   2466          			{
   2467          				Sts->AttOffset.FwdAttn1_LTE_A2 = tAgcAttn_LTE_A2 - CurrAttn;
   2468          				Sts->FwdAttn2_LTE_A2 = ToggleFwdAttn_LTE_A2;
   2469          			}
   2470          			else
   2471          			{
   2472          				Sts->AttOffset.FwdAttn1_LTE_A2 = 0;
   2473          
   2474          				if((Sts->AlmSts.FwdAmpOnOff_LTE_A2 == Disable)||( Sts->DetPwr.FwdOutAvgPwr_LTE_A2<= 0))
   2475          				{
   2476          					Sts->FwdAttn2_LTE_A2 = ToggleFwdAttn_LTE_A2;
   2477          				}
   2478          				else
   2479          				{
   2480          					Sts->FwdAttn2_LTE_A2 = ToggleFwdAttn_LTE_A2 - ( CurrAttn - tAgcAttn_LTE_A2) ;
   2481          				}
   2482          			}
   2483          			
   2484          			Sts->FwdAttn2_LTE_A2 = MinMaxAttnCheck(Sts->FwdAttn2_LTE_A2 ,ATTENMAX,ATTENMIN);
   2485          		}
   2486          	}
   2487          	else
   2488          	{
   2489          		CurrAttn = Sts->cFwdAttn_LTE_A1 - Sts->cFwdAttn_LTE_A2;
   2490          
   2491          		if( Sts->cFwdAttn_LTE_A2 >=  Sts->cFwdAttn_LTE_A1)	
   2492          		{
   2493          			Sts->AttOffset.FwdAttn1_LTE_A2 = AGC25_ATTENMAX_LTE_A1;
   2494          		}
   2495          		else
   2496          		{
   2497          			Sts->AttOffset.FwdAttn1_LTE_A2 = AGC25_ATTENMAX_LTE_A1- CurrAttn;
   2498          		}
   2499          		
   2500          		Sts->FwdAttn2_LTE_A2 = ToggleFwdAttn_LTE_A2;
   2501          	}
   2502          	
   2503          	Sts->FwdAttn1_LTE_A2  = Sts->AttOffset.FwdAttn1_LTE_A2;
   2504          
   2505          	///////////////////////////////////////////////////////////////////////////////////////////////
   2506          
   2507          	tRvsAGCMAX_LTE_A1 = AGCMAX_LTE_A1 + Sts->RvsGainBalance_LTE_A1*2;
   2508          	
   2509          	CurrAgcAttn_LTE_A1 = Sts->FwdAttn1_LTE_A + Sts->FwdAttn1_LTE_A1;
   2510          
   2511           	if(Sts->AGCOnOff_LTE_A_0 == Enable)
   2512          	{
   2513          		Sts->RvsGainAttn_LTE_A1 = CurrAgcAttn_LTE_A1 - Sts->RvsAlcAttn_LTE_A1 + Sts->RvsGainBalance_LTE_A1*2;
   2514          		Sts->RvsGainAttn_LTE_A1 = MinMaxAttnCheck(Sts->RvsGainAttn_LTE_A1,tRvsAGCMAX_LTE_A1,ATTENMIN);
   2515          		CurrRvsAgcAttn_LTE_A1 = Sts->RvsGainAttn_LTE_A1;
   2516          
   2517          	}
   2518          	else
   2519          	{
   2520          		CurrRvsAgcAttn_LTE_A1 = Sts->RvsGainAttn_LTE_A1 - Sts->RvsAlcAttn_LTE_A1 +  Sts->RvsGainBalance_LTE_A1*2;
   2521          		CurrRvsAgcAttn_LTE_A1 = MinMaxAttnCheck(CurrRvsAgcAttn_LTE_A1, tRvsAGCMAX_LTE_A1,ATTENMIN);
   2522          	}
   2523          
   2524          	if(Sts->AlmSts.FwdAmpOnOff_LTE_A1 == Disable)
   2525          	{
   2526          		CurrRvsAgcAttn_LTE_A1 = tRvsAGCMAX_LTE_A1;
   2527          	}
   2528          
   2529          
   2530          	tRvsAGCMAX_LTE_A2 = AGCMAX_LTE_A1 + Sts->RvsGainBalance_LTE_A2*2;
   2531          	CurrAgcAttn_LTE_A2 = Sts->FwdAttn1_LTE_A + Sts->FwdAttn1_LTE_A2;
   2532          
   2533          	if(Sts->AGCOnOff_LTE_A_0 == Enable)
   2534          	{
   2535          		Sts->RvsGainAttn_LTE_A2 = Sts->FwdAgcAttn_LTE_A2 - Sts->RvsAlcAttn_LTE_A2 + Sts->RvsGainBalance_LTE_A2*2;
   2536          		Sts->RvsGainAttn_LTE_A2 = MinMaxAttnCheck(Sts->RvsGainAttn_LTE_A2,tRvsAGCMAX_LTE_A2,ATTENMIN);
   2537          		CurrRvsAgcAttn_LTE_A2 = Sts->RvsGainAttn_LTE_A2;
   2538          	}
   2539          	else
   2540          	{
   2541          		CurrRvsAgcAttn_LTE_A2 = Sts->RvsGainAttn_LTE_A2 - Sts->RvsAlcAttn_LTE_A2+  Sts->RvsGainBalance_LTE_A2*2;
   2542          		CurrRvsAgcAttn_LTE_A2	= MinMaxAttnCheck(CurrRvsAgcAttn_LTE_A2, tRvsAGCMAX_LTE_A2,ATTENMIN);
   2543          	}
   2544          
   2545          	if(Sts->AlmSts.FwdAmpOnOff_LTE_A2 == Disable)
   2546          	{
   2547          		CurrRvsAgcAttn_LTE_A2 = tRvsAGCMAX_LTE_A2;
   2548          	}
   2549          
   2550          	if(chkSleepMode[PATH_LTE_A1] == SET)
   2551          	{
   2552          //		Sts->Rvs0GainSet_LTE_A1 =  FwdMinGain_LTE_A;
   2553          
   2554          		Sts->RvsGainAttn_LTE_A1 = GainATTENMAX;
   2555          		CurrRvsAgcAttn_LTE_A1 = Sts->RvsGainAttn_LTE_A1;
   2556          
   2557          		Sts->RvsAttn2_LTE_A1 = ATTENMAX;
   2558          		Sts->RvsAttn3_LTE_A1 = ATTENMAX;
   2559          	}
   2560          	else
   2561          	{
   2562          		tAGC_ATTENMAX_LTE_A1 = RVSAGC15_ATTENMAX_LTE_A1 + Sts->RvsGainBalance_LTE_A1*2;
   2563          
   2564          		if(CurrRvsAgcAttn_LTE_A1 < tAGC_ATTENMAX_LTE_A1)
   2565          		{
   2566          			Sts->RvsAttn2_LTE_A1 = CurrRvsAgcAttn_LTE_A1;
   2567          			Sts->RvsAttn3_LTE_A1 = 0;
   2568          		}
   2569          		else
   2570          		{
   2571          			Sts->RvsAttn2_LTE_A1 = tAGC_ATTENMAX_LTE_A1;
   2572          			Sts->RvsAttn3_LTE_A1 = CurrRvsAgcAttn_LTE_A1 - tAGC_ATTENMAX_LTE_A1;
   2573          		}
   2574          		Sts->RvsAttn3_LTE_A1	= MinMaxAttnCheck(Sts->RvsAttn3_LTE_A1, DIGATTENMAX,ATTENMIN);
   2575          	}
   2576          
   2577          	if(chkSleepMode[PATH_LTE_A2] == SET)
   2578          	{
   2579          //		Sts->Rvs0GainSet_LTE_A2 =  FwdMinGain_LTE_A;
   2580          
   2581          		Sts->RvsGainAttn_LTE_A2 = GainATTENMAX;
   2582          		CurrRvsAgcAttn_LTE_A2 = Sts->RvsGainAttn_LTE_A2;
   2583          
   2584          		Sts->RvsAttn2_LTE_A2 = ATTENMAX;
   2585          		Sts->RvsAttn3_LTE_A2 = ATTENMAX;
   2586          	}
   2587          	else
   2588          	{
   2589          		tAGC_ATTENMAX_LTE_A2 = RVSAGC15_ATTENMAX_LTE_A2 + Sts->RvsGainBalance_LTE_A2*2;
   2590          		if(CurrRvsAgcAttn_LTE_A2 < tAGC_ATTENMAX_LTE_A2) 
   2591          		{
   2592          			Sts->RvsAttn2_LTE_A2 = CurrRvsAgcAttn_LTE_A2;
   2593          			Sts->RvsAttn3_LTE_A2 = 0;
   2594          		}
   2595          		else
   2596          		{
   2597          			Sts->RvsAttn2_LTE_A2 = tAGC_ATTENMAX_LTE_A2;
   2598          			Sts->RvsAttn3_LTE_A2 = CurrRvsAgcAttn_LTE_A2 - tAGC_ATTENMAX_LTE_A2;
   2599          		}	
   2600          		Sts->RvsAttn3_LTE_A2	= MinMaxAttnCheck(Sts->RvsAttn3_LTE_A2, DIGATTENMAX,ATTENMIN);
   2601          	}
   2602          
   2603          /////////////////////////////////////////////////////////////////////////////////
   2604          	if(Sts->RvsAlcAttn_LTE_A1 > ALCATTENMAX_LTE)
   2605          	{
   2606          		Sts->cRvsAttn_LTE_A1 = Sts->RvsAlcAttn_LTE_A1 - ALCATTENMAX_LTE;
   2607          	}
   2608          	else Sts->cRvsAttn_LTE_A1 = 0;
   2609          		
   2610          	if(Sts->RvsAlcAttn_LTE_A2 > ALCATTENMAX_LTE)
   2611          	{
   2612          		Sts->cRvsAttn_LTE_A2 = Sts->RvsAlcAttn_LTE_A2 - ALCATTENMAX_LTE;
   2613          	}
   2614          	else Sts->cRvsAttn_LTE_A2 = 0;
   2615          	
   2616          	if( Sts->cRvsAttn_LTE_A2 >  Sts->cRvsAttn_LTE_A1)	Sts->RvsAttn1_LTE_A = Sts->cRvsAttn_LTE_A2;
   2617          	else												Sts->RvsAttn1_LTE_A = Sts->cRvsAttn_LTE_A1;
   2618          	if (Sts->RvsAttn1_LTE_A >= ALCATTENMAX_LTE) 		Sts->RvsAttn1_LTE_A = ALCATTENMAX_LTE;
   2619          
   2620          	tmpAttn_LTE_A1 = Sts->RvsAlcAttn_LTE_A1 - Sts->RvsAttn1_LTE_A;
   2621          	tmpAttn_LTE_A2 = Sts->RvsAlcAttn_LTE_A2 - Sts->RvsAttn1_LTE_A;
   2622          
   2623          	if( Sts->RvsAlcAttn_LTE_A1 >= Sts->RvsAlcAttn_LTE_A2)
   2624          	{
   2625          		Sts->RvsAttn1_LTE_A1  = tmpAttn_LTE_A1;
   2626          
   2627          		if( Sts->RvsAttn1_LTE_A < tmpAttn_LTE_A2 )
   2628          		{
   2629          			Sts->RvsAttn1_LTE_A2 = tmpAttn_LTE_A2 - Sts->RvsAttn1_LTE_A;
   2630          		}
   2631          		else
   2632          		{
   2633          			Sts->RvsAttn1_LTE_A2 = 0;
   2634          		}
   2635          		
   2636          		Sts->RvsAttn1_LTE_A2	= MinMaxAttnCheck(Sts->RvsAttn1_LTE_A2, DIGATTENMAX,ATTENMIN);
   2637          	}
   2638          	else if( Sts->RvsAlcAttn_LTE_A1 < (Sts->RvsAlcAttn_LTE_A2 ))
   2639          	{
   2640          		Sts->RvsAttn1_LTE_A2  = tmpAttn_LTE_A2;
   2641          		if( Sts->RvsAttn1_LTE_A < tmpAttn_LTE_A1)
   2642          		{
   2643          			Sts->RvsAttn1_LTE_A1  = tmpAttn_LTE_A1 - Sts->RvsAttn1_LTE_A;
   2644          		}
   2645          		else
   2646          		{
   2647          			Sts->RvsAttn1_LTE_A1 = 0;
   2648          		}
   2649          		
   2650          		Sts->RvsAttn1_LTE_A1	= MinMaxAttnCheck(Sts->RvsAttn1_LTE_A1, DIGATTENMAX,ATTENMIN);
   2651          	}
   2652          }
   2653          
   2654          void FwdAGCCheck_LTE_1(void)
   2655          {
   2656          	INT8U tmpAgcAttn_LTE1; 
   2657          	INT8S tRvsAGCMAX_LTE; 
   2658          	INT8S tAgcAttn_LTE_1; 
   2659          
   2660          	__Dnr_Sts  *Sts = tDnrSts; 
   2661          
   2662          	{
   2663          		iAGCOnOff = Sts->AGC1OnOff_LTE;
   2664          		iAGCAttnMAX = 50*2;
   2665          		iAGClimit = OneOutPwrConv(Sts->Fwd1OutUpperLmt_LTE);
   2666          
   2667          		if( Sts->AGCMode_LTE == _AGCAvgMode)
   2668          		{
   2669          			iAGCPwr = OneOutPwrConv(Sts->Fwd1OutPwr_LTE);
   2670          		}
   2671          		else
   2672          		{
   2673          			iAGCPwr = OneOutPwrConv(Sts->Fwd1OutPwrPeak_LTE);
   2674          		}	
   2675          		
   2676          		AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->Fwd1AgcAttn_LTE, iAGCAttnMAX, ATTENMIN,Sts->FwdAmp1OnOff_LTE,_AGCMode);
   2677          	}
   2678          
   2679          	{
   2680          		iAGCOnOff= Sts->Rvs1AlcOnOff_LTE;
   2681          //		iAGCAttnMAX = 43*2;
   2682          		iAGCAttnMAX = tRvsALCMAX_LTE;
   2683          		iAGCPwr = Sts->Det1Pwr.Rvs1OutPwr_LTE;
   2684          
   2685          		if((Sts->AlmSts.FwdAmp1OnOff_LTE == Disable)||( Sts->Det1Pwr.Fwd1OutAvgPwr_LTE <= 0)||(Sts->AGC1OnOff_LTE == Disable))
   2686          		{
   2687          			iAGClimit = (tmpRvs1ALCLvl_LTE*2) ;
   2688          		}
   2689          		else
   2690          		{
   2691          			iAGClimit = (tmpRvs1ALCLvl_LTE*2 - Sts->Rvs1GainAttn_LTE);
   2692          		}
   2693          		Sts->Att1Offset.Rvs1Attn4_LTE = iAGClimit/2;
   2694          		AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->Rvs1AlcAttn_LTE, iAGCAttnMAX, ATTENMIN,Sts->FwdAmp1OnOff_LTE, _ALCMode);
   2695          	}
   2696          
   2697          
   2698          	{
   2699          		iAGCOnOff  = Enable;
   2700          		iAGCAttnMAX = 25*2;
   2701          		iAGClimit = OtherFwd1OverInLmt_LTE ;		// -36*2dBm
   2702          		iAGCPwr = -Sts->Det1Pwr.Fwd1InPwr_LTE*2;
   2703          
   2704          		AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->FwdInAlcAttn_LTE_1, iAGCAttnMAX, ATTENMIN, Sts->FwdAmp1OnOff_LTE, _InputALCMode);	
   2705          	}
   2706          
   2707          
   2708          	if( Sts->Fwd1AgcAttn_LTE > Sts->FwdInAlcAttn_LTE_1)
   2709          	{
   2710          		tAgcAttn_LTE_1 = Sts->Fwd1AgcAttn_LTE - Sts->FwdInAlcAttn_LTE_1; 
   2711          	}
   2712          	else tAgcAttn_LTE_1 = Sts->Fwd1AgcAttn_LTE;
   2713          
   2714          
   2715          	if(tAgcAttn_LTE_1 >= AGC25_ATTENMAX_LTE_1)
   2716          	{
   2717          		Sts->Fwd1Attn1_LTE = tAgcAttn_LTE_1 - AGC25_ATTENMAX_LTE_1;
   2718          		Sts->Fwd1Attn2_LTE = AGC25_ATTENMAX_LTE_1;
   2719          	}
   2720          	else
   2721          	{
   2722          		Sts->Fwd1Attn1_LTE = 0;
   2723          		Sts->Fwd1Attn2_LTE = tAgcAttn_LTE_1;
   2724          	}
   2725          
   2726          	Sts->Fwd1Attn1_LTE = Sts->Fwd1Attn1_LTE + Sts->FwdInAlcAttn_LTE_1;
   2727          
   2728          	CurrAgcAttn_LTE_1 = Sts->Fwd1Attn1_LTE + Sts->Fwd1Attn2_LTE;
   2729          
   2730          	tRvsAGCMAX_LTE = AGCMAX_LTE + Sts->Rvs1GainBalance_LTE*2;
   2731          	if(Sts->AGC1OnOff_LTE == Enable)
   2732          	{
   2733          		Sts->Rvs1GainAttn_LTE = CurrAgcAttn_LTE_1  - Sts->Rvs1AlcAttn_LTE + Sts->Rvs1GainBalance_LTE*2;
   2734          		Sts->Rvs1GainAttn_LTE = MinMaxAttnCheck(Sts->Rvs1GainAttn_LTE,tRvsAGCMAX_LTE,ATTENMIN);
   2735          		tmpAgcAttn_LTE1 = Sts->Rvs1GainAttn_LTE;
   2736          	}
   2737          	else
   2738          	{
   2739          		tmpAgcAttn_LTE1 = Sts->Rvs1GainAttn_LTE - Sts->Rvs1AlcAttn_LTE + Sts->Rvs1GainBalance_LTE*2;
   2740          		tmpAgcAttn_LTE1 = MinMaxAttnCheck(tmpAgcAttn_LTE1,tRvsAGCMAX_LTE,ATTENMIN);
   2741          	}
   2742          
   2743          	if(Sts->AlmSts.FwdAmp1OnOff_LTE == Disable)
   2744          	{
   2745          		tmpAgcAttn_LTE1 = tRvsAGCMAX_LTE;
   2746          	}
   2747          
   2748          
   2749          	{
   2750          		tAGC_ATTENMAX_LTE_1  = RVSAGC20_ATTENMAX_LTE_A1 + Sts->Rvs1GainBalance_LTE*2;
   2751          
   2752          		if(tmpAgcAttn_LTE1 <= tAGC_ATTENMAX_LTE_1)	
   2753          		{
   2754          			Sts->Rvs1Attn3_LTE = tmpAgcAttn_LTE1;
   2755          			Sts->Rvs1Attn4_LTE = 0;
   2756          		}
   2757          		else
   2758          		{
   2759          			Sts->Rvs1Attn3_LTE = tAGC_ATTENMAX_LTE_1;
   2760          			Sts->Rvs1Attn4_LTE = tmpAgcAttn_LTE1 - tAGC_ATTENMAX_LTE_1;
   2761          		}
   2762          		CurrRvsAgcAttn_LTE_1 = Sts->Rvs1Attn3_LTE + Sts->Rvs1Attn4_LTE;
   2763          
   2764          
   2765          		if(Sts->Rvs1AlcAttn_LTE <= RVSALC25_ATTENMAX_LTE) 
   2766          		{
   2767          			Sts->Rvs1Attn1_LTE = Sts->Rvs1AlcAttn_LTE;
   2768          			Sts->Rvs1Attn2_LTE = 0;
   2769          		}
   2770          		else
   2771          		{
   2772          			Sts->Rvs1Attn1_LTE = RVSALC25_ATTENMAX_LTE;
   2773          			Sts->Rvs1Attn2_LTE = Sts->Rvs1AlcAttn_LTE - RVSALC25_ATTENMAX_LTE;
   2774          		}
   2775          	}
   2776          }
   2777          
   2778          void FwdAGCCheck_LTE_A_1(void)
   2779          {
   2780          	INT8U tmpAttn_LTE_A1 = 0;
   2781          	INT8U tmpAttn_LTE_A2 = 0;
   2782          	INT8S CurrAttn = 0;
   2783          	INT8U tAmpOnOff = 0;
   2784          
   2785          	INT8S tAgcAttn_LTE_A1_1; 
   2786          	INT8S tAgcAttn_LTE_A2_1; 
   2787          	INT8S tRvsAGCMAX_LTE_A1; 
   2788          	INT8S tRvsAGCMAX_LTE_A2; 
   2789          
   2790          	__Dnr_Sts  *Sts = tDnrSts; 
   2791          
   2792          	{
   2793          		iAGCOnOff= Sts->AGCOnOff_LTE_A_1;
   2794          		iAGClimit = OneOutPwrConv(Sts->Fwd1OutUpperLmt_LTE_A1);
   2795          
   2796          		if( Sts->AGCMode_LTE_A1 == _AGCAvgMode)
   2797          		{
   2798          			iAGCPwr = OneOutPwrConv(Sts->Fwd1OutPwr_LTE_A1);
   2799          		}
   2800          		else
   2801          		{
   2802          			iAGCPwr = OneOutPwrConv(Sts->Fwd1OutPwrPeak_LTE_A1);
   2803          		}
   2804          
   2805          		AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->Fwd1AgcAttn_LTE_A1, AGCMAX_LTE_A1, ATTENMIN,Sts->FwdAmp1OnOff_LTE_A1,_AGCMode);
   2806          	}
   2807          
   2808          	{
   2809          		iAGCOnOff= Sts->Rvs1AlcOnOff_LTE_A1;
   2810          		iAGClimit = Sts->Rvs1ALCLvl_LTE_A1*2;
   2811          		iAGCPwr = Sts->Det1Pwr.Rvs1OutPwr_LTE_A1;
   2812          		
   2813          		AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->Rvs1AlcAttn_LTE_A1, tRvsALCMAX_LTE_A1, ATTENMIN,Sts->FwdAmp1OnOff_LTE_A1, _ALCMode);
   2814          	}
   2815          	
   2816          
   2817          
   2818          	{
   2819          		iAGCOnOff = Sts->AGCOnOff_LTE_A_1;
   2820          		iAGClimit = OneOutPwrConv(Sts->Fwd1OutUpperLmt_LTE_A2);
   2821          		if( Sts->AGCMode_LTE_A2 == _AGCAvgMode)
   2822          		{
   2823          			iAGCPwr = OneOutPwrConv(Sts->Fwd1OutPwr_LTE_A2);
   2824          		}
   2825          		else
   2826          		{
   2827          			iAGCPwr = OneOutPwrConv(Sts->Fwd1OutPwrPeak_LTE_A2);
   2828          		}	
   2829          		
   2830          		AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->Fwd1AgcAttn_LTE_A2, AGCMAX_LTE_A1, ATTENMIN,Sts->FwdAmp1OnOff_LTE_A2,_AGCMode);
   2831          	}
   2832          
   2833          	{
   2834          		iAGCOnOff= Sts->Rvs1AlcOnOff_LTE_A2;
   2835          		iAGClimit = Sts->Rvs1ALCLvl_LTE_A2*2;
   2836          		iAGCPwr = Sts->Det1Pwr.Rvs1OutPwr_LTE_A2;
   2837          		
   2838          		AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->Rvs1AlcAttn_LTE_A2, tRvsALCMAX_LTE_A1, ATTENMIN,Sts->FwdAmp1OnOff_LTE_A2, _ALCMode);
   2839          	}
   2840          
   2841          	{
   2842          		iAGCOnOff  = Enable;
   2843          		iAGCAttnMAX = 20*2;
   2844          		iAGClimit = OtherFwd1OverInLmt_LTE_A; 		// -37*2dBm
   2845          		iAGCPwr = -Sts->Det1Pwr.FwdInPwr_LTE_A_1*2;
   2846          		if((Sts->FwdAmp1OnOff_LTE_A2)||(Sts->FwdAmp1OnOff_LTE_A2))	tAmpOnOff = Disable;
   2847          		else 														tAmpOnOff = Enable;
   2848          		AGCCheck(iAGCPwr, iAGClimit,iAGCOnOff, &Sts->FwdInAlcAttn_LTE_A_1, iAGCAttnMAX, ATTENMIN,tAmpOnOff,_InputALCMode);
   2849          	}
   2850          
   2851          	if( Sts->Fwd1AgcAttn_LTE_A1 > Sts->FwdInAlcAttn_LTE_A_1 )
   2852          	{
   2853          		tAgcAttn_LTE_A1_1 = Sts->Fwd1AgcAttn_LTE_A1 - Sts->FwdInAlcAttn_LTE_A_1; 
   2854          	}
   2855          	else tAgcAttn_LTE_A1_1 = Sts->Fwd1AgcAttn_LTE_A1;
   2856          
   2857          	if( Sts->Fwd1AgcAttn_LTE_A2 > Sts->FwdInAlcAttn_LTE_A_1)
   2858          	{
   2859          		tAgcAttn_LTE_A2_1 = Sts->Fwd1AgcAttn_LTE_A2 - Sts->FwdInAlcAttn_LTE_A_1;
   2860          	}
   2861          	else tAgcAttn_LTE_A2_1 = Sts->Fwd1AgcAttn_LTE_A2;
   2862          
   2863          	if((Sts->AlmSts.FwdAmp1OnOff_LTE_A1 == Disable)&&(Sts->AlmSts.FwdAmp1OnOff_LTE_A2 == Enable))
   2864          	{
   2865          		tAgcAttn_LTE_A1_1 = DIGATTENMAX_2G;
   2866          	}
   2867          	
   2868          	if((Sts->AlmSts.FwdAmp1OnOff_LTE_A2 == Disable)&&(Sts->AlmSts.FwdAmp1OnOff_LTE_A1 == Enable))
   2869          	{
   2870          		tAgcAttn_LTE_A2_1 = DIGATTENMAX_2G;
   2871          	}
   2872          
   2873          
   2874          	if(tAgcAttn_LTE_A1_1 >= AGC25_ATTENMAX_LTE_A1)
   2875          	{
   2876          		Sts->cFwdAttn_LTE_A1_1 = tAgcAttn_LTE_A1_1 - AGC25_ATTENMAX_LTE_A1;
   2877          	}
   2878          	else
   2879          	{
   2880          		Sts->cFwdAttn_LTE_A1_1 = 0;
   2881          	}
   2882          
   2883          	if(tAgcAttn_LTE_A2_1 >= AGC25_ATTENMAX_LTE_A1)
   2884          	{
   2885          		Sts->cFwdAttn_LTE_A2_1 = tAgcAttn_LTE_A2_1 - AGC25_ATTENMAX_LTE_A1;
   2886          	}
   2887          	else
   2888          	{
   2889          		Sts->cFwdAttn_LTE_A2_1 = 0;
   2890          	}
   2891          
   2892          	if( Sts->cFwdAttn_LTE_A2_1 >  Sts->cFwdAttn_LTE_A1_1)	
   2893          	{
   2894          		Sts->Fwd1Attn1_LTE_A = Sts->cFwdAttn_LTE_A2_1 + Sts->FwdInAlcAttn_LTE_A_1;
   2895          	}
   2896          	else											
   2897          	{
   2898          		Sts->Fwd1Attn1_LTE_A = Sts->cFwdAttn_LTE_A1_1 + Sts->FwdInAlcAttn_LTE_A_1;
   2899          	}
   2900          
   2901          	tmpAttn_LTE_A1 = tAgcAttn_LTE_A1_1 - Sts->Fwd1Attn1_LTE_A;
   2902          	tmpAttn_LTE_A2 = tAgcAttn_LTE_A2_1 - Sts->Fwd1Attn1_LTE_A;
   2903          
   2904          
   2905          	if(tAgcAttn_LTE_A1_1 <= AGC25_ATTENMAX_LTE_A1)
   2906          	{
   2907          		CurrAttn = Sts->cFwdAttn_LTE_A2_1 - Sts->cFwdAttn_LTE_A1_1;
   2908          
   2909          		if( Sts->cFwdAttn_LTE_A2_1 >=  Sts->cFwdAttn_LTE_A1_1)
   2910          		{
   2911          			if(tAgcAttn_LTE_A1_1 > CurrAttn)
   2912          			{
   2913          				Sts->Att1Offset.Fwd1Attn1_LTE_A1 = tAgcAttn_LTE_A1_1 - CurrAttn;
   2914          				Sts->Fwd1Attn2_LTE_A1  = ToggleFwdAttn_LTE_A1;
   2915          			}
   2916          			else
   2917          			{
   2918          				Sts->Att1Offset.Fwd1Attn1_LTE_A1 = 0;
   2919          
   2920          				if((Sts->AlmSts.FwdAmp1OnOff_LTE_A1 == Disable)||( Sts->Det1Pwr.Fwd1OutAvgPwr_LTE_A1 <= 0))
   2921          				{
   2922          					Sts->Fwd1Attn2_LTE_A1  = ToggleFwdAttn_LTE_A1;
   2923          				}
   2924          				else
   2925          				{
   2926          					Sts->Fwd1Attn2_LTE_A1  = ToggleFwdAttn_LTE_A1 - ( CurrAttn - tAgcAttn_LTE_A1_1) ;
   2927          				}
   2928          			}
   2929          			
   2930          			Sts->Fwd1Attn2_LTE_A1 = MinMaxAttnCheck(Sts->Fwd1Attn2_LTE_A1 ,ATTENMAX,ATTENMIN);
   2931          		}
   2932          	}
   2933          	else
   2934          	{
   2935           		CurrAttn = Sts->cFwdAttn_LTE_A2_1 - Sts->cFwdAttn_LTE_A1_1;
   2936          
   2937          		if( Sts->cFwdAttn_LTE_A2_1 <=  Sts->cFwdAttn_LTE_A1_1)	
   2938          		{
   2939          			Sts->Att1Offset.Fwd1Attn1_LTE_A1  = AGC25_ATTENMAX_LTE_A1;
   2940          		}
   2941          		else
   2942          		{
   2943          			Sts->Att1Offset.Fwd1Attn1_LTE_A1  = AGC25_ATTENMAX_LTE_A1 - CurrAttn;
   2944          		}
   2945          		
   2946          		Sts->Fwd1Attn2_LTE_A1	= ToggleFwdAttn_LTE_A1;
   2947          	}
   2948          
   2949          	Sts->Fwd1Attn1_LTE_A1  = Sts->Att1Offset.Fwd1Attn1_LTE_A1;
   2950          
   2951          	if(tAgcAttn_LTE_A2_1 <= AGC25_ATTENMAX_LTE_A1)
   2952          	{
   2953          		CurrAttn = Sts->cFwdAttn_LTE_A1_1 - Sts->cFwdAttn_LTE_A2_1;
   2954          
   2955          		if( Sts->cFwdAttn_LTE_A2_1 <=  Sts->cFwdAttn_LTE_A1_1)
   2956          		{
   2957          			if(tAgcAttn_LTE_A2_1 > CurrAttn)
   2958          			{
   2959          				Sts->Att1Offset.Fwd1Attn1_LTE_A2 = tAgcAttn_LTE_A2_1- CurrAttn;
   2960          				Sts->Fwd1Attn2_LTE_A2 = ToggleFwdAttn_LTE_A2;
   2961          			}
   2962          			else
   2963          			{
   2964          				Sts->Att1Offset.Fwd1Attn1_LTE_A2 = 0;
   2965          
   2966          				if((Sts->AlmSts.FwdAmp1OnOff_LTE_A2 == Disable)||( Sts->DetPwr.FwdOutAvgPwr_LTE_A2 <= 0))
   2967          				{
   2968          					Sts->Fwd1Attn2_LTE_A2 = ToggleFwdAttn_LTE_A2;
   2969          				}
   2970          				else
   2971          				{
   2972          					Sts->Fwd1Attn2_LTE_A2 = ToggleFwdAttn_LTE_A2 - ( CurrAttn - tAgcAttn_LTE_A2_1) ;
   2973          				}
   2974          			}
   2975          			
   2976          			Sts->Fwd1Attn2_LTE_A2 = MinMaxAttnCheck(Sts->Fwd1Attn2_LTE_A2 ,ATTENMAX,ATTENMIN);
   2977          		}
   2978          	}
   2979          	else
   2980          	{
   2981          		CurrAttn = Sts->cFwdAttn_LTE_A1_1 - Sts->cFwdAttn_LTE_A2_1;
   2982          
   2983          		if( Sts->cFwdAttn_LTE_A2_1 >=  Sts->cFwdAttn_LTE_A1_1)	
   2984          		{
   2985          			Sts->Att1Offset.Fwd1Attn1_LTE_A2 = AGC25_ATTENMAX_LTE_A1;
   2986          		}
   2987          		else
   2988          		{
   2989          			Sts->Att1Offset.Fwd1Attn1_LTE_A2 = AGC25_ATTENMAX_LTE_A1- CurrAttn;
   2990          		}
   2991          		
   2992          		Sts->Fwd1Attn2_LTE_A2 = ToggleFwdAttn_LTE_A2;
   2993          	}
   2994          
   2995          	Sts->Fwd1Attn1_LTE_A2  = Sts->Att1Offset.Fwd1Attn1_LTE_A2;
   2996          
   2997          	
   2998          	tRvsAGCMAX_LTE_A1 = AGCMAX_LTE_A1+ Sts->Rvs1GainBalance_LTE_A1*2;
   2999          	CurrAgcAttn_LTE_A1_1 = Sts->Fwd1Attn1_LTE_A + Sts->Fwd1Attn1_LTE_A1;
   3000          
   3001          	
   3002           	if(Sts->AGCOnOff_LTE_A_1 == Enable)
   3003          	{
   3004          		Sts->Rvs1GainAttn_LTE_A1 = CurrAgcAttn_LTE_A1_1 - Sts->Rvs1AlcAttn_LTE_A1 + Sts->Rvs1GainBalance_LTE_A1*2;
   3005          		Sts->Rvs1GainAttn_LTE_A1 = MinMaxAttnCheck(Sts->Rvs1GainAttn_LTE_A1,tRvsAGCMAX_LTE_A1,ATTENMIN);
   3006          		CurrRvsAgcAttn_LTE_A1_1 = Sts->Rvs1GainAttn_LTE_A1;
   3007          	}
   3008          	else
   3009          	{
   3010          		CurrRvsAgcAttn_LTE_A1_1 = Sts->Rvs1GainAttn_LTE_A1 - Sts->Rvs1AlcAttn_LTE_A1 +  Sts->Rvs1GainBalance_LTE_A1*2;
   3011          		CurrRvsAgcAttn_LTE_A1_1	= MinMaxAttnCheck(CurrRvsAgcAttn_LTE_A1_1, tRvsAGCMAX_LTE_A1,ATTENMIN);
   3012          	}
   3013          
   3014          	if(Sts->AlmSts.FwdAmp1OnOff_LTE_A1 == Disable)
   3015          	{
   3016          		CurrRvsAgcAttn_LTE_A1_1 = tRvsAGCMAX_LTE_A1;
   3017          	}
   3018          
   3019          	tRvsAGCMAX_LTE_A2 = AGCMAX_LTE_A1+ Sts->Rvs1GainBalance_LTE_A2*2;
   3020          	CurrAgcAttn_LTE_A2_1 = Sts->Fwd1Attn1_LTE_A + Sts->Fwd1Attn1_LTE_A2;
   3021          	if(Sts->AGCOnOff_LTE_A_1 == Enable)
   3022          	{
   3023          		Sts->Rvs1GainAttn_LTE_A2 = CurrAgcAttn_LTE_A2_1 - Sts->Rvs1AlcAttn_LTE_A2 + Sts->Rvs1GainBalance_LTE_A2*2;
   3024          		Sts->Rvs1GainAttn_LTE_A2 = MinMaxAttnCheck(Sts->Rvs1GainAttn_LTE_A2,tRvsAGCMAX_LTE_A2,ATTENMIN);
   3025          		CurrRvsAgcAttn_LTE_A2_1 = Sts->Rvs1GainAttn_LTE_A2;
   3026          	}
   3027          	else
   3028          	{
   3029          		CurrRvsAgcAttn_LTE_A2_1 = Sts->Rvs1GainAttn_LTE_A2 - Sts->Rvs1AlcAttn_LTE_A2+  Sts->Rvs1GainBalance_LTE_A2*2;
   3030          		CurrRvsAgcAttn_LTE_A2_1	= MinMaxAttnCheck(CurrRvsAgcAttn_LTE_A2_1, tRvsAGCMAX_LTE_A2,ATTENMIN);
   3031          	}
   3032          
   3033          
   3034          	if(Sts->AlmSts.FwdAmp1OnOff_LTE_A2 == Disable)
   3035          	{
   3036          		CurrRvsAgcAttn_LTE_A2_1 = tRvsAGCMAX_LTE_A2;
   3037          	}	
   3038          
   3039          	tAGC_ATTENMAX_LTE_A1 = RVSAGC15_ATTENMAX_LTE_A1 + Sts->Rvs1GainBalance_LTE_A1*2;
   3040          	if(CurrRvsAgcAttn_LTE_A1_1 < tAGC_ATTENMAX_LTE_A1)
   3041          	{
   3042          		Sts->Rvs1Attn2_LTE_A1 = CurrRvsAgcAttn_LTE_A1_1;
   3043          		Sts->Rvs1Attn3_LTE_A1 = 0;
   3044          	}
   3045          	else
   3046          	{
   3047          		Sts->Rvs1Attn2_LTE_A1 = tAGC_ATTENMAX_LTE_A1;
   3048          		Sts->Rvs1Attn3_LTE_A1 = CurrRvsAgcAttn_LTE_A1_1 - tAGC_ATTENMAX_LTE_A1;
   3049          	}
   3050          	Sts->Rvs1Attn3_LTE_A1	= MinMaxAttnCheck(Sts->Rvs1Attn3_LTE_A1, DIGATTENMAX,ATTENMIN);
   3051          	CurrRvsAgcAttn_LTE_A1_1 = Sts->Rvs1Attn2_LTE_A1 +Sts->Rvs1Attn3_LTE_A1;
   3052          
   3053          
   3054          	tAGC_ATTENMAX_LTE_A2 = RVSAGC15_ATTENMAX_LTE_A2 + Sts->RvsGainBalance_LTE_A2*2;
   3055          	if(CurrRvsAgcAttn_LTE_A2_1 < tAGC_ATTENMAX_LTE_A2) 
   3056          	{
   3057          		Sts->Rvs1Attn2_LTE_A2 = CurrRvsAgcAttn_LTE_A2_1;
   3058          		Sts->Rvs1Attn3_LTE_A2 = 0;
   3059          	}
   3060          	else
   3061          	{
   3062          		Sts->Rvs1Attn2_LTE_A2 = tAGC_ATTENMAX_LTE_A2;
   3063          		Sts->Rvs1Attn3_LTE_A2 = CurrRvsAgcAttn_LTE_A2_1 - tAGC_ATTENMAX_LTE_A2;
   3064          	}	
   3065          	Sts->Rvs1Attn3_LTE_A2	= MinMaxAttnCheck(Sts->Rvs1Attn3_LTE_A2, DIGATTENMAX,ATTENMIN);
   3066          
   3067              
   3068          /////////////////////////////////////////////////////////////////////////////////
   3069          	if(Sts->Rvs1AlcAttn_LTE_A1 > ALCATTENMAX_LTE)
   3070          	{
   3071          		Sts->cRvs1Attn_LTE_A1 = Sts->Rvs1AlcAttn_LTE_A1 - ALCATTENMAX_LTE;
   3072          	}
   3073          	else Sts->cRvs1Attn_LTE_A1 = 0;
   3074          		
   3075          	if(Sts->Rvs1AlcAttn_LTE_A2 > ALCATTENMAX_LTE)
   3076          	{
   3077          		Sts->cRvs1Attn_LTE_A2 = Sts->Rvs1AlcAttn_LTE_A2 - ALCATTENMAX_LTE;
   3078          	}
   3079          	else Sts->cRvs1Attn_LTE_A2 = 0;
   3080          	
   3081          	if( Sts->cRvs1Attn_LTE_A2 >  Sts->cRvs1Attn_LTE_A1)	Sts->Rvs1Attn1_LTE_A = Sts->cRvs1Attn_LTE_A2;
   3082          	else												Sts->Rvs1Attn1_LTE_A = Sts->cRvs1Attn_LTE_A1;
   3083          	if (Sts->Rvs1Attn1_LTE_A >= ALCATTENMAX_LTE) Sts->RvsAttn1_LTE_A = ALCATTENMAX_LTE;
   3084          
   3085          	tmpAttn_LTE_A1 = Sts->Rvs1AlcAttn_LTE_A1 - Sts->Rvs1Attn1_LTE_A;
   3086          	tmpAttn_LTE_A2 = Sts->Rvs1AlcAttn_LTE_A2 - Sts->Rvs1Attn1_LTE_A;
   3087          
   3088          	if( Sts->Rvs1AlcAttn_LTE_A1 >= Sts->Rvs1AlcAttn_LTE_A2)
   3089          	{
   3090          		Sts->Rvs1Attn1_LTE_A1  = tmpAttn_LTE_A1;
   3091          
   3092          		if( Sts->Rvs1Attn1_LTE_A < tmpAttn_LTE_A2 )
   3093          		{
   3094          			Sts->Rvs1Attn1_LTE_A2 = tmpAttn_LTE_A2 - Sts->Rvs1Attn1_LTE_A;
   3095          		}
   3096          		else
   3097          		{
   3098          			Sts->Rvs1Attn1_LTE_A2 = 0;
   3099          		}
   3100          		
   3101          		Sts->Rvs1Attn1_LTE_A2	= MinMaxAttnCheck(Sts->Rvs1Attn1_LTE_A2, DIGATTENMAX,ATTENMIN);
   3102          	}
   3103          	else if( Sts->Rvs1AlcAttn_LTE_A1 < (Sts->Rvs1AlcAttn_LTE_A2 ))
   3104          	{
   3105          		Sts->Rvs1Attn1_LTE_A2  = tmpAttn_LTE_A2;
   3106          		if( Sts->Rvs1Attn1_LTE_A < tmpAttn_LTE_A1)
   3107          		{
   3108          			Sts->Rvs1Attn1_LTE_A1  = tmpAttn_LTE_A1 - Sts->Rvs1Attn1_LTE_A;
   3109          		}
   3110          		else
   3111          		{
   3112          			Sts->Rvs1Attn1_LTE_A1 = 0;
   3113          		}
   3114          		
   3115          		Sts->Rvs1Attn1_LTE_A1	= MinMaxAttnCheck(Sts->Rvs1Attn1_LTE_A1, DIGATTENMAX,ATTENMIN);
   3116          	}
   3117          }
   3118          
   3119          
   3120          void TRIO_AlarmCheck(void)
   3121          {
   3122          	__Dnr_Sts  *Sts = tDnrSts; 
   3123          	INT8U AlmSts = 0;
   3124          
   3125          	if(Sts->FwdAmpOnOff_3G == Disable)
   3126          	{
   3127          		Sts->AlmSts.FwdAmpOnOff_3G = Disable;
   3128          	}
   3129          	else
   3130          	{
   3131          		if(tDnrSts->ShutDownOnOff_3G == Enable) 
   3132          		{
   3133          			AlmSts  = Sts->AlmSts.LocalFail_3G;
   3134          		}
   3135          		if(AlmSts)
   3136          		{
   3137          			Sts->AlmSts.FwdAmpOnOff_3G = Disable;
   3138          			FlagAmpOnOff_3G = SET;
   3139          			if(Sts->AlmSts.LocalFail_3G)		tDnrSts->AmpOffCase_3G = __PllFail;
   3140          		}
   3141          		else
   3142          		{
   3143          			Sts->AlmSts.FwdAmpOnOff_3G = Enable;
   3144          			if(FlagAmpOnOff_3G)
   3145          			{
   3146          
   3147          				tDnrSts->AmpOffCase_3G = __UsrCtrl;
   3148          				FlagAmpOnOff_3G = RESET;
   3149          				AttnOutBufferInit();
   3150          			}
   3151          		}
   3152          	}
   3153          
   3154          	if(Sts->FwdAmpOnOff_2G == Disable)
   3155          	{
   3156          		Sts->AlmSts.FwdAmpOnOff_2G = Disable;
   3157          	}
   3158          	else
   3159          	{
   3160          		if(tDnrSts->ShutDownOnOff_2G == Enable) 
   3161          		{
   3162          			AlmSts  = Sts->AlmSts.LocalFail_CDMALTE;	
   3163          		}
   3164          		if(AlmSts)
   3165          		{
   3166          			Sts->AlmSts.FwdAmpOnOff_2G = Disable;
   3167          			FlagAmpOnOff_2G = SET;
   3168          			
   3169          			if(Sts->AlmSts.LocalFail_CDMALTE)		tDnrSts->AmpOffCase_2G = __PllFail;
   3170          
   3171          		}
   3172          		else
   3173          		{
   3174          			Sts->AlmSts.FwdAmpOnOff_2G = Enable;
   3175          
   3176          			if(FlagAmpOnOff_2G)
   3177          			{
   3178          				tDnrSts->AmpOffCase_2G = __UsrCtrl;
   3179          				FlagAmpOnOff_2G = RESET;
   3180          				AttnOutBufferInit();
   3181          			}
   3182          		}
   3183          	}
   3184          
   3185          	
   3186          	if(Sts->FwdAmpOnOff_LTE == Disable)
   3187          	{
   3188          		Sts->AlmSts.FwdAmpOnOff_LTE = Disable;
   3189          	}
   3190          	else
   3191          	{
   3192          		if(tDnrSts->ShutDownOnOff_LTE == Enable) 
   3193          		{
   3194          			AlmSts  = Sts->AlmSts.LocalFail_CDMALTE;
   3195          			if(AlarmCheck_LTE == 0) AlmSts  += 1;
   3196          		}
   3197          		if(AlmSts)
   3198          		{
   3199          			Sts->AlmSts.FwdAmpOnOff_LTE = Disable;
   3200          			FlagAmpOnOff_LTE = SET;
   3201          			if(Sts->AlmSts.LocalFail_CDMALTE)		tDnrSts->AmpOffCase_LTE = __PllFail;
   3202          		}
   3203          		else
   3204          		{
   3205          			Sts->AlmSts.FwdAmpOnOff_LTE= Enable;
   3206          
   3207          			if(FlagAmpOnOff_LTE)
   3208          			{
   3209          				tDnrSts->AmpOffCase_LTE = __UsrCtrl;
   3210          				FlagAmpOnOff_LTE = RESET;
   3211          				AttnOutBufferInit();
   3212          			}
   3213          		}
   3214          	}
   3215          	
   3216          
   3217          	if(Sts->FwdAmpOnOff_LTE_A1 == Disable)
   3218          	{
   3219          		Sts->AlmSts.FwdAmpOnOff_LTE_A1= Disable;
   3220          	}
   3221          	else
   3222          	{
   3223          		if(tDnrSts->ShutDownOnOff_LTE_A1 == Enable) 
   3224          		{
   3225          
   3226          			AlmSts  = Sts->AlmSts.LocalFail_LTE_A1;
   3227          			AlmSts  += Sts->AlmSts.LocalFail_LTE_A2;
   3228          			if(AlarmCheck_LTE_A1 == 0) AlmSts  += 1;
   3229          		}
   3230          		if(AlmSts)
   3231          		{
   3232          			Sts->AlmSts.FwdAmpOnOff_LTE_A1 = Disable;
   3233          			FlagAmpOnOff_LTE_A1 = SET;
   3234          
   3235          			if(Sts->AlmSts.LocalFail_LTE_A1)		
   3236          			{
   3237          				tDnrSts->AmpOffCase_LTE_A1 = __PllFail;
   3238          				tDnrSts->AmpOffCase_LTE_A2 = __PllFail;
   3239          			}
   3240          		}
   3241          		else
   3242          		{
   3243          			Sts->AlmSts.FwdAmpOnOff_LTE_A1= Enable;
   3244          
   3245          			if(FlagAmpOnOff_LTE_A1)
   3246          			{
   3247          				tDnrSts->AmpOffCase_LTE_A1 = __UsrCtrl;
   3248          				FlagAmpOnOff_LTE_A1 = RESET;
   3249          				AttnOutBufferInit();
   3250          			}
   3251          		}
   3252          	}
   3253          
   3254          	
   3255          	if(Sts->FwdAmpOnOff_LTE_A2 == Disable)
   3256          	{
   3257          		Sts->AlmSts.FwdAmpOnOff_LTE_A2 = Disable;
   3258          	}
   3259          	else
   3260          	{
   3261          		if(tDnrSts->ShutDownOnOff_LTE_A2 == Enable) 
   3262          		{
   3263          			AlmSts	= Sts->AlmSts.LocalFail_LTE_A1;
   3264          			AlmSts	+= Sts->AlmSts.LocalFail_LTE_A2;
   3265          			if(AlarmCheck_LTE_A2 == 0) AlmSts  += 1;
   3266          		}
   3267          		if(AlmSts)
   3268          		{
   3269          			Sts->AlmSts.FwdAmpOnOff_LTE_A2 = Disable;
   3270          			FlagAmpOnOff_LTE_A2 = SET;
   3271          			
   3272          			if(Sts->AlmSts.LocalFail_LTE_A2)		
   3273          			{
   3274          				tDnrSts->AmpOffCase_LTE_A1 = __PllFail;
   3275          				tDnrSts->AmpOffCase_LTE_A2 = __PllFail;
   3276          			}
   3277          		}
   3278          		else
   3279          		{
   3280          			Sts->AlmSts.FwdAmpOnOff_LTE_A2= Enable;
   3281          
   3282          			if(FlagAmpOnOff_LTE_A2)
   3283          			{
   3284          				
   3285          				tDnrSts->AmpOffCase_LTE_A2 = __UsrCtrl;
   3286          				FlagAmpOnOff_LTE_A2 = RESET;
   3287          				AttnOutBufferInit();
   3288          			}
   3289          		}
   3290          	}	
   3291          
   3292          	if(Sts->FwdAmp1OnOff_LTE == Disable)
   3293          	{
   3294          		Sts->AlmSts.FwdAmp1OnOff_LTE = Disable;
   3295          	}
   3296          	else
   3297          	{
   3298          		if(tDnrSts->ShutDownOnOff_LTE1 == Enable) 
   3299          		{
   3300          			AlmSts	= Sts->AlmSts.LocalFail_LTE_1;
   3301          			if(AlarmCheck_LTE_1 == 0) AlmSts  += 1;
   3302          		}
   3303          
   3304          		if(AlmSts)
   3305          		{
   3306          			Sts->AlmSts.FwdAmp1OnOff_LTE = Disable;
   3307          			FlagAmp1OnOff_LTE = SET;
   3308          			
   3309          			if(Sts->AlmSts.LocalFail_LTE_1)		tDnrSts->Amp1OffCase_LTE = __PllFail;
   3310          		}
   3311          		else
   3312          		{
   3313          			Sts->AlmSts.FwdAmp1OnOff_LTE= Enable;
   3314          
   3315          			if(FlagAmp1OnOff_LTE)
   3316          			{
   3317          				tDnrSts->Amp1OffCase_LTE = __UsrCtrl;
   3318          				FlagAmp1OnOff_LTE = RESET;
   3319          				AttnOutBufferInit();
   3320          			}
   3321          		}
   3322          	}
   3323          
   3324          
   3325          	
   3326          	if(Sts->FwdAmp1OnOff_LTE_A1 == Disable)
   3327          	{
   3328          		Sts->AlmSts.FwdAmp1OnOff_LTE_A1= Disable;
   3329          	}
   3330          	else
   3331          	{
   3332          		if(tDnrSts->ShutDownOnOff_LTE_A1_1 == Enable) 
   3333          		{
   3334          			AlmSts  = Sts->AlmSts.LocalFail_LTE_A1_1;
   3335          			AlmSts  += Sts->AlmSts.LocalFail_LTE_A2_1;
   3336          			if(AlarmCheck_LTE_A1_1 == 0) AlmSts  += 1;
   3337          			
   3338          		}
   3339          		if(AlmSts)
   3340          		{
   3341          			Sts->AlmSts.FwdAmp1OnOff_LTE_A1 = Disable;
   3342          			FlagAmp1OnOff_LTE_A1 = SET;
   3343          			if(Sts->AlmSts.LocalFail_LTE_A1_1)
   3344          			{
   3345          				tDnrSts->Amp1OffCase_LTE_A1 = __PllFail;
   3346          				tDnrSts->Amp1OffCase_LTE_A2 = __PllFail;
   3347          			}
   3348          		}
   3349          		else
   3350          		{
   3351          			Sts->AlmSts.FwdAmp1OnOff_LTE_A1= Enable;
   3352          
   3353          			if(FlagAmp1OnOff_LTE_A1)
   3354          			{
   3355          				tDnrSts->Amp1OffCase_LTE_A1 = __UsrCtrl;
   3356          				FlagAmp1OnOff_LTE_A1 = RESET;
   3357          				AttnOutBufferInit();
   3358          			}
   3359          		}
   3360          	}
   3361          
   3362          	
   3363          
   3364          	if(Sts->FwdAmp1OnOff_LTE_A2 == Disable)
   3365          	{
   3366          		Sts->AlmSts.FwdAmp1OnOff_LTE_A2 = Disable;
   3367          	}
   3368          	else
   3369          	{
   3370          		if(tDnrSts->ShutDownOnOff_LTE_A2_1 == Enable) 
   3371          		{
   3372          			AlmSts  = Sts->AlmSts.LocalFail_LTE_A1_1;
   3373          			AlmSts  += Sts->AlmSts.LocalFail_LTE_A2_1;
   3374          			if(AlarmCheck_LTE_A2_1 == 0) AlmSts  += 1;
   3375          		}
   3376          		if(AlmSts)
   3377          		{
   3378          			Sts->AlmSts.FwdAmp1OnOff_LTE_A2 = Disable;
   3379          			FlagAmp1OnOff_LTE_A2 = SET;
   3380          			
   3381          			if(Sts->AlmSts.LocalFail_LTE_A2_1)
   3382          			{
   3383          				tDnrSts->Amp1OffCase_LTE_A1 = __PllFail;
   3384          				tDnrSts->Amp1OffCase_LTE_A2 = __PllFail;
   3385          			}
   3386          		}
   3387          		else
   3388          		{
   3389          			Sts->AlmSts.FwdAmp1OnOff_LTE_A2= Enable;
   3390          
   3391          			if(FlagAmp1OnOff_LTE_A2)
   3392          			{
   3393          				tDnrSts->Amp1OffCase_LTE_A2 = __UsrCtrl;
   3394          				FlagAmp1OnOff_LTE_A2 = RESET;
   3395          				AttnOutBufferInit();
   3396          			}
   3397          		}
   3398          	}
   3399          
   3400          }
   3401          
   3402          void ShutdownFunc(INT8U SysPath, INT8U Path)
   3403          {
   3404          	INT8U	OffReason, OffTime;
   3405          	INT16U	SdTimer;
   3406          	INT16S	DetValue, LmtValue;
   3407          	
   3408          	INT8U	*AmpOnOff;
   3409          	INT8U	AlarmChk = 0;
   3410          
   3411          	__Dnr_Sts  *Sts = tDnrSts; 
   3412          
   3413          	if(Ac_Sd_Flag == 1)	return;
   3414          	//---------------------------------------------------------------------//
   3415          	switch(Path)
   3416          	{
   3417          		//---------------------------------------------------------------------//
   3418          		// 2G
   3419          		case SD_FI_2G:
   3420          			OffReason = CASE_OverInPwr;
   3421          			SdTimer = TimerSD_2G;
   3422          			DetValue = -tDnrSts->FwdInPwr_2G;
   3423          			LmtValue = tDnrSts->OverInAlarmLmt_2G/2;	//과입력 Shutdown -11±2dBm
   3424          
   3425          			AmpOnOff = &Sts->FwdAmpOnOff_2G;
   3426          			#ifdef RvsSD_Debug
   3427          			if((Sts->AGCOnOff_CDMALTE == Enable)&&(Sts->FwdAgcAttn_2G == AGCMAX_2G))
   3428          			{
   3429          				AlarmChk = SET;
   3430          			}
   3431          			else if(Sts->AGCOnOff_CDMALTE == Disable)
   3432          			{
   3433          				AlarmChk = SET;
   3434          			}
   3435          			#endif			
   3436          			break;
   3437          
   3438          		case SD_FO_2G:
   3439          			OffReason = CASE_OverPwr;
   3440          			SdTimer = TimerSD_2G;
   3441          			DetValue = Sts->FwdOutPwr_2G[0]*10 + Sts->FwdOutPwr_2G[1];
   3442          			LmtValue = Sts->FwdOutHighLmt_2G[0]*10 + Sts->FwdOutHighLmt_2G[1];
   3443          
   3444          			AmpOnOff = &Sts->FwdAmpOnOff_2G;
   3445          			#ifdef RvsSD_Debug
   3446          			if((Sts->AGCOnOff_CDMALTE == Enable)&&(Sts->FwdAgcAttn_2G == AGCMAX_2G))
   3447          			{
   3448          				AlarmChk = SET;
   3449          			}
   3450          			else if(Sts->AGCOnOff_CDMALTE == Disable)
   3451          			{
   3452          				AlarmChk = SET;
   3453          			}			
   3454          			#endif
   3455          			break;
   3456          
   3457          		case SD_RO_2G:
   3458          			OffReason = CASE_RvsFail;
   3459          			SdTimer = TimerSD_2G;
   3460          			DetValue = Sts->RvsOutPwr_2G[0]*10 + Sts->RvsOutPwr_2G[1];
   3461          			LmtValue = Sts->RvsOutUpperLmt_2G[0]*10 + Sts->RvsOutUpperLmt_2G[1];
   3462          
   3463          			AmpOnOff = &Sts->FwdAmpOnOff_2G;
   3464          			#ifdef RvsSD_Debug
   3465          			if((Sts->AGCOnOff_CDMALTE == Enable)&&(Sts->RvsAlcAttn_2G == tRvsALCMAX_2G))
   3466          			{
   3467          				AlarmChk = SET;
   3468          			}
   3469          			else if(Sts->AGCOnOff_CDMALTE == Disable)
   3470          			{
   3471          				AlarmChk = SET;
   3472          			}			
   3473          			#endif
   3474          			break;
   3475          
   3476          		//---------------------------------------------------------------------//
   3477          		// LTE
   3478          		case SD_FI_LTE:
   3479          			OffReason = CASE_OverInPwr;
   3480          			SdTimer = TimerSD_LTE;
   3481          			DetValue = -tDnrSts->FwdInPwr_LTE;
   3482          			LmtValue = tDnrSts->OverInAlarmLmt_LTE/2;	 //과입력 Shutdown -8dBm
   3483          
   3484          			AmpOnOff = &Sts->FwdAmpOnOff_LTE;
   3485          			#ifdef RvsSD_Debug
   3486          			if((Sts->AGCOnOff_CDMALTE == Enable)&&(Sts->FwdAgcAttn_LTE == AGCMAX_LTE))
   3487          			{
   3488          				AlarmChk = SET;
   3489          			}
   3490          			else if(Sts->AGCOnOff_CDMALTE == Disable)
   3491          			{
   3492          				AlarmChk = SET;
   3493          			}			
   3494          			#endif	
   3495          			break;
   3496          
   3497          		case SD_FO_LTE:
   3498          			OffReason = CASE_OverPwr;
   3499          			SdTimer = TimerSD_LTE;
   3500          			DetValue = Sts->FwdOutPwr_LTE[0]*10 + Sts->FwdOutPwr_LTE[1];
   3501          			LmtValue = Sts->FwdOutHighLmt_LTE[0]*10 + Sts->FwdOutHighLmt_LTE[1];
   3502          
   3503          			AmpOnOff = &Sts->FwdAmpOnOff_LTE;
   3504          			#ifdef RvsSD_Debug
   3505          			if((Sts->AGCOnOff_CDMALTE == Enable)&&(Sts->FwdAgcAttn_LTE == AGCMAX_LTE))
   3506          			{
   3507          				AlarmChk = SET;
   3508          			}
   3509          			else if(Sts->AGCOnOff_CDMALTE == Disable)
   3510          			{
   3511          				AlarmChk = SET;
   3512          			}			
   3513          			#endif
   3514          			break;
   3515          
   3516          		case SD_RO_LTE:
   3517          			OffReason = CASE_RvsFail;
   3518          			SdTimer = TimerSD_LTE;
   3519          			DetValue = Sts->RvsOutPwr_LTE[0]*10 + Sts->RvsOutPwr_LTE[1];
   3520          			LmtValue = Sts->RvsOutUpperLmt_LTE[0]*10 + Sts->RvsOutUpperLmt_LTE[1];
   3521          
   3522          			AmpOnOff = &Sts->FwdAmpOnOff_LTE;
   3523          			#ifdef RvsSD_Debug
   3524          			if((Sts->AGCOnOff_CDMALTE == Enable)&&(Sts->RvsAlcAttn_LTE == tRvsALCMAX_LTE))
   3525          			{
   3526          				AlarmChk = SET;
   3527          			}
   3528          			else if(Sts->AGCOnOff_CDMALTE == Disable)
   3529          			{
   3530          				AlarmChk = SET;
   3531          			}
   3532          			#endif				
   3533          			break;
   3534          
   3535          		//---------------------------------------------------------------------//
   3536          		// 3G
   3537          		case SD_FI_3G:
   3538          			OffReason = CASE_OverInPwr;
   3539          			SdTimer = TimerSD_3G;
   3540          			DetValue		= - tDnrSts->FwdInPwr_3G;
   3541          			LmtValue		= tDnrSts->OverInAlarmLmt_3G/2;	//과입력 Shutdown  -19dBm
   3542          
   3543          			AmpOnOff = &Sts->FwdAmpOnOff_3G;
   3544          			#ifdef RvsSD_Debug
   3545          			if((Sts->AGCOnOff_3G == Enable)&&(Sts->FwdAgcAttn_3G == AGCMAX_3G))
   3546          			{
   3547          				AlarmChk = SET;
   3548          			}
   3549          			else if(Sts->AGCOnOff_3G == Disable)
   3550          			{
   3551          				AlarmChk = SET;
   3552          			}			
   3553          			#endif				
   3554          			break;
   3555          
   3556          		case SD_FO_3G:
   3557          			OffReason = CASE_OverPwr;
   3558          			SdTimer = TimerSD_3G;
   3559          			DetValue = Sts->FwdOutPwr_3G[0]*10 + Sts->FwdOutPwr_3G[1];
   3560          			LmtValue = Sts->FwdOutHighLmt_3G[0]*10 + Sts->FwdOutHighLmt_3G[1];
   3561          
   3562          			AmpOnOff = &Sts->FwdAmpOnOff_3G;
   3563          			#ifdef RvsSD_Debug
   3564          			if((Sts->AGCOnOff_3G == Enable)&&(Sts->FwdAgcAttn_3G == AGCMAX_3G))
   3565          			{
   3566          				AlarmChk = SET;
   3567          			}
   3568          			else if(Sts->AGCOnOff_3G == Disable)
   3569          			{
   3570          				AlarmChk = SET;
   3571          			}				
   3572          			#endif	
   3573          			break;
   3574          
   3575          		case SD_RO_3G:
   3576          			OffReason = CASE_RvsFail;
   3577          			SdTimer = TimerSD_3G;
   3578          			DetValue = Sts->RvsOutPwr_3G[0]*10 + Sts->RvsOutPwr_3G[1];
   3579          			LmtValue = Sts->RvsOutUpperLmt_3G[0]*10 + Sts->RvsOutUpperLmt_3G[1];
   3580          
   3581          			AmpOnOff = &Sts->FwdAmpOnOff_3G;
   3582          			#ifdef RvsSD_Debug
   3583          			if((Sts->AGCOnOff_3G == Enable)&&(Sts->RvsAlcAttn_3G == tRvsALCMAX_3G))
   3584          			{
   3585          				AlarmChk = SET;
   3586          			}
   3587          			else if(Sts->AGCOnOff_3G == Disable)
   3588          			{
   3589          				AlarmChk = SET;
   3590          			}				
   3591          			#endif				
   3592          			break;
   3593          
   3594          		//---------------------------------------------------------------------//
   3595          		// LTE-A1
   3596          		case SD_FI_LTE_A1:
   3597          			OffReason = CASE_OverInPwr;
   3598          			SdTimer = TimerSD_LTE_A1;
   3599          			DetValue		= -tDnrSts->FwdInPwr_LTE_A1;
   3600          			LmtValue		= tDnrSts->OverInAlarmLmt_LTE_A1/2;	// 과입력 Shutdown -15dBm
   3601          
   3602          			AmpOnOff = &Sts->FwdAmpOnOff_LTE_A1;
   3603          			#ifdef RvsSD_Debug
   3604          			if((Sts->AGCOnOff_LTE_A_0 == Enable)&&(Sts->FwdAgcAttn_LTE_A1 == AGCMAX_LTE_A1))
   3605          			{
   3606          				AlarmChk = SET;
   3607          			}
   3608          			else if(Sts->AGCOnOff_LTE_A_0 == Disable)
   3609          			{
   3610          				AlarmChk = SET;
   3611          			}				
   3612          			#endif	
   3613          			break;
   3614          
   3615          		case SD_FO_LTE_A1:
   3616          			OffReason = CASE_OverPwr;
   3617          			SdTimer = TimerSD_LTE_A1;
   3618          			DetValue = Sts->FwdOutPwr_LTE_A1[0]*10 + Sts->FwdOutPwr_LTE_A1[1];
   3619          			LmtValue = Sts->FwdOutHighLmt_LTE_A1[0]*10 + Sts->FwdOutHighLmt_LTE_A1[1];
   3620          
   3621          			AmpOnOff = &Sts->FwdAmpOnOff_LTE_A1;
   3622          			#ifdef RvsSD_Debug
   3623          			if((Sts->AGCOnOff_LTE_A_0 == Enable)&&(Sts->FwdAgcAttn_LTE_A1 == AGCMAX_LTE_A1))
   3624          			{
   3625          				AlarmChk = SET;
   3626          			}
   3627          			else if(Sts->AGCOnOff_LTE_A_0 == Disable)
   3628          			{
   3629          				AlarmChk = SET;
   3630          			}				
   3631          			#endif	
   3632          			break;
   3633          
   3634          		case SD_RO_LTE_A1:
   3635          			OffReason = CASE_RvsFail;
   3636          			SdTimer = TimerSD_LTE_A1;
   3637          			DetValue = Sts->RvsOutPwr_LTE_A1[0]*10 + Sts->RvsOutPwr_LTE_A1[1];
   3638          			LmtValue = (Sts->RvsOutUpperLmt_LTE_A1[0]*10 + Sts->RvsOutUpperLmt_LTE_A1[1]);
   3639          
   3640          			AmpOnOff = &Sts->FwdAmpOnOff_LTE_A1;
   3641          			#ifdef RvsSD_Debug
   3642          			if((Sts->AGCOnOff_LTE_A_0 == Enable)&&(Sts->RvsAlcAttn_LTE_A1 == tRvsALCMAX_LTE_A1))
   3643          			{
   3644          				AlarmChk = SET;
   3645          			}
   3646          			else if(Sts->AGCOnOff_LTE_A_0 == Disable)
   3647          			{
   3648          				AlarmChk = SET;
   3649          			}				
   3650          			#endif				
   3651          			break;
   3652          			
   3653          		//---------------------------------------------------------------------//
   3654          		// LTE-A2
   3655          		case SD_FI_LTE_A2:
   3656          			OffReason = CASE_OverInPwr;
   3657          			SdTimer = TimerSD_LTE_A2;
   3658          			DetValue		= -tDnrSts->FwdInPwr_LTE_A2;
   3659          			LmtValue		= tDnrSts->OverInAlarmLmt_LTE_A2/2;	// 과입력 Shutdown -15dBm
   3660          
   3661          			AmpOnOff = &Sts->FwdAmpOnOff_LTE_A2;
   3662          			#ifdef RvsSD_Debug
   3663          			if((Sts->AGCOnOff_LTE_A_0 == Enable)&&(Sts->FwdAgcAttn_LTE_A2 == AGCMAX_LTE_A1))
   3664          			{
   3665          				AlarmChk = SET;
   3666          			}
   3667          			else if(Sts->AGCOnOff_LTE_A_0 == Disable)
   3668          			{
   3669          				AlarmChk = SET;
   3670          			}				
   3671          			#endif					
   3672                  break;
   3673          
   3674          		case SD_FO_LTE_A2:
   3675          			OffReason = CASE_OverPwr;
   3676          			SdTimer = TimerSD_LTE_A2;
   3677          			DetValue = Sts->FwdOutPwr_LTE_A2[0]*10 + Sts->FwdOutPwr_LTE_A2[1];
   3678          			LmtValue = Sts->FwdOutHighLmt_LTE_A2[0]*10 + Sts->FwdOutHighLmt_LTE_A2[1];
   3679          
   3680          			AmpOnOff = &Sts->FwdAmpOnOff_LTE_A2;
   3681          			#ifdef RvsSD_Debug
   3682          			if((Sts->AGCOnOff_LTE_A_0 == Enable)&&(Sts->FwdAgcAttn_LTE_A2 == AGCMAX_LTE_A1))
   3683          			{
   3684          				AlarmChk = SET;
   3685          			}
   3686          			else if(Sts->AGCOnOff_LTE_A_0 == Disable)
   3687          			{
   3688          				AlarmChk = SET;
   3689          			}				
   3690          			#endif					
   3691                  break;
   3692          
   3693          		case SD_RO_LTE_A2:
   3694          			OffReason = CASE_RvsFail;
   3695          			SdTimer = TimerSD_LTE_A2;
   3696          			DetValue = Sts->RvsOutPwr_LTE_A2[0]*10 + Sts->RvsOutPwr_LTE_A2[1];
   3697          			LmtValue = (Sts->RvsOutUpperLmt_LTE_A2[0]*10 + Sts->RvsOutUpperLmt_LTE_A2[1]);
   3698          
   3699          			AmpOnOff = &Sts->FwdAmpOnOff_LTE_A2;
   3700          			#ifdef RvsSD_Debug
   3701          			if((Sts->AGCOnOff_LTE_A_0 == Enable)&&(Sts->RvsAlcAttn_LTE_A2 == tRvsALCMAX_LTE_A1))
   3702          			{
   3703          				AlarmChk = SET;
   3704          			}
   3705          			else if(Sts->AGCOnOff_LTE_A_0 == Disable)
   3706          			{
   3707          				AlarmChk = SET;
   3708          			}				
   3709          			#endif
   3710          
   3711          			break;
   3712          
   3713          		// LTE MIMO
   3714          		case SD_FI_LTE_1:
   3715          			OffReason = CASE_OverInPwr;
   3716          			SdTimer = TimerSD_LTE_1;
   3717          			DetValue = -tDnrSts->Fwd1InPwr_LTE;
   3718          			LmtValue = tDnrSts->OverInAlarmLmt_LTE/2;	 //과입력 Shutdown -8dBm
   3719          
   3720          			AmpOnOff = &Sts->FwdAmp1OnOff_LTE;
   3721          			#ifdef RvsSD_Debug
   3722          			if((Sts->AGC1OnOff_LTE == Enable)&&(Sts->Fwd1AgcAttn_LTE == AGCMAX_LTE))
   3723          			{
   3724          				AlarmChk = SET;
   3725          			}
   3726          			else if(Sts->AGC1OnOff_LTE == Disable)
   3727          			{
   3728          				AlarmChk = SET;
   3729          			}				
   3730          			#endif	
   3731          
   3732          			break;
   3733          
   3734          		case SD_FO_LTE_1:
   3735          			OffReason = CASE_OverPwr;
   3736          			SdTimer = TimerSD_LTE_1;
   3737          			DetValue = Sts->Fwd1OutPwr_LTE[0]*10 + Sts->Fwd1OutPwr_LTE[1];
   3738          			LmtValue = Sts->Fwd1OutHighLmt_LTE[0]*10 + Sts->Fwd1OutHighLmt_LTE[1];
   3739          			AmpOnOff = &Sts->FwdAmp1OnOff_LTE;
   3740          			#ifdef RvsSD_Debug
   3741          			if((Sts->AGC1OnOff_LTE == Enable)&&(Sts->Fwd1AgcAttn_LTE == AGCMAX_LTE))
   3742          			{
   3743          				AlarmChk = SET;
   3744          			}
   3745          			else if(Sts->AGC1OnOff_LTE == Disable)
   3746          			{
   3747          				AlarmChk = SET;
   3748          			}				
   3749          			#endif	
   3750          			
   3751          			break;
   3752          
   3753          		case SD_RO_LTE_1:
   3754          			OffReason = CASE_RvsFail;
   3755          			SdTimer = TimerSD_LTE_1;
   3756          			DetValue = Sts->Rvs1OutPwr_LTE[0]*10 + Sts->Rvs1OutPwr_LTE[1];
   3757          			LmtValue = Sts->Rvs1OutUpperLmt_LTE[0]*10 + Sts->Rvs1OutUpperLmt_LTE[1];
   3758          
   3759          			AmpOnOff = &Sts->FwdAmp1OnOff_LTE;
   3760          #if 1
   3761          			#ifdef RvsSD_Debug
   3762          //			if((Sts->AGC1OnOff_LTE == Enable)&&(Sts->Rvs1AlcAttn_LTE == AGCMAX_LTE))
   3763          			if((Sts->AGC1OnOff_LTE == Enable)&&(Sts->Rvs1AlcAttn_LTE == tRvsALCMAX_LTE))
   3764          			{
   3765          				AlarmChk = SET;
   3766          			}
   3767          			else if(Sts->AGC1OnOff_LTE == Disable)
   3768          			{
   3769          				AlarmChk = SET;
   3770          			}
   3771          			#endif	
   3772          		#endif	
   3773          		//	AlarmChk = SET;
   3774          
   3775          			break;
   3776          
   3777          		// LTE-A1 MIMO
   3778          		case SD_FI_LTE_A1_1:
   3779          			OffReason = CASE_OverInPwr;
   3780          			SdTimer = TimerSD_LTE_A1_1;
   3781          			DetValue		= -tDnrSts->Fwd1InPwr_LTE_A1;
   3782          			LmtValue		= tDnrSts->OverInAlarmLmt_LTE_A1/2;	// 과입력 Shutdown -15dBm
   3783          
   3784          			AmpOnOff = &Sts->FwdAmp1OnOff_LTE_A1;
   3785          			#ifdef RvsSD_Debug
   3786          			if((Sts->AGCOnOff_LTE_A_1 == Enable)&&(Sts->Fwd1AgcAttn_LTE_A1 == AGCMAX_LTE_A1))
   3787          			{
   3788          				AlarmChk = SET;
   3789          			}
   3790          			else if(Sts->AGCOnOff_LTE_A_1 == Disable)
   3791          			{
   3792          				AlarmChk = SET;
   3793          			}
   3794          			#endif	
   3795          
   3796          			break;
   3797          
   3798          		case SD_FO_LTE_A1_1:
   3799          			OffReason = CASE_OverPwr;
   3800          			SdTimer = TimerSD_LTE_A1_1;
   3801          			DetValue = Sts->Fwd1OutPwr_LTE_A1[0]*10 + Sts->Fwd1OutPwr_LTE_A1[1];
   3802          			LmtValue = Sts->Fwd1OutHighLmt_LTE_A1[0]*10 + Sts->Fwd1OutHighLmt_LTE_A1[1];
   3803          
   3804          			AmpOnOff = &Sts->FwdAmp1OnOff_LTE_A1;
   3805          			#ifdef RvsSD_Debug
   3806          			if((Sts->AGCOnOff_LTE_A_1 == Enable)&&(Sts->Fwd1AgcAttn_LTE_A1 == AGCMAX_LTE_A1))
   3807          			{
   3808          				AlarmChk = SET;
   3809          			}
   3810          			else if(Sts->AGCOnOff_LTE_A_1 == Disable)
   3811          			{
   3812          				AlarmChk = SET;
   3813          			}			
   3814          			#endif				
   3815          			break;
   3816          
   3817          		case SD_RO_LTE_A1_1:
   3818          			OffReason = CASE_RvsFail;
   3819          			SdTimer = TimerSD_LTE_A1_1;
   3820          			DetValue = Sts->Rvs1OutPwr_LTE_A1[0]*10 + Sts->Rvs1OutPwr_LTE_A1[1];
   3821          			LmtValue = (Sts->Rvs1OutUpperLmt_LTE_A1[0]*10 + Sts->Rvs1OutUpperLmt_LTE_A1[1]);
   3822          
   3823          			AmpOnOff = &Sts->FwdAmp1OnOff_LTE_A1;
   3824          			#ifdef RvsSD_Debug
   3825          			if((Sts->AGCOnOff_LTE_A_1 == Enable)&&(Sts->Rvs1AlcAttn_LTE_A1 == tRvsALCMAX_LTE_A1))
   3826          			{
   3827          				AlarmChk = SET;
   3828          			}
   3829          			else if(Sts->AGCOnOff_LTE_A_1 == Disable)
   3830          			{
   3831          				AlarmChk = SET;
   3832          			}			
   3833          			#endif				
   3834          			break;
   3835          			
   3836          		//---------------------------------------------------------------------//
   3837          		// LTE-A2
   3838          		case SD_FI_LTE_A2_1:
   3839          			OffReason 	= CASE_OverInPwr;
   3840          			SdTimer 	= TimerSD_LTE_A2_1;
   3841          			DetValue	= -tDnrSts->Fwd1InPwr_LTE_A2;
   3842          			LmtValue	= tDnrSts->OverInAlarmLmt_LTE_A2/2;	// 과입력 Shutdown -15dBm
   3843          
   3844          			AmpOnOff = &Sts->FwdAmpOnOff_LTE_A2;
   3845          			#ifdef RvsSD_Debug
   3846          			if((Sts->AGCOnOff_LTE_A_1 == Enable)&&(Sts->Fwd1AgcAttn_LTE_A2 == AGCMAX_LTE_A1))
   3847          			{
   3848          				AlarmChk = SET;
   3849          			}
   3850          			else if(Sts->AGCOnOff_LTE_A_1 == Disable)
   3851          			{
   3852          				AlarmChk = SET;
   3853          			}			
   3854          			#endif				
   3855          			break;
   3856          
   3857          		case SD_FO_LTE_A2_1:
   3858          			OffReason = CASE_OverPwr;
   3859          			SdTimer = TimerSD_LTE_A2_1;
   3860          			DetValue = Sts->Fwd1OutPwr_LTE_A2[0]*10 + Sts->Fwd1OutPwr_LTE_A2[1];
   3861          			LmtValue = Sts->Fwd1OutHighLmt_LTE_A2[0]*10 + Sts->Fwd1OutHighLmt_LTE_A2[1];
   3862          
   3863          			AmpOnOff = &Sts->FwdAmp1OnOff_LTE_A2;
   3864          			#ifdef RvsSD_Debug
   3865          			if((Sts->AGCOnOff_LTE_A_1 == Enable)&&(Sts->Fwd1AgcAttn_LTE_A2 == AGCMAX_LTE_A1))
   3866          			{
   3867          				AlarmChk = SET;
   3868          			}
   3869          			else if(Sts->AGCOnOff_LTE_A_1 == Disable)
   3870          			{
   3871          				AlarmChk = SET;
   3872          			}			
   3873          			#endif	
   3874          			break;
   3875          
   3876          		case SD_RO_LTE_A2_1:
   3877          			OffReason = CASE_RvsFail;
   3878          			SdTimer = TimerSD_LTE_A2_1;
   3879          			DetValue = Sts->Rvs1OutPwr_LTE_A2[0]*10 + Sts->Rvs1OutPwr_LTE_A2[1];
   3880          			LmtValue = (Sts->Rvs1OutUpperLmt_LTE_A2[0]*10 + Sts->Rvs1OutUpperLmt_LTE_A2[1]);
   3881          
   3882          			AmpOnOff = &Sts->FwdAmp1OnOff_LTE_A2;
   3883          			#ifdef RvsSD_Debug
   3884          			if((Sts->AGCOnOff_LTE_A_1 == Enable)&&(Sts->Rvs1AlcAttn_LTE_A2 == tRvsALCMAX_LTE_A1))
   3885          			{
   3886          				AlarmChk = SET;
   3887          			}
   3888          			else if(Sts->AGCOnOff_LTE_A_1 == Disable)
   3889          			{
   3890          				AlarmChk = SET;
   3891          			}			
   3892          			#endif				
   3893          			break;
   3894          
   3895          	}
   3896          
   3897          	//---------------------------------------------------------------------//
   3898          	switch(Sd_Step[Path])
   3899          	{
   3900          		case 0:
   3901          			Sd_Step[Path] = 0;
   3902          			Sd_Cnt[Path] = 0;
   3903          
   3904          			if((DetValue >= LmtValue)&& (AlarmChk == SET))
   3905          			{
   3906          				if((Sd_Path[SysPath] == 0)&&(*AmpOnOff == _Enable))
   3907          				{
   3908          					TimerRegist(SdTimer, Time1Sec*5);
   3909          					Sd_Step[Path] = 1;
   3910          					Sd_Path[SysPath] = 1;
   3911          				}
   3912          			}
   3913          			break;
   3914          
   3915          		case 1:	// Amp Off Check
   3916          			if(DetValue < (LmtValue))	// 정상...
   3917          			{
   3918          				Sd_Step[Path] = 0;
   3919          				Sd_Path[SysPath] = 0;
   3920          				break;
   3921          			}
   3922          			
   3923          			if(!TimeOverCheck(SdTimer)) return;
   3924          			*AmpOnOff = _Disable;
   3925          			if(Sd_Cnt[Path] == 2)	OffTime = SD_AMP_OFF_30M;
   3926          			else					OffTime = SD_AMP_OFF_5S;
   3927          			AmpBitReason(SysPath, _Disable, OffReason, OffTime);
   3928          			
   3929          			TimerRegist(SdTimer, Time1Sec*5);		// 5Sec
   3930          			Sd_Step[Path] = 2;
   3931          			#ifdef __RvsCount
   3932          				RvsOSCAlarmCountFunc(SysPath, Path);  //////
   3933          			#endif
   3934          			break;
   3935          			
   3936          		case 2:  // Amp On Check = After 5sec
   3937          			if(!TimeOverCheck(SdTimer))	return;
   3938          
   3939          			Sd_Cnt[Path]++; // Off Count
   3940          			if(Sd_Cnt[Path] >= 3)
   3941          			{
   3942          				if(tDnrSts->ShunDownTime == 0)		TimerRegist(SdTimer, Time1Sec*60L*30L);	
   3943          				else								TimerRegist(SdTimer, Time1Sec*20L);	
   3944          				
   3945          				Sd_Step[Path] = 3;
   3946          			}
   3947          			else
   3948          			{  
   3949          				*AmpOnOff = _Enable;
   3950          				AmpBitReason(SysPath, _Enable, 127, SD_AMP_ON);
   3951          
   3952          				TimerRegist(SdTimer, Time1Sec*1);
   3953          
   3954          				Sd_Step[Path] = 10; 
   3955          			}
   3956          			break;
   3957          
   3958          		case 3:	// Amp On Check - After 30min
   3959          			if(!TimeOverCheck(SdTimer))	return;
   3960          			
   3961          			*AmpOnOff = _Enable;
   3962          			AmpBitReason(SysPath, _Enable, 127, SD_AMP_ON);
   3963          			
   3964          			TimerRegist(SdTimer, Time1Sec*1);
   3965          
   3966          			Sd_Step[Path] = 20;
   3967          			break;
   3968          
   3969          		case 4:	// Amp Off Check
   3970          			if(!TimeOverCheck(SdTimer))
   3971          			{   // Timer  동안 유지 Check
   3972          			#if 0
   3973          				if(DetValue<LmtValue)	Sd_Step[Path] = 0;
   3974          				break;
   3975          			#endif
   3976          				if(DetValue < (LmtValue))	// 정상... 20141229 수정
   3977          				{
   3978          					Sd_Step[Path] = 0;
   3979          					Sd_Path[SysPath] = 0;
   3980          					break;
   3981          				}
   3982          				
   3983          
   3984          			
   3985          			}
   3986          
   3987          			*AmpOnOff = _Disable;
   3988          			AmpBitReason(SysPath, _Disable, OffReason, SD_AMP_OFF_INF);
   3989          
   3990          			Sd_Step[Path] = 30;	// 완전 Shutdown
   3991          			
   3992          			#ifdef __RvsCount
   3993          				RvsOSCAlarmCountFunc(SysPath, Path);  //////
   3994          			#endif
   3995          			
   3996          			break;
   3997          
   3998          		//---------------------------------------------------------------------//
   3999          		case 10:	// Amp On 시간 Total 5sec 유지...(5Sec Off시)
   4000          			if(!TimeOverCheck(SdTimer))	return;
   4001          			
   4002          			*AmpOnOff = _Enable;
   4003          			AmpBitReason(SysPath, _Enable, 127, SD_AMP_ON);
   4004          			
   4005          			TimerRegist(SdTimer, Time1Sec*4);
   4006          
   4007          			Sd_Step[Path] = 1; 
   4008          			
   4009          			break;
   4010          
   4011          		//---------------------------------------------------------------------//
   4012          		case 20:	// Amp On 시간 Total 5sec 유지...(30Min Off시)
   4013          			if(!TimeOverCheck(SdTimer))	return;
   4014          
   4015          			*AmpOnOff = _Enable;
   4016          			AmpBitReason(SysPath, _Enable, 127, SD_AMP_ON);
   4017          			
   4018          			TimerRegist(SdTimer, Time1Sec*4);
   4019          
   4020          			Sd_Step[Path] = 4; 
   4021          			break;
   4022          
   4023          		//---------------------------------------------------------------------//
   4024          		case 30:	// 완전 Shutdown 상태...
   4025          #if 0
   4026          			if((SysPath == PATH_2G)&&((Path == SD_FO_2G)||(Path == SD_FI_2G)||(Path == SD_RO_2G)))
   4027          			{
   4028          				AmpBitReason(PATH_LTE, _Disable, OffReason, SD_AMP_OFF_INF);
   4029          
   4030          				Sts->FwdAmpOnOff_LTE = Disable;
   4031          				
   4032          				if( Path == SD_FO_2G)	Sd_Step[SD_FO_LTE] = 30;
   4033          				if( Path == SD_FI_2G)	Sd_Step[SD_FI_LTE] = 30;
   4034          				if( Path == SD_RO_2G)	Sd_Step[SD_RO_LTE] = 30;
   4035          			}
   4036          			
   4037          			if((SysPath == PATH_LTE)&&((Path == SD_FO_LTE)||(Path == SD_FI_LTE)||(Path == SD_RO_LTE)))
   4038          			{
   4039          				AmpBitReason(PATH_2G, _Disable, OffReason, SD_AMP_OFF_INF);
   4040          				
   4041          				Sts->FwdAmpOnOff_2G = Disable;
   4042          				if( Path == SD_FO_LTE)	Sd_Step[SD_FO_2G] = 30;
   4043          				if( Path == SD_FI_LTE)	Sd_Step[SD_FI_2G] = 30;
   4044          				if( Path == SD_RO_LTE)	Sd_Step[SD_RO_2G] = 30;
   4045          			}
   4046          
   4047          			if((SysPath == PATH_LTE_A1)&&((Path == SD_FO_LTE_A1)||(Path == SD_FI_LTE_A1)||(Path == SD_RO_LTE_A1)))
   4048          			{
   4049          				AmpBitReason(PATH_LTE_A2, _Disable, OffReason, SD_AMP_OFF_INF);
   4050          				Sts->FwdAmpOnOff_LTE_A2 = Disable;
   4051          				if( Path == SD_FO_LTE_A1)	Sd_Step[SD_FO_LTE_A2] = 30;
   4052          				if( Path == SD_FI_LTE_A1)	Sd_Step[SD_FI_LTE_A2] = 30;
   4053          				if( Path == SD_RO_LTE_A1)	Sd_Step[SD_RO_LTE_A2] = 30;
   4054          			}
   4055          			
   4056          			if((SysPath == PATH_LTE_A2)&&((Path == SD_FO_LTE_A2)||(Path == SD_FI_LTE_A2)||(Path == SD_RO_LTE_A2)))
   4057          			{
   4058          				AmpBitReason(PATH_LTE_A1, _Disable, OffReason, SD_AMP_OFF_INF);
   4059          				Sts->FwdAmpOnOff_LTE_A1 = Disable;
   4060          				if( Path == SD_FO_LTE_A2)	Sd_Step[SD_FO_LTE_A1] = 30;
   4061          				if( Path == SD_FI_LTE_A2)	Sd_Step[SD_FI_LTE_A1] = 30;
   4062          				if( Path == SD_RO_LTE_A2)	Sd_Step[SD_RO_LTE_A1] = 30;
   4063          			}
   4064          
   4065          
   4066          			if((SysPath == PATH_LTE_A1_1)&&((Path == SD_FO_LTE_A1_1)||(Path == SD_FI_LTE_A1_1)||(Path == SD_RO_LTE_A1_1)))
   4067          			{
   4068          				AmpBitReason(PATH_LTE_A2_1, _Disable, OffReason, SD_AMP_OFF_INF);
   4069          				Sts->FwdAmp1OnOff_LTE_A2 = Disable;
   4070          				if( Path == SD_FO_LTE_A1_1)	Sd_Step[SD_FO_LTE_A2_1] = 30;
   4071          				if( Path == SD_FI_LTE_A1_1)	Sd_Step[SD_FI_LTE_A2_1] = 30;
   4072          				if( Path == SD_RO_LTE_A1_1)	Sd_Step[SD_RO_LTE_A2_1] = 30;
   4073          			}
   4074          
   4075          			if((SysPath == PATH_LTE_A2_1)&&((Path == SD_FO_LTE_A2_1)||(Path == SD_FI_LTE_A2_1)||(Path == SD_RO_LTE_A2_1)))
   4076          			{
   4077          				AmpBitReason(PATH_LTE_A1_1, _Disable, OffReason, SD_AMP_OFF_INF);
   4078          				Sts->FwdAmp1OnOff_LTE_A1 = Disable;
   4079          				if( Path == SD_FO_LTE_A2_1)	Sd_Step[SD_FO_LTE_A1_1] = 30;
   4080          				if( Path == SD_FI_LTE_A2_1)	Sd_Step[SD_FI_LTE_A1_1] = 30;
   4081          				if( Path == SD_RO_LTE_A2_1)	Sd_Step[SD_RO_LTE_A1_1] = 30;
   4082          			}
   4083          #endif			
   4084          			break;
   4085          
   4086          		//---------------------------------------------------------------------//
   4087          		default :
   4088          			Sd_Step[Path] = 0;
   4089          			Sd_Path[SysPath] = 0;
   4090          		break;
   4091          	}
   4092          }
   4093          
   4094          //=============================================================================//
   4095          // Shutdown
   4096          #if 1
   4097          void AmpBitReason(INT8U SysPath, INT8U EnSts, INT8U Reason, INT8U AmpSts)
   4098          {
   4099          	__Dnr_Sts  *Sts = tDnrSts;
   4100          	
   4101          	switch(SysPath)
   4102          	{
   4103          		case PATH_2G:
   4104          		case PATH_LTE:
   4105          			
   4106          			if(EnSts)	Sts->AlmSts.FwdAmpOnOff_2G = __SET;
   4107          			else		Sts->AlmSts.FwdAmpOnOff_2G = __RESET;
   4108          			Sts->AmpOffCase_2G = Reason;
   4109          			Sts->SD_Status_2G = AmpSts;
   4110          			
   4111          
   4112          			if(EnSts)	Sts->AlmSts.FwdAmpOnOff_LTE = __SET;
   4113          			else		Sts->AlmSts.FwdAmpOnOff_LTE = __RESET;
   4114          			Sts->AmpOffCase_LTE = Reason;
   4115          			Sts->SD_Status_LTE = AmpSts;
   4116          
   4117          			if( SysPath == PATH_2G)		Sts->FwdAmpOnOff_LTE = Sts->FwdAmpOnOff_2G;
   4118          			if( SysPath == PATH_LTE)	Sts->FwdAmpOnOff_2G  = Sts->FwdAmpOnOff_LTE;
   4119          			
   4120          			break;
   4121          
   4122          		case PATH_3G:
   4123          			if(EnSts)	Sts->AlmSts.FwdAmpOnOff_3G = __SET;
   4124          			else		Sts->AlmSts.FwdAmpOnOff_3G = __RESET;
   4125          			Sts->AmpOffCase_3G = Reason;
   4126          			Sts->SD_Status_3G = AmpSts;
   4127          			
   4128          			break;
   4129          
   4130          			
   4131          		case PATH_LTE_A1:
   4132          		case PATH_LTE_A2:
   4133          			
   4134          			if(EnSts)	Sts->AlmSts.FwdAmpOnOff_LTE_A1 = __SET;
   4135          			else		Sts->AlmSts.FwdAmpOnOff_LTE_A1 = __RESET;
   4136          			Sts->AmpOffCase_LTE_A1 = Reason;
   4137          			Sts->SD_Status_LTE_A1 = AmpSts;
   4138          			
   4139          			PwrAlarmTimer.FwdAmpOnOff_LTE_A1 = 12;
   4140          
   4141          			if(EnSts)	Sts->AlmSts.FwdAmpOnOff_LTE_A2 = __SET;
   4142          			else		Sts->AlmSts.FwdAmpOnOff_LTE_A2 = __RESET;
   4143          			Sts->AmpOffCase_LTE_A2 = Reason;
   4144          			Sts->SD_Status_LTE_A2 = AmpSts;
   4145          
   4146          
   4147          			if( SysPath == PATH_LTE_A1)	Sts->FwdAmpOnOff_LTE_A2  = Sts->FwdAmpOnOff_LTE_A2;
   4148          			if( SysPath == PATH_LTE_A2)	Sts->FwdAmpOnOff_LTE_A1  = Sts->FwdAmpOnOff_LTE_A2;
   4149          			
   4150          			break;
   4151          
   4152          		case PATH_LTE_1:
   4153          			if(EnSts)	Sts->AlmSts.FwdAmp1OnOff_LTE = __SET;
   4154          			else		Sts->AlmSts.FwdAmp1OnOff_LTE = __RESET;
   4155          			Sts->Amp1OffCase_LTE = Reason;
   4156          			Sts->SD_Status_LTE_1= AmpSts;
   4157          			
   4158          //			PwrAlarmTimer.FwdAmp1OnOff_LTE = 15;
   4159          			break;
   4160          			
   4161          		case PATH_LTE_A1_1:
   4162          		case PATH_LTE_A2_1:
   4163          			
   4164          			if(EnSts)	Sts->AlmSts.FwdAmp1OnOff_LTE_A1 = __SET;
   4165          			else		Sts->AlmSts.FwdAmp1OnOff_LTE_A1 = __RESET;
   4166          			Sts->Amp1OffCase_LTE_A1 = Reason;
   4167          			Sts->SD_Status_LTE_A1_1= AmpSts;
   4168          			
   4169          			if(EnSts)	Sts->AlmSts.FwdAmp1OnOff_LTE_A2 = __SET;
   4170          			else		Sts->AlmSts.FwdAmp1OnOff_LTE_A2 = __RESET;
   4171          			Sts->Amp1OffCase_LTE_A2 = Reason;
   4172          			Sts->SD_Status_LTE_A2_1 = AmpSts;
   4173          
   4174          			if( SysPath == PATH_LTE_A1_1)	Sts->FwdAmp1OnOff_LTE_A2  = Sts->FwdAmp1OnOff_LTE_A2;
   4175          			if( SysPath == PATH_LTE_A2_1)	Sts->FwdAmp1OnOff_LTE_A1  = Sts->FwdAmp1OnOff_LTE_A2;
   4176          
   4177          			
   4178          			break;			
   4179          	}
   4180          	
   4181          }
   4182          #endif  
   4183          
   4184          
   4185          
   4186          void RvsOSCAlarmCountFunc(INT8U SysPath, INT8U Path)
   4187          {
   4188          //	ShutdownFunc(PATH_2G, SD_FI_2G);
   4189          	__Dnr_Sts  *Sts = tDnrSts;
   4190          
   4191          	switch(Path)
   4192          	{
   4193          		case SD_RO_2G:
   4194          			if(Sts->CurrRvsOSCAlarmCount_2G++ >= 127) Sts->CurrRvsOSCAlarmCount_2G = 127;
   4195          
   4196          		break;
   4197          
   4198          		case SD_RO_LTE:
   4199          			if(Sts->CurrRvsOSCAlarmCount_LTE++ >= 127) Sts->CurrRvsOSCAlarmCount_LTE = 127;
   4200          
   4201          		break;
   4202          
   4203          		case SD_RO_3G:
   4204          			if(Sts->CurrRvsOSCAlarmCount_3G++ >= 127) Sts->CurrRvsOSCAlarmCount_3G = 127;
   4205          
   4206          		break;
   4207          
   4208          		case SD_RO_LTE_A1:
   4209          			if(Sts->CurrRvsOSCAlarmCount_LTE_A1++ >= 127) Sts->CurrRvsOSCAlarmCount_LTE_A1 = 127;
   4210          
   4211          		break;
   4212          
   4213          		case SD_RO_LTE_A2:
   4214          			if(Sts->CurrRvsOSCAlarmCount_LTE_A2++ >= 127) Sts->CurrRvsOSCAlarmCount_LTE_A2 = 127;
   4215          
   4216          		break;
   4217          
   4218          
   4219          		case SD_RO_LTE_1:
   4220          			if(Sts->CurrRvs1OSCAlarmCount_LTE++ >= 127) Sts->CurrRvs1OSCAlarmCount_LTE = 127;
   4221          
   4222          		break;
   4223          
   4224          		case SD_RO_LTE_A1_1:
   4225          			if(Sts->CurrRvs1OSCAlarmCount_LTE_A1++ >= 127) Sts->CurrRvs1OSCAlarmCount_LTE_A1 = 127;
   4226          
   4227          		break;
   4228          
   4229          		case SD_RO_LTE_A2_1:
   4230          			if( Sts->CurrRvs1OSCAlarmCount_LTE_A2++ >= 127) Sts->CurrRvs1OSCAlarmCount_LTE_A2 = 127;
   4231          		break;
   4232          		
   4233          		default :
   4234          			
   4235          		break;
   4236          	}
   4237          }
   4238          
   4239          
   4240          #if 0
   4241          void AmpBitReason(INT8U SysPath, INT8U EnSts, INT8U Reason, INT8U AmpSts)
   4242          {
   4243          	__Dnr_Sts  *Sts = tDnrSts;
   4244          	
   4245          	switch(SysPath)
   4246          	{
   4247          		case PATH_2G:
   4248          			if(EnSts)	Sts->AlmSts.FwdAmpOnOff_2G = __SET;
   4249          			else		Sts->AlmSts.FwdAmpOnOff_2G = __RESET;
   4250          			Sts->AmpOffCase_2G = Reason;
   4251          			Sts->SD_Status_2G = AmpSts;
   4252          			PwrAlarmTimer.FwdAmpOnOff_2G = 25;
   4253          			
   4254          			break;
   4255          		case PATH_3G:
   4256          			if(EnSts)	Sts->AlmSts.FwdAmpOnOff_3G = __SET;
   4257          			else		Sts->AlmSts.FwdAmpOnOff_3G = __RESET;
   4258          			Sts->AmpOffCase_3G = Reason;
   4259          			Sts->SD_Status_3G = AmpSts;
   4260          			
   4261          			PwrAlarmTimer.FwdAmpOnOff_3G = 25;
   4262          			break;
   4263          
   4264          		case PATH_LTE:
   4265          			if(EnSts)	Sts->AlmSts.FwdAmpOnOff_LTE = __SET;
   4266          			else		Sts->AlmSts.FwdAmpOnOff_LTE = __RESET;
   4267          			Sts->AmpOffCase_LTE = Reason;
   4268          			Sts->SD_Status_LTE = AmpSts;
   4269          			
   4270          			PwrAlarmTimer.FwdAmpOnOff_LTE = 25;
   4271          			break;
   4272          			
   4273          		case PATH_LTE_A1:
   4274          			if(EnSts)	Sts->AlmSts.FwdAmpOnOff_LTE_A1 = __SET;
   4275          			else		Sts->AlmSts.FwdAmpOnOff_LTE_A1 = __RESET;
   4276          			Sts->AmpOffCase_LTE_A1 = Reason;
   4277          			Sts->SD_Status_LTE_A1 = AmpSts;
   4278          			
   4279          			PwrAlarmTimer.FwdAmpOnOff_LTE_A1 = 25;
   4280          			break;
   4281          
   4282          		case PATH_LTE_A2:
   4283          			if(EnSts)	Sts->AlmSts.FwdAmpOnOff_LTE_A2 = __SET;
   4284          			else		Sts->AlmSts.FwdAmpOnOff_LTE_A2 = __RESET;
   4285          			Sts->AmpOffCase_LTE_A2 = Reason;
   4286          			Sts->SD_Status_LTE_A2 = AmpSts;
   4287          			
   4288          			PwrAlarmTimer.FwdAmpOnOff_LTE_A2 = 25;
   4289          			break;
   4290          
   4291          		case PATH_LTE_1:
   4292          			if(EnSts)	Sts->AlmSts.FwdAmp1OnOff_LTE = __SET;
   4293          			else		Sts->AlmSts.FwdAmp1OnOff_LTE = __RESET;
   4294          			Sts->Amp1OffCase_LTE = Reason;
   4295          			Sts->SD_Status_LTE_1= AmpSts;
   4296          			
   4297          			PwrAlarmTimer.FwdAmp1OnOff_LTE = 25;
   4298          			break;
   4299          			
   4300          		case PATH_LTE_A1_1:
   4301          			if(EnSts)	Sts->AlmSts.FwdAmp1OnOff_LTE_A1 = __SET;
   4302          			else		Sts->AlmSts.FwdAmp1OnOff_LTE_A1 = __RESET;
   4303          			Sts->Amp1OffCase_LTE_A1 = Reason;
   4304          			Sts->SD_Status_LTE_A1_1= AmpSts;
   4305          			
   4306          			PwrAlarmTimer.FwdAmp1OnOff_LTE_A1 = 25;
   4307          			break;
   4308          
   4309          		case PATH_LTE_A2_1:
   4310          			if(EnSts)	Sts->AlmSts.FwdAmp1OnOff_LTE_A2 = __SET;
   4311          			else		Sts->AlmSts.FwdAmp1OnOff_LTE_A2 = __RESET;
   4312          			Sts->Amp1OffCase_LTE_A2 = Reason;
   4313          			Sts->SD_Status_LTE_A2_1 = AmpSts;
   4314          			PwrAlarmTimer.FwdAmp1OnOff_LTE_A2 = 25;
   4315          			
   4316          			break;			
   4317          	}
   4318          	
   4319          }
   4320          #endif  
   4321          ////////////////////////

   Maximum stack usage in bytes:

     Function                .cstack
     --------                -------
     ADC_Init                     8
     ADC_Task                     8
     AGCCheck                    16
     AGCCheckFunction             8
     AmpBitReason                16
     Dnr0_ReadPwrTable           32
     Dnr1_ReadPwrTable           32
     FwdAGCCheck_CDMALTE         56
     FwdAGCCheck_CDMALTE_15M     56
     FwdAGCCheck_LTE_1           48
     FwdAGCCheck_LTE_A_0         56
     FwdAGCCheck_LTE_A_1         56
     FwdAGCCheck_WCDMA           40
     GainAttnCalculation          8
     OneOutPwrConv                0
     PwrTableOffset              16
     ReadAdcValue                40
     ReadAdcValue_TRIO           48
     ReadPwrTableDnr             40
     RvsOSCAlarmCountFunc         0
     ShutdownFunc                40
     Svr0_ReadPwrTable           32
     Svr1_ReadPwrTable           32
     TRIO_AlarmCheck             24
     Table_Operation              4
     TemptoIndex                  0
     TwoOutPwrConv                0
     TwoOutPwrConvINT             0
     TwoOutPwrConv_INT            0
     ULTwoOutPwrConvINT           0


   Section sizes:

     Function/Label          Bytes
     --------------          -----
     AdcTaskStk               512
     AlcSem                     4
     FlagAmpOnOff_2G            8
     FlagAmpOnOff_3G
     FlagAmpOnOff_LTE
     FlagAmpOnOff_LTE_A1
     FlagAmpOnOff_LTE_A2
     FlagAmp1OnOff_LTE
     FlagAmp1OnOff_LTE_A1
     FlagAmp1OnOff_LTE_A2
     Ac_Sd_Flag                60
     Sd_Step
     Sd_Cnt
     Sd_Path
     Sd_BuffClear               8
     LimitAlarmCnt             16
     tAGC_ATTENMAX_LTE_1        3
     CurrAgcAttn_LTE_1
     tmpRvs1ALCLvl_LTE
     AlarmLEDSts               64
     SleepModeCnt              16
     InitSleepMode              8
     tmpRvsALCLvl_2G            1
     tmpRvsALCLvl_LTE           1
     tmpRvsALCLvl_LTE_A1        1
     tmpRvsALCLvl_LTE_A2        1
     tmpRvs1ALCLvl_LTE_A1       1
     tmpRvs1ALCLvl_LTE_A2       1
     chkSleepMode             110
     tempIndexHys
     iAGCOnOff
     iAGCAttnMAX
     tAGC10_ATTENMAX_3G
     tAGC_ATTENMAX_2G
     tAGC_ATTENMAX_LTE
     tAGC_ATTENMAX_LTE_A1
     tAGC_ATTENMAX_LTE_A2
     tALC_ATTENMAX_2G
     CurrAgcAttn_3G
     CurrAgcAttn_2G
     CurrAgcAttn_LTE
     CurrAgcAttn_LTE_A1
     CurrAgcAttn_LTE_A2
     CurrAgcAttn_LTE_A1_1
     CurrAgcAttn_LTE_A2_1
     CurrRvsAgcAttn_3G
     CurrRvsAgcAttn_2G
     CurrRvsAgcAttn_LTE
     CurrRvsAgcAttn_LTE_A1
     CurrRvsAgcAttn_LTE_A2
     CurrRvsAgcAttn_LTE_1
     CurrRvsAgcAttn_LTE_A1_1
     CurrRvsAgcAttn_LTE_A2_1
     iAGClimit
     iAGCPwr
     dBmTomW
     tmpRvsALCLvl_3G
     tmpRvsAttn1_2G
     Amp_Step                   8
     mWTodBm                   72
     ADC_Init                  16
     ADC_Task                  44
     OneOutPwrConv             42
     TwoOutPwrConv              2
     ?Subroutine0              20
     TwoOutPwrConvINT          10
     ?Subroutine1              10
     ULTwoOutPwrConvINT        12
     TwoOutPwrConv_INT         12
     Table_Operation           22
     ReadAdcValue            2060
     ReadAdcValue_TRIO       3508
     PwrTableOffset            94
     ReadPwrTableDnr          110
     Dnr0_ReadPwrTable        266
     ?Subroutine3               6
     Dnr1_ReadPwrTable        264
     Svr0_ReadPwrTable        266
     Svr1_ReadPwrTable        266
     GainAttnCalculation       14
     TemptoIndex               24
     AGCCheck                 144
     AGCCheckFunction          52
     FwdAGCCheck_CDMALTE_15M  628
     ?Subroutine2               6
     FwdAGCCheck_CDMALTE     1126
     FwdAGCCheck_WCDMA        472
     FwdAGCCheck_LTE_A_0     1122
     FwdAGCCheck_LTE_1        494
     FwdAGCCheck_LTE_A_1     1128
     TRIO_AlarmCheck          892
     ShutdownFunc            1860
     AmpBitReason             274
     RvsOSCAlarmCountFunc     184
     ??DataTable1               4
     ??DataTable1_1             4
     ??DataTable1_2             4
     ??DataTable1_3             4
     ??DataTable1_4             4
     ??DataTable1_5             4
     ??DataTable3               4
     ??DataTable3_1             4
     ??DataTable3_2             4
     ??DataTable4               4
     ??DataTable4_1             4
     ??DataTable8               4
     ??DataTable8_1             4
     ??DataTable8_2             4
     ??DataTable8_3             4
     ??DataTable8_4             4
     ??DataTable8_5             4
     ??DataTable8_6             4
     ??DataTable8_7             4
     ??DataTable8_8             4
     ??DataTable8_9             4
     ??DataTable8_10            4
     ??DataTable8_11            4
     ??DataTable8_12            4
     ??DataTable8_13            4
     ??DataTable8_14            4
     ??DataTable8_15            4
     ??DataTable8_16            4
     ??DataTable8_17            4
     ??DataTable8_18            4
     ??DataTable8_19            4
     ??DataTable8_20            4
     ??DataTable8_21            4
     ??DataTable9               4
     ??DataTable9_1             4
     ??DataTable9_2             4
     ??DataTable10              4
     ??DataTable10_1            4
     ??DataTable10_2            4
     ??DataTable10_3            4
     ??DataTable13              4
     ??DataTable13_1            4
     ??DataTable13_2            4
     ??DataTable16              4
     ??DataTable16_1            4
     ??DataTable16_2            4
     ??DataTable16_3            4
     ??DataTable16_4            4
     ??DataTable16_5            4
     ??DataTable16_6            4
     ??DataTable16_7            4
     ??DataTable16_8            4
     ??DataTable16_9            4
     ??DataTable16_10           4

 
    705 bytes in section .bss
    190 bytes in section .data
 15 666 bytes in section .text
 
 15 666 bytes of CODE memory
    895 bytes of DATA memory

Errors: none
Warnings: none
